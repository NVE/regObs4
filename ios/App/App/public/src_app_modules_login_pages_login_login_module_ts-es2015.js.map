{"version":3,"file":"src_app_modules_login_pages_login_login_module_ts-es2015.js","mappings":";;;;;;;;;;;;;;;;;AACuD;AACd;AACoB;;;AAE7D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kDAAS;KACrB;CACF,CAAC;AAMK,MAAM,eAAe;;8EAAf,eAAe;4GAAf,eAAe;gHAHjB,CAAC,+DAAY,EAAE,kEAAqB,CAAC,MAAM,CAAC,CAAC;mIAG3C,eAAe,mBAFX,kDAAS,aADd,+DAAY,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVqD;AACkB;AAC9C;AACR;AACyD;AAC/C;;;;;;;;;;;ICInD,8EAAkE;IAChE,2EAAU;IACR,+EAAiC;IAAA,uDACjC;;IAAA,4DAAY;IACd,4DAAW;IACX,gFAA+E;IAAvB,sUAAsB;IAC5E,0EAAsD;IACtD,uDACF;;IAAA,4DAAa;IACb,iFAAwG;IAAnB,kUAAkB;IACrG,wDAAgC;;IAAA,4DAAa;IACjD,4DAAW;;;IAT0B,0DACjC;IADiC,4LACjC;IAIA,0DACF;IADE,+JACF;IAEE,0DAAgC;IAAhC,2JAAgC;;;IAXtC,iFAA+E;IAC7E,+HAWW;IACb,4DAAc;;;;;IAZY,0DAA8B;IAA9B,4FAA8B;;;;IActD,iFAAwG;IAAnB,uTAAkB;IACrG,uDACF;;IAAA,4DAAa;;IADX,0DACF;IADE,0JACF;;ADbK,MAAM,SAAS;IAGpB,YACU,iBAAoC,EACpC,kBAAsC,EACtC,mBAAwC;QAFxC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,wBAAmB,GAAnB,mBAAmB,CAAqB;IAC/C,CAAC;IAEJ,QAAQ;QACN,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC;IAC5D,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;IACzC,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;IACzC,CAAC;IAEK,UAAU;;YACd,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,QAAQ;iBACrD,IAAI,CACH,mDAAG,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,0DAAmB,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EACxD,oDAAI,CAAC,CAAC,CAAC,CACR;iBACA,SAAS,EAAE,CAAC;YACf,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,SAAS;iBAC3D,IAAI,CAAC,oDAAI,CAAC,CAAC,CAAC,CAAC;iBACb,SAAS,EAAE,CAAC;YACf,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CACvC,GAAG,SAAS,YAAY,IAAI,CAAC,yBAAyB,CAAC,cAAc,CAAC,EAAE,CACzE,CAAC;QACJ,CAAC;KAAA;IAEO,yBAAyB,CAAC,OAAgB;QAChD,IAAI,OAAO,KAAK,kEAAU,IAAI,OAAO,KAAK,kEAAU,EAAE;YACpD,OAAO,OAAO,CAAC;SAChB;QACD,OAAO,IAAI,CAAC;IACd,CAAC;;kEAzCU,SAAS;uGAAT,SAAS;QCftB,6EAAY;QACV,iFAAuC;QACrC,iFAA0B;QACxB,gFAA2D;QAC7D,4DAAc;QACd,4EAAW;QACT,uDACF;;QAAA,4DAAY;QACd,4DAAc;QAChB,4DAAa;QAEb,qHAac;;QACd,iMAIc;;QAvBR,0DACF;QADE,0JACF;QAI8B,0DAA4B;QAA5B,oJAA4B","sources":["./src/app/modules/login/pages/login/login.module.ts","./src/app/modules/login/pages/login/login.page.ts","./src/app/modules/login/pages/login/login.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { LoginPage } from './login.page';\r\nimport { SharedModule } from '../../../shared/shared.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [SharedModule, RouterModule.forChild(routes)],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { LoggedInUser } from '../../models/logged-in-user.model';\r\nimport { RegobsAuthService } from '../../../auth/services/regobs-auth.service';\r\nimport { UserSettingService } from '../../../../core/services/user-setting/user-setting.service';\r\nimport { settings } from '../../../../../settings';\r\nimport { map, take } from 'rxjs/operators';\r\nimport { ExternalLinkService } from '../../../../core/services/external-link/external-link.service';\r\nimport { LangKey } from '@varsom-regobs-common/core';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss']\r\n})\r\nexport class LoginPage implements OnInit {\r\n  loggedInUser$: Observable<LoggedInUser>;\r\n\r\n  constructor(\r\n    private regobsAuthService: RegobsAuthService,\r\n    private userSettingService: UserSettingService,\r\n    private externalLinkService: ExternalLinkService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loggedInUser$ = this.regobsAuthService.loggedInUser$;\r\n  }\r\n\r\n  signIn(): Promise<void> {\r\n    return this.regobsAuthService.signIn();\r\n  }\r\n\r\n  logout(): Promise<void> {\r\n    return this.regobsAuthService.logout();\r\n  }\r\n\r\n  async openMyPage(): Promise<void> {\r\n    const myPageUrl = await this.userSettingService.appMode$\r\n      .pipe(\r\n        map((appMode) => settings.authConfig[appMode].myPageUrl),\r\n        take(1)\r\n      )\r\n      .toPromise();\r\n    const currentLangKey = await this.userSettingService.language$\r\n      .pipe(take(1))\r\n      .toPromise();\r\n    this.externalLinkService.openExternalLink(\r\n      `${myPageUrl}?Culture=${this.getSupportedMyPageLocales(currentLangKey)}`\r\n    );\r\n  }\r\n\r\n  private getSupportedMyPageLocales(langKey: LangKey) {\r\n    if (langKey === LangKey.nb || langKey === LangKey.nn) {\r\n      return 'nb-NO';\r\n    }\r\n    return 'en';\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\" defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{ 'LOGIN.TITLE' | translate }}\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\" *ngIf=\"loggedInUser$ | async as loggedInUser\">\r\n  <ion-list lines=\"none\" *ngIf=\"loggedInUser.isLoggedIn else login\">\r\n    <ion-item>\r\n      <ion-label class=\"ion-text-wrap\">{{ 'LOGIN.LOGGED_IN_AS' | translate }} {{ loggedInUser.email }}\r\n      </ion-label>\r\n    </ion-item>\r\n    <ion-button type=\"button\" fill=\"outline\" expand=\"block\" (click)=\"openMyPage()\">\r\n      <ion-icon slot=\"start\" name=\"push-outline\"></ion-icon>\r\n      {{'LOGIN.MY_PROFILE' | translate }}\r\n    </ion-button>\r\n    <ion-button class=\"logout-button\" expand=\"block\" type=\"submit\" color=\"varsom-orange\" (click)=\"logout()\">\r\n      {{ 'LOGIN.LOGOUT' | translate }}</ion-button>\r\n  </ion-list>\r\n</ion-content>\r\n<ng-template #login>\r\n  <ion-button class=\"logout-button\" expand=\"block\" type=\"submit\" color=\"varsom-orange\" (click)=\"signIn()\">\r\n    {{ 'LOGIN.LOGIN' | translate }}\r\n  </ion-button>\r\n</ng-template>"],"names":[],"sourceRoot":"webpack:///"}