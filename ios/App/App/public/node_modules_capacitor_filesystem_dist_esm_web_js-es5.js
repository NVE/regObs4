(function () {
  "use strict";

  function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

  function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

  function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

  function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

  function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

  function _possibleConstructorReturn(self, call) { if (call && (typeof call === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  (self["webpackChunkregobs4"] = self["webpackChunkregobs4"] || []).push([["node_modules_capacitor_filesystem_dist_esm_web_js"], {
    /***/
    16603: function _(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
      __webpack_require__.r(__webpack_exports__);
      /* harmony export */


      __webpack_require__.d(__webpack_exports__, {
        /* harmony export */
        "FilesystemWeb": function FilesystemWeb() {
          return (
            /* binding */
            _FilesystemWeb
          );
        }
        /* harmony export */

      });
      /* harmony import */


      var C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */
      80151);
      /* harmony import */


      var _capacitor_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @capacitor/core */
      41899);

      function resolve(path) {
        var posix = path.split('/').filter(function (item) {
          return item !== '.';
        });
        var newPosix = [];
        posix.forEach(function (item) {
          if (item === '..' && newPosix.length > 0 && newPosix[newPosix.length - 1] !== '..') {
            newPosix.pop();
          } else {
            newPosix.push(item);
          }
        });
        return newPosix.join('/');
      }

      function isPathParent(parent, children) {
        parent = resolve(parent);
        children = resolve(children);
        var pathsA = parent.split('/');
        var pathsB = children.split('/');
        return parent !== children && pathsA.every(function (value, index) {
          return value === pathsB[index];
        });
      }

      var _FilesystemWeb = /*#__PURE__*/function (_capacitor_core__WEBP) {
        _inherits(_FilesystemWeb, _capacitor_core__WEBP);

        var _super = _createSuper(_FilesystemWeb);

        function _FilesystemWeb() {
          var _this17;

          _classCallCheck(this, _FilesystemWeb);

          _this17 = _super.apply(this, arguments);
          _this17.DB_VERSION = 1;
          _this17.DB_NAME = 'Disc';
          _this17._writeCmds = ['add', 'put', 'delete'];
          return _this17;
        }

        _createClass(_FilesystemWeb, [{
          key: "initDb",
          value: function initDb() {
            var _this = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
              return regeneratorRuntime.wrap(function _callee$(_context) {
                while (1) {
                  switch (_context.prev = _context.next) {
                    case 0:
                      if (!(_this._db !== undefined)) {
                        _context.next = 2;
                        break;
                      }

                      return _context.abrupt("return", _this._db);

                    case 2:
                      if ('indexedDB' in window) {
                        _context.next = 4;
                        break;
                      }

                      throw _this.unavailable("This browser doesn't support IndexedDB");

                    case 4:
                      return _context.abrupt("return", new Promise(function (resolve, reject) {
                        var request = indexedDB.open(_this.DB_NAME, _this.DB_VERSION);
                        request.onupgradeneeded = _FilesystemWeb.doUpgrade;

                        request.onsuccess = function () {
                          _this._db = request.result;
                          resolve(request.result);
                        };

                        request.onerror = function () {
                          return reject(request.error);
                        };

                        request.onblocked = function () {
                          console.warn('db blocked');
                        };
                      }));

                    case 5:
                    case "end":
                      return _context.stop();
                  }
                }
              }, _callee);
            }))();
          }
        }, {
          key: "dbRequest",
          value: function dbRequest(cmd, args) {
            var _this2 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
              var readFlag;
              return regeneratorRuntime.wrap(function _callee2$(_context2) {
                while (1) {
                  switch (_context2.prev = _context2.next) {
                    case 0:
                      readFlag = _this2._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';
                      return _context2.abrupt("return", _this2.initDb().then(function (conn) {
                        return new Promise(function (resolve, reject) {
                          var tx = conn.transaction(['FileStorage'], readFlag);
                          var store = tx.objectStore('FileStorage');
                          var req = store[cmd].apply(store, _toConsumableArray(args));

                          req.onsuccess = function () {
                            return resolve(req.result);
                          };

                          req.onerror = function () {
                            return reject(req.error);
                          };
                        });
                      }));

                    case 2:
                    case "end":
                      return _context2.stop();
                  }
                }
              }, _callee2);
            }))();
          }
        }, {
          key: "dbIndexRequest",
          value: function dbIndexRequest(indexName, cmd, args) {
            var _this3 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
              var readFlag;
              return regeneratorRuntime.wrap(function _callee3$(_context3) {
                while (1) {
                  switch (_context3.prev = _context3.next) {
                    case 0:
                      readFlag = _this3._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';
                      return _context3.abrupt("return", _this3.initDb().then(function (conn) {
                        return new Promise(function (resolve, reject) {
                          var tx = conn.transaction(['FileStorage'], readFlag);
                          var store = tx.objectStore('FileStorage');
                          var index = store.index(indexName);
                          var req = index[cmd].apply(index, _toConsumableArray(args));

                          req.onsuccess = function () {
                            return resolve(req.result);
                          };

                          req.onerror = function () {
                            return reject(req.error);
                          };
                        });
                      }));

                    case 2:
                    case "end":
                      return _context3.stop();
                  }
                }
              }, _callee3);
            }))();
          }
        }, {
          key: "getPath",
          value: function getPath(directory, uriPath) {
            var cleanedUriPath = uriPath !== undefined ? uriPath.replace(/^[/]+|[/]+$/g, '') : '';
            var fsPath = '';
            if (directory !== undefined) fsPath += '/' + directory;
            if (uriPath !== '') fsPath += '/' + cleanedUriPath;
            return fsPath;
          }
        }, {
          key: "clear",
          value: function clear() {
            var _this4 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
              var conn, tx, store;
              return regeneratorRuntime.wrap(function _callee4$(_context4) {
                while (1) {
                  switch (_context4.prev = _context4.next) {
                    case 0:
                      _context4.next = 2;
                      return _this4.initDb();

                    case 2:
                      conn = _context4.sent;
                      tx = conn.transaction(['FileStorage'], 'readwrite');
                      store = tx.objectStore('FileStorage');
                      store.clear();

                    case 6:
                    case "end":
                      return _context4.stop();
                  }
                }
              }, _callee4);
            }))();
          }
          /**
           * Read a file from disk
           * @param options options for the file read
           * @return a promise that resolves with the read file data result
           */

        }, {
          key: "readFile",
          value: function readFile(options) {
            var _this5 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
              var path, entry;
              return regeneratorRuntime.wrap(function _callee5$(_context5) {
                while (1) {
                  switch (_context5.prev = _context5.next) {
                    case 0:
                      path = _this5.getPath(options.directory, options.path); // const encoding = options.encoding;

                      _context5.next = 3;
                      return _this5.dbRequest('get', [path]);

                    case 3:
                      entry = _context5.sent;

                      if (!(entry === undefined)) {
                        _context5.next = 6;
                        break;
                      }

                      throw Error('File does not exist.');

                    case 6:
                      return _context5.abrupt("return", {
                        data: entry.content ? entry.content : ''
                      });

                    case 7:
                    case "end":
                      return _context5.stop();
                  }
                }
              }, _callee5);
            }))();
          }
          /**
           * Write a file to disk in the specified location on device
           * @param options options for the file write
           * @return a promise that resolves with the file write result
           */

        }, {
          key: "writeFile",
          value: function writeFile(options) {
            var _this6 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
              var path, data, doRecursive, occupiedEntry, encoding, parentPath, parentEntry, subDirIndex, parentArgPath, now, pathObj;
              return regeneratorRuntime.wrap(function _callee6$(_context6) {
                while (1) {
                  switch (_context6.prev = _context6.next) {
                    case 0:
                      path = _this6.getPath(options.directory, options.path);
                      data = options.data;
                      doRecursive = options.recursive;
                      _context6.next = 5;
                      return _this6.dbRequest('get', [path]);

                    case 5:
                      occupiedEntry = _context6.sent;

                      if (!(occupiedEntry && occupiedEntry.type === 'directory')) {
                        _context6.next = 8;
                        break;
                      }

                      throw 'The supplied path is a directory.';

                    case 8:
                      encoding = options.encoding;
                      parentPath = path.substr(0, path.lastIndexOf('/'));
                      _context6.next = 12;
                      return _this6.dbRequest('get', [parentPath]);

                    case 12:
                      parentEntry = _context6.sent;

                      if (!(parentEntry === undefined)) {
                        _context6.next = 19;
                        break;
                      }

                      subDirIndex = parentPath.indexOf('/', 1);

                      if (!(subDirIndex !== -1)) {
                        _context6.next = 19;
                        break;
                      }

                      parentArgPath = parentPath.substr(subDirIndex);
                      _context6.next = 19;
                      return _this6.mkdir({
                        path: parentArgPath,
                        directory: options.directory,
                        recursive: doRecursive
                      });

                    case 19:
                      now = Date.now();
                      pathObj = {
                        path: path,
                        folder: parentPath,
                        type: 'file',
                        size: data.length,
                        ctime: now,
                        mtime: now,
                        content: !encoding && data.indexOf(',') >= 0 ? data.split(',')[1] : data
                      };
                      _context6.next = 23;
                      return _this6.dbRequest('put', [pathObj]);

                    case 23:
                      return _context6.abrupt("return", {
                        uri: pathObj.path
                      });

                    case 24:
                    case "end":
                      return _context6.stop();
                  }
                }
              }, _callee6);
            }))();
          }
          /**
           * Append to a file on disk in the specified location on device
           * @param options options for the file append
           * @return a promise that resolves with the file write result
           */

        }, {
          key: "appendFile",
          value: function appendFile(options) {
            var _this7 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {
              var path, data, parentPath, now, ctime, occupiedEntry, parentEntry, subDirIndex, parentArgPath, pathObj;
              return regeneratorRuntime.wrap(function _callee7$(_context7) {
                while (1) {
                  switch (_context7.prev = _context7.next) {
                    case 0:
                      path = _this7.getPath(options.directory, options.path);
                      data = options.data; // const encoding = options.encoding;

                      parentPath = path.substr(0, path.lastIndexOf('/'));
                      now = Date.now();
                      ctime = now;
                      _context7.next = 7;
                      return _this7.dbRequest('get', [path]);

                    case 7:
                      occupiedEntry = _context7.sent;

                      if (!(occupiedEntry && occupiedEntry.type === 'directory')) {
                        _context7.next = 10;
                        break;
                      }

                      throw 'The supplied path is a directory.';

                    case 10:
                      _context7.next = 12;
                      return _this7.dbRequest('get', [parentPath]);

                    case 12:
                      parentEntry = _context7.sent;

                      if (!(parentEntry === undefined)) {
                        _context7.next = 19;
                        break;
                      }

                      subDirIndex = parentPath.indexOf('/', 1);

                      if (!(subDirIndex !== -1)) {
                        _context7.next = 19;
                        break;
                      }

                      parentArgPath = parentPath.substr(subDirIndex);
                      _context7.next = 19;
                      return _this7.mkdir({
                        path: parentArgPath,
                        directory: options.directory,
                        recursive: true
                      });

                    case 19:
                      if (occupiedEntry !== undefined) {
                        data = occupiedEntry.content + data;
                        ctime = occupiedEntry.ctime;
                      }

                      pathObj = {
                        path: path,
                        folder: parentPath,
                        type: 'file',
                        size: data.length,
                        ctime: ctime,
                        mtime: now,
                        content: data
                      };
                      _context7.next = 23;
                      return _this7.dbRequest('put', [pathObj]);

                    case 23:
                    case "end":
                      return _context7.stop();
                  }
                }
              }, _callee7);
            }))();
          }
          /**
           * Delete a file from disk
           * @param options options for the file delete
           * @return a promise that resolves with the deleted file data result
           */

        }, {
          key: "deleteFile",
          value: function deleteFile(options) {
            var _this8 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {
              var path, entry, entries;
              return regeneratorRuntime.wrap(function _callee8$(_context8) {
                while (1) {
                  switch (_context8.prev = _context8.next) {
                    case 0:
                      path = _this8.getPath(options.directory, options.path);
                      _context8.next = 3;
                      return _this8.dbRequest('get', [path]);

                    case 3:
                      entry = _context8.sent;

                      if (!(entry === undefined)) {
                        _context8.next = 6;
                        break;
                      }

                      throw Error('File does not exist.');

                    case 6:
                      _context8.next = 8;
                      return _this8.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)]);

                    case 8:
                      entries = _context8.sent;

                      if (!(entries.length !== 0)) {
                        _context8.next = 11;
                        break;
                      }

                      throw Error('Folder is not empty.');

                    case 11:
                      _context8.next = 13;
                      return _this8.dbRequest('delete', [path]);

                    case 13:
                    case "end":
                      return _context8.stop();
                  }
                }
              }, _callee8);
            }))();
          }
          /**
           * Create a directory.
           * @param options options for the mkdir
           * @return a promise that resolves with the mkdir result
           */

        }, {
          key: "mkdir",
          value: function mkdir(options) {
            var _this9 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {
              var path, doRecursive, parentPath, depth, parentEntry, occupiedEntry, parentArgPath, now, pathObj;
              return regeneratorRuntime.wrap(function _callee9$(_context9) {
                while (1) {
                  switch (_context9.prev = _context9.next) {
                    case 0:
                      path = _this9.getPath(options.directory, options.path);
                      doRecursive = options.recursive;
                      parentPath = path.substr(0, path.lastIndexOf('/'));
                      depth = (path.match(/\//g) || []).length;
                      _context9.next = 6;
                      return _this9.dbRequest('get', [parentPath]);

                    case 6:
                      parentEntry = _context9.sent;
                      _context9.next = 9;
                      return _this9.dbRequest('get', [path]);

                    case 9:
                      occupiedEntry = _context9.sent;

                      if (!(depth === 1)) {
                        _context9.next = 12;
                        break;
                      }

                      throw Error('Cannot create Root directory');

                    case 12:
                      if (!(occupiedEntry !== undefined)) {
                        _context9.next = 14;
                        break;
                      }

                      throw Error('Current directory does already exist.');

                    case 14:
                      if (!(!doRecursive && depth !== 2 && parentEntry === undefined)) {
                        _context9.next = 16;
                        break;
                      }

                      throw Error('Parent directory must exist');

                    case 16:
                      if (!(doRecursive && depth !== 2 && parentEntry === undefined)) {
                        _context9.next = 20;
                        break;
                      }

                      parentArgPath = parentPath.substr(parentPath.indexOf('/', 1));
                      _context9.next = 20;
                      return _this9.mkdir({
                        path: parentArgPath,
                        directory: options.directory,
                        recursive: doRecursive
                      });

                    case 20:
                      now = Date.now();
                      pathObj = {
                        path: path,
                        folder: parentPath,
                        type: 'directory',
                        size: 0,
                        ctime: now,
                        mtime: now
                      };
                      _context9.next = 24;
                      return _this9.dbRequest('put', [pathObj]);

                    case 24:
                    case "end":
                      return _context9.stop();
                  }
                }
              }, _callee9);
            }))();
          }
          /**
           * Remove a directory
           * @param options the options for the directory remove
           */

        }, {
          key: "rmdir",
          value: function rmdir(options) {
            var _this10 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee10() {
              var path, directory, recursive, fullPath, entry, readDirResult, _iterator, _step, _entry, entryPath, entryObj;

              return regeneratorRuntime.wrap(function _callee10$(_context10) {
                while (1) {
                  switch (_context10.prev = _context10.next) {
                    case 0:
                      path = options.path, directory = options.directory, recursive = options.recursive;
                      fullPath = _this10.getPath(directory, path);
                      _context10.next = 4;
                      return _this10.dbRequest('get', [fullPath]);

                    case 4:
                      entry = _context10.sent;

                      if (!(entry === undefined)) {
                        _context10.next = 7;
                        break;
                      }

                      throw Error('Folder does not exist.');

                    case 7:
                      if (!(entry.type !== 'directory')) {
                        _context10.next = 9;
                        break;
                      }

                      throw Error('Requested path is not a directory');

                    case 9:
                      _context10.next = 11;
                      return _this10.readdir({
                        path: path,
                        directory: directory
                      });

                    case 11:
                      readDirResult = _context10.sent;

                      if (!(readDirResult.files.length !== 0 && !recursive)) {
                        _context10.next = 14;
                        break;
                      }

                      throw Error('Folder is not empty');

                    case 14:
                      _iterator = _createForOfIteratorHelper(readDirResult.files);
                      _context10.prev = 15;

                      _iterator.s();

                    case 17:
                      if ((_step = _iterator.n()).done) {
                        _context10.next = 32;
                        break;
                      }

                      _entry = _step.value;
                      entryPath = "".concat(path, "/").concat(_entry);
                      _context10.next = 22;
                      return _this10.stat({
                        path: entryPath,
                        directory: directory
                      });

                    case 22:
                      entryObj = _context10.sent;

                      if (!(entryObj.type === 'file')) {
                        _context10.next = 28;
                        break;
                      }

                      _context10.next = 26;
                      return _this10.deleteFile({
                        path: entryPath,
                        directory: directory
                      });

                    case 26:
                      _context10.next = 30;
                      break;

                    case 28:
                      _context10.next = 30;
                      return _this10.rmdir({
                        path: entryPath,
                        directory: directory,
                        recursive: recursive
                      });

                    case 30:
                      _context10.next = 17;
                      break;

                    case 32:
                      _context10.next = 37;
                      break;

                    case 34:
                      _context10.prev = 34;
                      _context10.t0 = _context10["catch"](15);

                      _iterator.e(_context10.t0);

                    case 37:
                      _context10.prev = 37;

                      _iterator.f();

                      return _context10.finish(37);

                    case 40:
                      _context10.next = 42;
                      return _this10.dbRequest('delete', [fullPath]);

                    case 42:
                    case "end":
                      return _context10.stop();
                  }
                }
              }, _callee10, null, [[15, 34, 37, 40]]);
            }))();
          }
          /**
           * Return a list of files from the directory (not recursive)
           * @param options the options for the readdir operation
           * @return a promise that resolves with the readdir directory listing result
           */

        }, {
          key: "readdir",
          value: function readdir(options) {
            var _this11 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee11() {
              var path, entry, entries, names;
              return regeneratorRuntime.wrap(function _callee11$(_context11) {
                while (1) {
                  switch (_context11.prev = _context11.next) {
                    case 0:
                      path = _this11.getPath(options.directory, options.path);
                      _context11.next = 3;
                      return _this11.dbRequest('get', [path]);

                    case 3:
                      entry = _context11.sent;

                      if (!(options.path !== '' && entry === undefined)) {
                        _context11.next = 6;
                        break;
                      }

                      throw Error('Folder does not exist.');

                    case 6:
                      _context11.next = 8;
                      return _this11.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)]);

                    case 8:
                      entries = _context11.sent;
                      names = entries.map(function (e) {
                        return e.substring(path.length + 1);
                      });
                      return _context11.abrupt("return", {
                        files: names
                      });

                    case 11:
                    case "end":
                      return _context11.stop();
                  }
                }
              }, _callee11);
            }))();
          }
          /**
           * Return full File URI for a path and directory
           * @param options the options for the stat operation
           * @return a promise that resolves with the file stat result
           */

        }, {
          key: "getUri",
          value: function getUri(options) {
            var _this12 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee12() {
              var path, entry;
              return regeneratorRuntime.wrap(function _callee12$(_context12) {
                while (1) {
                  switch (_context12.prev = _context12.next) {
                    case 0:
                      path = _this12.getPath(options.directory, options.path);
                      _context12.next = 3;
                      return _this12.dbRequest('get', [path]);

                    case 3:
                      entry = _context12.sent;

                      if (!(entry === undefined)) {
                        _context12.next = 8;
                        break;
                      }

                      _context12.next = 7;
                      return _this12.dbRequest('get', [path + '/']);

                    case 7:
                      entry = _context12.sent;

                    case 8:
                      return _context12.abrupt("return", {
                        uri: (entry === null || entry === void 0 ? void 0 : entry.path) || path
                      });

                    case 9:
                    case "end":
                      return _context12.stop();
                  }
                }
              }, _callee12);
            }))();
          }
          /**
           * Return data about a file
           * @param options the options for the stat operation
           * @return a promise that resolves with the file stat result
           */

        }, {
          key: "stat",
          value: function stat(options) {
            var _this13 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee13() {
              var path, entry;
              return regeneratorRuntime.wrap(function _callee13$(_context13) {
                while (1) {
                  switch (_context13.prev = _context13.next) {
                    case 0:
                      path = _this13.getPath(options.directory, options.path);
                      _context13.next = 3;
                      return _this13.dbRequest('get', [path]);

                    case 3:
                      entry = _context13.sent;

                      if (!(entry === undefined)) {
                        _context13.next = 8;
                        break;
                      }

                      _context13.next = 7;
                      return _this13.dbRequest('get', [path + '/']);

                    case 7:
                      entry = _context13.sent;

                    case 8:
                      if (!(entry === undefined)) {
                        _context13.next = 10;
                        break;
                      }

                      throw Error('Entry does not exist.');

                    case 10:
                      return _context13.abrupt("return", {
                        type: entry.type,
                        size: entry.size,
                        ctime: entry.ctime,
                        mtime: entry.mtime,
                        uri: entry.path
                      });

                    case 11:
                    case "end":
                      return _context13.stop();
                  }
                }
              }, _callee13);
            }))();
          }
          /**
           * Rename a file or directory
           * @param options the options for the rename operation
           * @return a promise that resolves with the rename result
           */

        }, {
          key: "rename",
          value: function rename(options) {
            var _this14 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee14() {
              return regeneratorRuntime.wrap(function _callee14$(_context14) {
                while (1) {
                  switch (_context14.prev = _context14.next) {
                    case 0:
                      return _context14.abrupt("return", _this14._copy(options, true));

                    case 1:
                    case "end":
                      return _context14.stop();
                  }
                }
              }, _callee14);
            }))();
          }
          /**
           * Copy a file or directory
           * @param options the options for the copy operation
           * @return a promise that resolves with the copy result
           */

        }, {
          key: "copy",
          value: function copy(options) {
            var _this15 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee15() {
              return regeneratorRuntime.wrap(function _callee15$(_context15) {
                while (1) {
                  switch (_context15.prev = _context15.next) {
                    case 0:
                      return _context15.abrupt("return", _this15._copy(options, false));

                    case 1:
                    case "end":
                      return _context15.stop();
                  }
                }
              }, _callee15);
            }))();
          }
        }, {
          key: "requestPermissions",
          value: function requestPermissions() {
            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee16() {
              return regeneratorRuntime.wrap(function _callee16$(_context16) {
                while (1) {
                  switch (_context16.prev = _context16.next) {
                    case 0:
                      return _context16.abrupt("return", {
                        publicStorage: 'granted'
                      });

                    case 1:
                    case "end":
                      return _context16.stop();
                  }
                }
              }, _callee16);
            }))();
          }
        }, {
          key: "checkPermissions",
          value: function checkPermissions() {
            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee17() {
              return regeneratorRuntime.wrap(function _callee17$(_context17) {
                while (1) {
                  switch (_context17.prev = _context17.next) {
                    case 0:
                      return _context17.abrupt("return", {
                        publicStorage: 'granted'
                      });

                    case 1:
                    case "end":
                      return _context17.stop();
                  }
                }
              }, _callee17);
            }))();
          }
          /**
           * Function that can perform a copy or a rename
           * @param options the options for the rename operation
           * @param doRename whether to perform a rename or copy operation
           * @return a promise that resolves with the result
           */

        }, {
          key: "_copy",
          value: function _copy(options) {
            var doRename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

            var _this16 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee19() {
              var toDirectory, to, from, fromDirectory, fromPath, toPath, toObj, toPathComponents, _toPath, toParentDirectory, fromObj, updateTime, ctime, file, contents, _iterator2, _step2, filename;

              return regeneratorRuntime.wrap(function _callee19$(_context19) {
                while (1) {
                  switch (_context19.prev = _context19.next) {
                    case 0:
                      toDirectory = options.toDirectory;
                      to = options.to, from = options.from, fromDirectory = options.directory;

                      if (!(!to || !from)) {
                        _context19.next = 4;
                        break;
                      }

                      throw Error('Both to and from must be provided');

                    case 4:
                      // If no "to" directory is provided, use the "from" directory
                      if (!toDirectory) {
                        toDirectory = fromDirectory;
                      }

                      fromPath = _this16.getPath(fromDirectory, from);
                      toPath = _this16.getPath(toDirectory, to); // Test that the "to" and "from" locations are different

                      if (!(fromPath === toPath)) {
                        _context19.next = 9;
                        break;
                      }

                      return _context19.abrupt("return");

                    case 9:
                      if (!isPathParent(fromPath, toPath)) {
                        _context19.next = 11;
                        break;
                      }

                      throw Error('To path cannot contain the from path');

                    case 11:
                      _context19.prev = 11;
                      _context19.next = 14;
                      return _this16.stat({
                        path: to,
                        directory: toDirectory
                      });

                    case 14:
                      toObj = _context19.sent;
                      _context19.next = 28;
                      break;

                    case 17:
                      _context19.prev = 17;
                      _context19.t0 = _context19["catch"](11);
                      // To location does not exist, ensure the directory containing "to" location exists and is a directory
                      toPathComponents = to.split('/');
                      toPathComponents.pop();
                      _toPath = toPathComponents.join('/'); // Check the containing directory of the "to" location exists

                      if (!(toPathComponents.length > 0)) {
                        _context19.next = 28;
                        break;
                      }

                      _context19.next = 25;
                      return _this16.stat({
                        path: _toPath,
                        directory: toDirectory
                      });

                    case 25:
                      toParentDirectory = _context19.sent;

                      if (!(toParentDirectory.type !== 'directory')) {
                        _context19.next = 28;
                        break;
                      }

                      throw new Error('Parent directory of the to path is a file');

                    case 28:
                      if (!(toObj && toObj.type === 'directory')) {
                        _context19.next = 30;
                        break;
                      }

                      throw new Error('Cannot overwrite a directory with a file');

                    case 30:
                      _context19.next = 32;
                      return _this16.stat({
                        path: from,
                        directory: fromDirectory
                      });

                    case 32:
                      fromObj = _context19.sent;

                      // Set the mtime/ctime of the supplied path
                      updateTime = /*#__PURE__*/function () {
                        var _ref = (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee18(path, ctime, mtime) {
                          var fullPath, entry;
                          return regeneratorRuntime.wrap(function _callee18$(_context18) {
                            while (1) {
                              switch (_context18.prev = _context18.next) {
                                case 0:
                                  fullPath = _this16.getPath(toDirectory, path);
                                  _context18.next = 3;
                                  return _this16.dbRequest('get', [fullPath]);

                                case 3:
                                  entry = _context18.sent;
                                  entry.ctime = ctime;
                                  entry.mtime = mtime;
                                  _context18.next = 8;
                                  return _this16.dbRequest('put', [entry]);

                                case 8:
                                case "end":
                                  return _context18.stop();
                              }
                            }
                          }, _callee18);
                        }));

                        return function updateTime(_x, _x2, _x3) {
                          return _ref.apply(this, arguments);
                        };
                      }();

                      ctime = fromObj.ctime ? fromObj.ctime : Date.now();
                      _context19.t1 = fromObj.type;
                      _context19.next = _context19.t1 === 'file' ? 38 : _context19.t1 === 'directory' ? 50 : 85;
                      break;

                    case 38:
                      _context19.next = 40;
                      return _this16.readFile({
                        path: from,
                        directory: fromDirectory
                      });

                    case 40:
                      file = _context19.sent;

                      if (!doRename) {
                        _context19.next = 44;
                        break;
                      }

                      _context19.next = 44;
                      return _this16.deleteFile({
                        path: from,
                        directory: fromDirectory
                      });

                    case 44:
                      _context19.next = 46;
                      return _this16.writeFile({
                        path: to,
                        directory: toDirectory,
                        data: file.data
                      });

                    case 46:
                      if (!doRename) {
                        _context19.next = 49;
                        break;
                      }

                      _context19.next = 49;
                      return updateTime(to, ctime, fromObj.mtime);

                    case 49:
                      return _context19.abrupt("return");

                    case 50:
                      if (!toObj) {
                        _context19.next = 52;
                        break;
                      }

                      throw Error('Cannot move a directory over an existing object');

                    case 52:
                      _context19.prev = 52;
                      _context19.next = 55;
                      return _this16.mkdir({
                        path: to,
                        directory: toDirectory,
                        recursive: false
                      });

                    case 55:
                      if (!doRename) {
                        _context19.next = 58;
                        break;
                      }

                      _context19.next = 58;
                      return updateTime(to, ctime, fromObj.mtime);

                    case 58:
                      _context19.next = 62;
                      break;

                    case 60:
                      _context19.prev = 60;
                      _context19.t2 = _context19["catch"](52);

                    case 62:
                      _context19.next = 64;
                      return _this16.readdir({
                        path: from,
                        directory: fromDirectory
                      });

                    case 64:
                      contents = _context19.sent.files;
                      _iterator2 = _createForOfIteratorHelper(contents);
                      _context19.prev = 66;

                      _iterator2.s();

                    case 68:
                      if ((_step2 = _iterator2.n()).done) {
                        _context19.next = 74;
                        break;
                      }

                      filename = _step2.value;
                      _context19.next = 72;
                      return _this16._copy({
                        from: "".concat(from, "/").concat(filename),
                        to: "".concat(to, "/").concat(filename),
                        directory: fromDirectory,
                        toDirectory: toDirectory
                      }, doRename);

                    case 72:
                      _context19.next = 68;
                      break;

                    case 74:
                      _context19.next = 79;
                      break;

                    case 76:
                      _context19.prev = 76;
                      _context19.t3 = _context19["catch"](66);

                      _iterator2.e(_context19.t3);

                    case 79:
                      _context19.prev = 79;

                      _iterator2.f();

                      return _context19.finish(79);

                    case 82:
                      if (!doRename) {
                        _context19.next = 85;
                        break;
                      }

                      _context19.next = 85;
                      return _this16.rmdir({
                        path: from,
                        directory: fromDirectory
                      });

                    case 85:
                    case "end":
                      return _context19.stop();
                  }
                }
              }, _callee19, null, [[11, 17], [52, 60], [66, 76, 79, 82]]);
            }))();
          }
        }], [{
          key: "doUpgrade",
          value: function doUpgrade(event) {
            var eventTarget = event.target;
            var db = eventTarget.result;

            switch (event.oldVersion) {
              case 0:
              case 1:
              default:
                {
                  if (db.objectStoreNames.contains('FileStorage')) {
                    db.deleteObjectStore('FileStorage');
                  }

                  var store = db.createObjectStore('FileStorage', {
                    keyPath: 'path'
                  });
                  store.createIndex('by_folder', 'folder');
                }
            }
          }
        }]);

        return _FilesystemWeb;
      }(_capacitor_core__WEBPACK_IMPORTED_MODULE_1__.WebPlugin);

      _FilesystemWeb._debug = true;
      /***/
    }
  }]);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBTU0sT0FBSSxDQUFDL0IsS0FBTCxDQUFXO0FBQ2I1Ryw0QkFBSSxFQUFFd0ksSUFETztBQUViMUUsaUNBQVMsRUFBRTJFO0FBRkUsdUJBQVgsQ0FBTjs7QUE1SHVCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBbUl0Qzs7O2lCQTNiZSxtQkFBQ1ksS0FBRCxFQUFRO0FBQ3BCLGdCQUFNQyxXQUFXLEdBQUdELEtBQUssQ0FBQ0UsTUFBMUI7QUFDQSxnQkFBTUMsRUFBRSxHQUFHRixXQUFXLENBQUMvRyxNQUF2Qjs7QUFDQSxvQkFBUThHLEtBQUssQ0FBQ0ksVUFBZDtBQUNJLG1CQUFLLENBQUw7QUFDQSxtQkFBSyxDQUFMO0FBQ0E7QUFBUztBQUNMLHNCQUFJRCxFQUFFLENBQUNFLGdCQUFIRixDQUFvQkcsUUFBcEJILENBQTZCLGFBQTdCQSxDQUFKLEVBQWlEO0FBQzdDQSxzQkFBRSxDQUFDSSxpQkFBSEosQ0FBcUIsYUFBckJBO0FBQ0g7O0FBQ0Qsc0JBQU1qRyxLQUFLLEdBQUdpRyxFQUFFLENBQUNLLGlCQUFITCxDQUFxQixhQUFyQkEsRUFBb0M7QUFBRU0sMkJBQU8sRUFBRTtBQUFYLG1CQUFwQ04sQ0FBZDtBQUNBakcsdUJBQUssQ0FBQ3dHLFdBQU54RyxDQUFrQixXQUFsQkEsRUFBK0IsUUFBL0JBO0FBQ0g7QUFUTDtBQVdIOzs7O1FBekM4QnlHOztBQXdkbkM3SSxvQkFBYSxDQUFDOEksTUFBZDlJLEdBQXVCLElBQXZCQTs7OyIsIm5hbWVzIjpbInJlc29sdmUiLCJwYXRoIiwicG9zaXgiLCJzcGxpdCIsImZpbHRlciIsIml0ZW0iLCJuZXdQb3NpeCIsImZvckVhY2giLCJsZW5ndGgiLCJwb3AiLCJwdXNoIiwiam9pbiIsImlzUGF0aFBhcmVudCIsInBhcmVudCIsImNoaWxkcmVuIiwicGF0aHNBIiwicGF0aHNCIiwiZXZlcnkiLCJ2YWx1ZSIsImluZGV4IiwiRmlsZXN5c3RlbVdlYiIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiREJfVkVSU0lPTiIsIkRCX05BTUUiLCJfd3JpdGVDbWRzIiwiaW5pdERiIiwiX3RoaXMiLCJfZGIiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJ1bmF2YWlsYWJsZSIsIlByb21pc2UiLCJyZWplY3QiLCJyZXF1ZXN0IiwiaW5kZXhlZERCIiwib3BlbiIsIm9udXBncmFkZW5lZWRlZCIsImRvVXBncmFkZSIsIm9uc3VjY2VzcyIsInJlc3VsdCIsIm9uZXJyb3IiLCJlcnJvciIsIm9uYmxvY2tlZCIsImNvbnNvbGUiLCJ3YXJuIiwiZGJSZXF1ZXN0IiwiY21kIiwiYXJncyIsInJlYWRGbGFnIiwiX3RoaXMyIiwiaW5kZXhPZiIsInRoZW4iLCJjb25uIiwidHgiLCJ0cmFuc2FjdGlvbiIsInN0b3JlIiwib2JqZWN0U3RvcmUiLCJyZXEiLCJkYkluZGV4UmVxdWVzdCIsImluZGV4TmFtZSIsIl90aGlzMyIsImdldFBhdGgiLCJkaXJlY3RvcnkiLCJ1cmlQYXRoIiwiY2xlYW5lZFVyaVBhdGgiLCJyZXBsYWNlIiwiZnNQYXRoIiwiY2xlYXIiLCJfdGhpczQiLCJyZWFkRmlsZSIsIm9wdGlvbnMiLCJfdGhpczUiLCJlbnRyeSIsIkVycm9yIiwiZGF0YSIsImNvbnRlbnQiLCJ3cml0ZUZpbGUiLCJfdGhpczYiLCJkb1JlY3Vyc2l2ZSIsInJlY3Vyc2l2ZSIsIm9jY3VwaWVkRW50cnkiLCJ0eXBlIiwiZW5jb2RpbmciLCJwYXJlbnRQYXRoIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJwYXJlbnRFbnRyeSIsInN1YkRpckluZGV4IiwicGFyZW50QXJnUGF0aCIsIm1rZGlyIiwibm93IiwiRGF0ZSIsInBhdGhPYmoiLCJmb2xkZXIiLCJzaXplIiwiY3RpbWUiLCJtdGltZSIsInVyaSIsImFwcGVuZEZpbGUiLCJfdGhpczciLCJkZWxldGVGaWxlIiwiX3RoaXM4IiwiSURCS2V5UmFuZ2UiLCJvbmx5IiwiZW50cmllcyIsIl90aGlzOSIsImRlcHRoIiwibWF0Y2giLCJybWRpciIsImZ1bGxQYXRoIiwiX3RoaXMxMCIsInJlYWRkaXIiLCJyZWFkRGlyUmVzdWx0IiwiZmlsZXMiLCJlbnRyeVBhdGgiLCJzdGF0IiwiZW50cnlPYmoiLCJfdGhpczExIiwibmFtZXMiLCJtYXAiLCJlIiwic3Vic3RyaW5nIiwiZ2V0VXJpIiwiX3RoaXMxMiIsIl90aGlzMTMiLCJyZW5hbWUiLCJfdGhpczE0IiwiX2NvcHkiLCJjb3B5IiwiX3RoaXMxNSIsInJlcXVlc3RQZXJtaXNzaW9ucyIsInB1YmxpY1N0b3JhZ2UiLCJjaGVja1Blcm1pc3Npb25zIiwiZG9SZW5hbWUiLCJ0b0RpcmVjdG9yeSIsInRvIiwiZnJvbSIsImZyb21EaXJlY3RvcnkiLCJmcm9tUGF0aCIsIl90aGlzMTYiLCJ0b1BhdGgiLCJ0b09iaiIsInRvUGF0aENvbXBvbmVudHMiLCJ0b1BhcmVudERpcmVjdG9yeSIsImZyb21PYmoiLCJ1cGRhdGVUaW1lIiwiZmlsZSIsImNvbnRlbnRzIiwiZmlsZW5hbWUiLCJldmVudCIsImV2ZW50VGFyZ2V0IiwidGFyZ2V0IiwiZGIiLCJvbGRWZXJzaW9uIiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwiZGVsZXRlT2JqZWN0U3RvcmUiLCJjcmVhdGVPYmplY3RTdG9yZSIsImtleVBhdGgiLCJjcmVhdGVJbmRleCIsIldlYlBsdWdpbiIsIl9kZWJ1ZyJdLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0BjYXBhY2l0b3IvZmlsZXN5c3RlbS9kaXN0L2VzbS93ZWIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV2ViUGx1Z2luIH0gZnJvbSAnQGNhcGFjaXRvci9jb3JlJztcbmZ1bmN0aW9uIHJlc29sdmUocGF0aCkge1xuICAgIGNvbnN0IHBvc2l4ID0gcGF0aC5zcGxpdCgnLycpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09ICcuJyk7XG4gICAgY29uc3QgbmV3UG9zaXggPSBbXTtcbiAgICBwb3NpeC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbSA9PT0gJy4uJyAmJlxuICAgICAgICAgICAgbmV3UG9zaXgubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgbmV3UG9zaXhbbmV3UG9zaXgubGVuZ3RoIC0gMV0gIT09ICcuLicpIHtcbiAgICAgICAgICAgIG5ld1Bvc2l4LnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV3UG9zaXgucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBuZXdQb3NpeC5qb2luKCcvJyk7XG59XG5mdW5jdGlvbiBpc1BhdGhQYXJlbnQocGFyZW50LCBjaGlsZHJlbikge1xuICAgIHBhcmVudCA9IHJlc29sdmUocGFyZW50KTtcbiAgICBjaGlsZHJlbiA9IHJlc29sdmUoY2hpbGRyZW4pO1xuICAgIGNvbnN0IHBhdGhzQSA9IHBhcmVudC5zcGxpdCgnLycpO1xuICAgIGNvbnN0IHBhdGhzQiA9IGNoaWxkcmVuLnNwbGl0KCcvJyk7XG4gICAgcmV0dXJuIChwYXJlbnQgIT09IGNoaWxkcmVuICYmXG4gICAgICAgIHBhdGhzQS5ldmVyeSgodmFsdWUsIGluZGV4KSA9PiB2YWx1ZSA9PT0gcGF0aHNCW2luZGV4XSkpO1xufVxuZXhwb3J0IGNsYXNzIEZpbGVzeXN0ZW1XZWIgZXh0ZW5kcyBXZWJQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLkRCX1ZFUlNJT04gPSAxO1xuICAgICAgICB0aGlzLkRCX05BTUUgPSAnRGlzYyc7XG4gICAgICAgIHRoaXMuX3dyaXRlQ21kcyA9IFsnYWRkJywgJ3B1dCcsICdkZWxldGUnXTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdERiKCkge1xuICAgICAgICBpZiAodGhpcy5fZGIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RiO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKCdpbmRleGVkREInIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMudW5hdmFpbGFibGUoXCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEluZGV4ZWREQlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKHRoaXMuREJfTkFNRSwgdGhpcy5EQl9WRVJTSU9OKTtcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gRmlsZXN5c3RlbVdlYi5kb1VwZ3JhZGU7XG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kYiA9IHJlcXVlc3QucmVzdWx0O1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignZGIgYmxvY2tlZCcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBkb1VwZ3JhZGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZXZlbnRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IGRiID0gZXZlbnRUYXJnZXQucmVzdWx0O1xuICAgICAgICBzd2l0Y2ggKGV2ZW50Lm9sZFZlcnNpb24pIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnRmlsZVN0b3JhZ2UnKSkge1xuICAgICAgICAgICAgICAgICAgICBkYi5kZWxldGVPYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnLCB7IGtleVBhdGg6ICdwYXRoJyB9KTtcbiAgICAgICAgICAgICAgICBzdG9yZS5jcmVhdGVJbmRleCgnYnlfZm9sZGVyJywgJ2ZvbGRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGRiUmVxdWVzdChjbWQsIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgcmVhZEZsYWcgPSB0aGlzLl93cml0ZUNtZHMuaW5kZXhPZihjbWQpICE9PSAtMSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5JztcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdERiKCkudGhlbigoY29ubikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eCA9IGNvbm4udHJhbnNhY3Rpb24oWydGaWxlU3RvcmFnZSddLCByZWFkRmxhZyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXEgPSBzdG9yZVtjbWRdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKHJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGRiSW5kZXhSZXF1ZXN0KGluZGV4TmFtZSwgY21kLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJlYWRGbGFnID0gdGhpcy5fd3JpdGVDbWRzLmluZGV4T2YoY21kKSAhPT0gLTEgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seSc7XG4gICAgICAgIHJldHVybiB0aGlzLmluaXREYigpLnRoZW4oKGNvbm4pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHggPSBjb25uLnRyYW5zYWN0aW9uKFsnRmlsZVN0b3JhZ2UnXSwgcmVhZEZsYWcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ0ZpbGVTdG9yYWdlJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzdG9yZS5pbmRleChpbmRleE5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcSA9IGluZGV4W2NtZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0UGF0aChkaXJlY3RvcnksIHVyaVBhdGgpIHtcbiAgICAgICAgY29uc3QgY2xlYW5lZFVyaVBhdGggPSB1cmlQYXRoICE9PSB1bmRlZmluZWQgPyB1cmlQYXRoLnJlcGxhY2UoL15bL10rfFsvXSskL2csICcnKSA6ICcnO1xuICAgICAgICBsZXQgZnNQYXRoID0gJyc7XG4gICAgICAgIGlmIChkaXJlY3RvcnkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGZzUGF0aCArPSAnLycgKyBkaXJlY3Rvcnk7XG4gICAgICAgIGlmICh1cmlQYXRoICE9PSAnJylcbiAgICAgICAgICAgIGZzUGF0aCArPSAnLycgKyBjbGVhbmVkVXJpUGF0aDtcbiAgICAgICAgcmV0dXJuIGZzUGF0aDtcbiAgICB9XG4gICAgYXN5bmMgY2xlYXIoKSB7XG4gICAgICAgIGNvbnN0IGNvbm4gPSBhd2FpdCB0aGlzLmluaXREYigpO1xuICAgICAgICBjb25zdCB0eCA9IGNvbm4udHJhbnNhY3Rpb24oWydGaWxlU3RvcmFnZSddLCAncmVhZHdyaXRlJyk7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ0ZpbGVTdG9yYWdlJyk7XG4gICAgICAgIHN0b3JlLmNsZWFyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWQgYSBmaWxlIGZyb20gZGlza1xuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBmaWxlIHJlYWRcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlYWQgZmlsZSBkYXRhIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHJlYWRGaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgLy8gY29uc3QgZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZpbGUgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICAgIHJldHVybiB7IGRhdGE6IGVudHJ5LmNvbnRlbnQgPyBlbnRyeS5jb250ZW50IDogJycgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGUgYSBmaWxlIHRvIGRpc2sgaW4gdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvbiBkZXZpY2VcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgZmlsZSB3cml0ZVxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSB3cml0ZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyB3cml0ZUZpbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBjb25zdCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICBjb25zdCBkb1JlY3Vyc2l2ZSA9IG9wdGlvbnMucmVjdXJzaXZlO1xuICAgICAgICBjb25zdCBvY2N1cGllZEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGF0aF0pKTtcbiAgICAgICAgaWYgKG9jY3VwaWVkRW50cnkgJiYgb2NjdXBpZWRFbnRyeS50eXBlID09PSAnZGlyZWN0b3J5JylcbiAgICAgICAgICAgIHRocm93ICdUaGUgc3VwcGxpZWQgcGF0aCBpcyBhIGRpcmVjdG9yeS4nO1xuICAgICAgICBjb25zdCBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICBjb25zdCBwYXJlbnRFbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhcmVudFBhdGhdKSk7XG4gICAgICAgIGlmIChwYXJlbnRFbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdWJEaXJJbmRleCA9IHBhcmVudFBhdGguaW5kZXhPZignLycsIDEpO1xuICAgICAgICAgICAgaWYgKHN1YkRpckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudEFyZ1BhdGggPSBwYXJlbnRQYXRoLnN1YnN0cihzdWJEaXJJbmRleCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ta2Rpcih7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhcmVudEFyZ1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogb3B0aW9ucy5kaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZTogZG9SZWN1cnNpdmUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcGF0aE9iaiA9IHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICBmb2xkZXI6IHBhcmVudFBhdGgsXG4gICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICBzaXplOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgICAgIGN0aW1lOiBub3csXG4gICAgICAgICAgICBtdGltZTogbm93LFxuICAgICAgICAgICAgY29udGVudDogIWVuY29kaW5nICYmIGRhdGEuaW5kZXhPZignLCcpID49IDAgPyBkYXRhLnNwbGl0KCcsJylbMV0gOiBkYXRhLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLmRiUmVxdWVzdCgncHV0JywgW3BhdGhPYmpdKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVyaTogcGF0aE9iai5wYXRoLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgdG8gYSBmaWxlIG9uIGRpc2sgaW4gdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvbiBkZXZpY2VcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgZmlsZSBhcHBlbmRcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZpbGUgd3JpdGUgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgYXBwZW5kRmlsZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICAvLyBjb25zdCBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBsZXQgY3RpbWUgPSBub3c7XG4gICAgICAgIGNvbnN0IG9jY3VwaWVkRW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAob2NjdXBpZWRFbnRyeSAmJiBvY2N1cGllZEVudHJ5LnR5cGUgPT09ICdkaXJlY3RvcnknKVxuICAgICAgICAgICAgdGhyb3cgJ1RoZSBzdXBwbGllZCBwYXRoIGlzIGEgZGlyZWN0b3J5Lic7XG4gICAgICAgIGNvbnN0IHBhcmVudEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGFyZW50UGF0aF0pKTtcbiAgICAgICAgaWYgKHBhcmVudEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YkRpckluZGV4ID0gcGFyZW50UGF0aC5pbmRleE9mKCcvJywgMSk7XG4gICAgICAgICAgICBpZiAoc3ViRGlySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50QXJnUGF0aCA9IHBhcmVudFBhdGguc3Vic3RyKHN1YkRpckluZGV4KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGFyZW50QXJnUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBvcHRpb25zLmRpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvY2N1cGllZEVudHJ5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRhdGEgPSBvY2N1cGllZEVudHJ5LmNvbnRlbnQgKyBkYXRhO1xuICAgICAgICAgICAgY3RpbWUgPSBvY2N1cGllZEVudHJ5LmN0aW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGhPYmogPSB7XG4gICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgZm9sZGVyOiBwYXJlbnRQYXRoLFxuICAgICAgICAgICAgdHlwZTogJ2ZpbGUnLFxuICAgICAgICAgICAgc2l6ZTogZGF0YS5sZW5ndGgsXG4gICAgICAgICAgICBjdGltZTogY3RpbWUsXG4gICAgICAgICAgICBtdGltZTogbm93LFxuICAgICAgICAgICAgY29udGVudDogZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ3B1dCcsIFtwYXRoT2JqXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIGZpbGUgZnJvbSBkaXNrXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIGZpbGUgZGVsZXRlXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBkZWxldGVkIGZpbGUgZGF0YSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGVGaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdGaWxlIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgdGhpcy5kYkluZGV4UmVxdWVzdCgnYnlfZm9sZGVyJywgJ2dldEFsbEtleXMnLCBbXG4gICAgICAgICAgICBJREJLZXlSYW5nZS5vbmx5KHBhdGgpLFxuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoICE9PSAwKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBpcyBub3QgZW1wdHkuJyk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdkZWxldGUnLCBbcGF0aF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkaXJlY3RvcnkuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIG1rZGlyXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBta2RpciByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBta2RpcihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGNvbnN0IGRvUmVjdXJzaXZlID0gb3B0aW9ucy5yZWN1cnNpdmU7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICBjb25zdCBkZXB0aCA9IChwYXRoLm1hdGNoKC9cXC8vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcGFyZW50RW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXJlbnRQYXRoXSkpO1xuICAgICAgICBjb25zdCBvY2N1cGllZEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGF0aF0pKTtcbiAgICAgICAgaWYgKGRlcHRoID09PSAxKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0Nhbm5vdCBjcmVhdGUgUm9vdCBkaXJlY3RvcnknKTtcbiAgICAgICAgaWYgKG9jY3VwaWVkRW50cnkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdDdXJyZW50IGRpcmVjdG9yeSBkb2VzIGFscmVhZHkgZXhpc3QuJyk7XG4gICAgICAgIGlmICghZG9SZWN1cnNpdmUgJiYgZGVwdGggIT09IDIgJiYgcGFyZW50RW50cnkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdQYXJlbnQgZGlyZWN0b3J5IG11c3QgZXhpc3QnKTtcbiAgICAgICAgaWYgKGRvUmVjdXJzaXZlICYmIGRlcHRoICE9PSAyICYmIHBhcmVudEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudEFyZ1BhdGggPSBwYXJlbnRQYXRoLnN1YnN0cihwYXJlbnRQYXRoLmluZGV4T2YoJy8nLCAxKSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXJlbnRBcmdQYXRoLFxuICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogb3B0aW9ucy5kaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlOiBkb1JlY3Vyc2l2ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHBhdGhPYmogPSB7XG4gICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgZm9sZGVyOiBwYXJlbnRQYXRoLFxuICAgICAgICAgICAgdHlwZTogJ2RpcmVjdG9yeScsXG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICAgICAgY3RpbWU6IG5vdyxcbiAgICAgICAgICAgIG10aW1lOiBub3csXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdwdXQnLCBbcGF0aE9ial0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBkaXJlY3RvcnlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIGRpcmVjdG9yeSByZW1vdmVcbiAgICAgKi9cbiAgICBhc3luYyBybWRpcihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgcGF0aCwgZGlyZWN0b3J5LCByZWN1cnNpdmUgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gdGhpcy5nZXRQYXRoKGRpcmVjdG9yeSwgcGF0aCk7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbZnVsbFBhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgIT09ICdkaXJlY3RvcnknKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1JlcXVlc3RlZCBwYXRoIGlzIG5vdCBhIGRpcmVjdG9yeScpO1xuICAgICAgICBjb25zdCByZWFkRGlyUmVzdWx0ID0gYXdhaXQgdGhpcy5yZWFkZGlyKHsgcGF0aCwgZGlyZWN0b3J5IH0pO1xuICAgICAgICBpZiAocmVhZERpclJlc3VsdC5maWxlcy5sZW5ndGggIT09IDAgJiYgIXJlY3Vyc2l2ZSlcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdGb2xkZXIgaXMgbm90IGVtcHR5Jyk7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgcmVhZERpclJlc3VsdC5maWxlcykge1xuICAgICAgICAgICAgY29uc3QgZW50cnlQYXRoID0gYCR7cGF0aH0vJHtlbnRyeX1gO1xuICAgICAgICAgICAgY29uc3QgZW50cnlPYmogPSBhd2FpdCB0aGlzLnN0YXQoeyBwYXRoOiBlbnRyeVBhdGgsIGRpcmVjdG9yeSB9KTtcbiAgICAgICAgICAgIGlmIChlbnRyeU9iai50eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZpbGUoeyBwYXRoOiBlbnRyeVBhdGgsIGRpcmVjdG9yeSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucm1kaXIoeyBwYXRoOiBlbnRyeVBhdGgsIGRpcmVjdG9yeSwgcmVjdXJzaXZlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdkZWxldGUnLCBbZnVsbFBhdGhdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgbGlzdCBvZiBmaWxlcyBmcm9tIHRoZSBkaXJlY3RvcnkgKG5vdCByZWN1cnNpdmUpXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSByZWFkZGlyIG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVhZGRpciBkaXJlY3RvcnkgbGlzdGluZyByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyByZWFkZGlyKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAob3B0aW9ucy5wYXRoICE9PSAnJyAmJiBlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IHRoaXMuZGJJbmRleFJlcXVlc3QoJ2J5X2ZvbGRlcicsICdnZXRBbGxLZXlzJywgW0lEQktleVJhbmdlLm9ubHkocGF0aCldKTtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBlbnRyaWVzLm1hcChlID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlLnN1YnN0cmluZyhwYXRoLmxlbmd0aCArIDEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgZmlsZXM6IG5hbWVzIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBmdWxsIEZpbGUgVVJJIGZvciBhIHBhdGggYW5kIGRpcmVjdG9yeVxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25zIGZvciB0aGUgc3RhdCBvcGVyYXRpb25cbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZpbGUgc3RhdCByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBnZXRVcmkob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBsZXQgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoICsgJy8nXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmk6IChlbnRyeSA9PT0gbnVsbCB8fCBlbnRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZW50cnkucGF0aCkgfHwgcGF0aCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGRhdGEgYWJvdXQgYSBmaWxlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSBzdGF0IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSBzdGF0IHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHN0YXQob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBsZXQgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoICsgJy8nXSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0VudHJ5IGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogZW50cnkudHlwZSxcbiAgICAgICAgICAgIHNpemU6IGVudHJ5LnNpemUsXG4gICAgICAgICAgICBjdGltZTogZW50cnkuY3RpbWUsXG4gICAgICAgICAgICBtdGltZTogZW50cnkubXRpbWUsXG4gICAgICAgICAgICB1cmk6IGVudHJ5LnBhdGgsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmFtZSBhIGZpbGUgb3IgZGlyZWN0b3J5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSByZW5hbWUgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZW5hbWUgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgcmVuYW1lKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvcHkob3B0aW9ucywgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvcHkgYSBmaWxlIG9yIGRpcmVjdG9yeVxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25zIGZvciB0aGUgY29weSBvcGVyYXRpb25cbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGNvcHkgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgY29weShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb3B5KG9wdGlvbnMsIGZhbHNlKTtcbiAgICB9XG4gICAgYXN5bmMgcmVxdWVzdFBlcm1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4geyBwdWJsaWNTdG9yYWdlOiAnZ3JhbnRlZCcgfTtcbiAgICB9XG4gICAgYXN5bmMgY2hlY2tQZXJtaXNzaW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHsgcHVibGljU3RvcmFnZTogJ2dyYW50ZWQnIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgY2FuIHBlcmZvcm0gYSBjb3B5IG9yIGEgcmVuYW1lXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSByZW5hbWUgb3BlcmF0aW9uXG4gICAgICogQHBhcmFtIGRvUmVuYW1lIHdoZXRoZXIgdG8gcGVyZm9ybSBhIHJlbmFtZSBvciBjb3B5IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgX2NvcHkob3B0aW9ucywgZG9SZW5hbWUgPSBmYWxzZSkge1xuICAgICAgICBsZXQgeyB0b0RpcmVjdG9yeSB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgeyB0bywgZnJvbSwgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5IH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAoIXRvIHx8ICFmcm9tKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignQm90aCB0byBhbmQgZnJvbSBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgbm8gXCJ0b1wiIGRpcmVjdG9yeSBpcyBwcm92aWRlZCwgdXNlIHRoZSBcImZyb21cIiBkaXJlY3RvcnlcbiAgICAgICAgaWYgKCF0b0RpcmVjdG9yeSkge1xuICAgICAgICAgICAgdG9EaXJlY3RvcnkgPSBmcm9tRGlyZWN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZyb21QYXRoID0gdGhpcy5nZXRQYXRoKGZyb21EaXJlY3RvcnksIGZyb20pO1xuICAgICAgICBjb25zdCB0b1BhdGggPSB0aGlzLmdldFBhdGgodG9EaXJlY3RvcnksIHRvKTtcbiAgICAgICAgLy8gVGVzdCB0aGF0IHRoZSBcInRvXCIgYW5kIFwiZnJvbVwiIGxvY2F0aW9ucyBhcmUgZGlmZmVyZW50XG4gICAgICAgIGlmIChmcm9tUGF0aCA9PT0gdG9QYXRoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUGF0aFBhcmVudChmcm9tUGF0aCwgdG9QYXRoKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1RvIHBhdGggY2Fubm90IGNvbnRhaW4gdGhlIGZyb20gcGF0aCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIHRoZSBzdGF0ZSBvZiB0aGUgXCJ0b1wiIGxvY2F0aW9uXG4gICAgICAgIGxldCB0b09iajtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRvT2JqID0gYXdhaXQgdGhpcy5zdGF0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiB0byxcbiAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIFRvIGxvY2F0aW9uIGRvZXMgbm90IGV4aXN0LCBlbnN1cmUgdGhlIGRpcmVjdG9yeSBjb250YWluaW5nIFwidG9cIiBsb2NhdGlvbiBleGlzdHMgYW5kIGlzIGEgZGlyZWN0b3J5XG4gICAgICAgICAgICBjb25zdCB0b1BhdGhDb21wb25lbnRzID0gdG8uc3BsaXQoJy8nKTtcbiAgICAgICAgICAgIHRvUGF0aENvbXBvbmVudHMucG9wKCk7XG4gICAgICAgICAgICBjb25zdCB0b1BhdGggPSB0b1BhdGhDb21wb25lbnRzLmpvaW4oJy8nKTtcbiAgICAgICAgICAgIC8vIENoZWNrIHRoZSBjb250YWluaW5nIGRpcmVjdG9yeSBvZiB0aGUgXCJ0b1wiIGxvY2F0aW9uIGV4aXN0c1xuICAgICAgICAgICAgaWYgKHRvUGF0aENvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvUGFyZW50RGlyZWN0b3J5ID0gYXdhaXQgdGhpcy5zdGF0KHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogdG9QYXRoLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0b1BhcmVudERpcmVjdG9yeS50eXBlICE9PSAnZGlyZWN0b3J5Jykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcmVudCBkaXJlY3Rvcnkgb2YgdGhlIHRvIHBhdGggaXMgYSBmaWxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENhbm5vdCBvdmVyd3JpdGUgYSBkaXJlY3RvcnlcbiAgICAgICAgaWYgKHRvT2JqICYmIHRvT2JqLnR5cGUgPT09ICdkaXJlY3RvcnknKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBvdmVyd3JpdGUgYSBkaXJlY3Rvcnkgd2l0aCBhIGZpbGUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbnN1cmUgdGhlIFwiZnJvbVwiIG9iamVjdCBleGlzdHNcbiAgICAgICAgY29uc3QgZnJvbU9iaiA9IGF3YWl0IHRoaXMuc3RhdCh7XG4gICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU2V0IHRoZSBtdGltZS9jdGltZSBvZiB0aGUgc3VwcGxpZWQgcGF0aFxuICAgICAgICBjb25zdCB1cGRhdGVUaW1lID0gYXN5bmMgKHBhdGgsIGN0aW1lLCBtdGltZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZnVsbFBhdGggPSB0aGlzLmdldFBhdGgodG9EaXJlY3RvcnksIHBhdGgpO1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtmdWxsUGF0aF0pKTtcbiAgICAgICAgICAgIGVudHJ5LmN0aW1lID0gY3RpbWU7XG4gICAgICAgICAgICBlbnRyeS5tdGltZSA9IG10aW1lO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ3B1dCcsIFtlbnRyeV0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjdGltZSA9IGZyb21PYmouY3RpbWUgPyBmcm9tT2JqLmN0aW1lIDogRGF0ZS5ub3coKTtcbiAgICAgICAgc3dpdGNoIChmcm9tT2JqLnR5cGUpIHtcbiAgICAgICAgICAgIC8vIFRoZSBcImZyb21cIiBvYmplY3QgaXMgYSBmaWxlXG4gICAgICAgICAgICBjYXNlICdmaWxlJzoge1xuICAgICAgICAgICAgICAgIC8vIFJlYWQgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5yZWFkRmlsZSh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGZyb20sXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogZnJvbURpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPcHRpb25hbGx5IHJlbW92ZSB0aGUgZmlsZVxuICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZpbGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogZnJvbURpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBmaWxlIHRvIHRoZSBuZXcgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlRmlsZSh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHRvLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBmaWxlLmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgbXRpbWUvY3RpbWUgb2YgYSByZW5hbWVkIGZpbGVcbiAgICAgICAgICAgICAgICBpZiAoZG9SZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlVGltZSh0bywgY3RpbWUsIGZyb21PYmoubXRpbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHByb21pc2VcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdkaXJlY3RvcnknOiB7XG4gICAgICAgICAgICAgICAgaWYgKHRvT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdDYW5ub3QgbW92ZSBhIGRpcmVjdG9yeSBvdmVyIGFuIGV4aXN0aW5nIG9iamVjdCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHRvIGRpcmVjdG9yeVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiB0b0RpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBtdGltZS9jdGltZSBvZiBhIHJlbmFtZWQgZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlVGltZSh0bywgY3RpbWUsIGZyb21PYmoubXRpbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGNvbnRlbnRzIG9mIHRoZSBmcm9tIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudHMgPSAoYXdhaXQgdGhpcy5yZWFkZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgIH0pKS5maWxlcztcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGVuYW1lIG9mIGNvbnRlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgaXRlbSBmcm9tIHRoZSBmcm9tIGRpcmVjdG9yeSB0byB0aGUgdG8gZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NvcHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogYCR7ZnJvbX0vJHtmaWxlbmFtZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IGAke3RvfS8ke2ZpbGVuYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0RpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgfSwgZG9SZW5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPcHRpb25hbGx5IHJlbW92ZSB0aGUgb3JpZ2luYWwgZnJvbSBkaXJlY3RvcnlcbiAgICAgICAgICAgICAgICBpZiAoZG9SZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ybWRpcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5GaWxlc3lzdGVtV2ViLl9kZWJ1ZyA9IHRydWU7XG4iXX0=