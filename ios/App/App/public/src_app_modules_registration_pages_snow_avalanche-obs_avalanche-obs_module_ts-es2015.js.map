{"version":3,"file":"src_app_modules_registration_pages_snow_avalanche-obs_avalanche-obs_module_ts-es2015.js","mappings":"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","sources":["./src/app/modules/registration/pages/snow/avalanche-obs/avalanche-obs.module.ts","./src/app/modules/registration/pages/snow/avalanche-obs/avalanche-obs.page.ts","./src/app/modules/registration/pages/snow/avalanche-obs/avalanche-obs.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AvalancheObsPage } from './avalanche-obs.page';\r\nimport { SharedComponentsModule } from '../../../shared-components.module';\r\nimport { CanDeactivateRouteGuard } from '../../can-deactivate-route.guard';\r\nimport { AddWebUrlModalPageModule } from '../../add-web-url-modal/add-web-url-modal.module';\r\nimport { SetAvalanchePositionPageModule } from '../../set-avalanche-position/set-avalanche-position.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AvalancheObsPage,\r\n    canDeactivate: [CanDeactivateRouteGuard]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedComponentsModule,\r\n    AddWebUrlModalPageModule,\r\n    SetAvalanchePositionPageModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [AvalancheObsPage]\r\n})\r\nexport class AvalancheObsPageModule {}\r\n","import { Component } from '@angular/core';\r\nimport { BasePage } from '../../base.page';\r\nimport { BasePageService } from '../../base-page-service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport * as L from 'leaflet';\r\nimport { SetAvalanchePositionPage } from '../../set-avalanche-position/set-avalanche-position.page';\r\nimport moment from 'moment';\r\nimport { SelectOption } from '../../../../shared/components/input/select/select-option.model';\r\nimport { take } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-avalanche-obs',\r\n  templateUrl: './avalanche-obs.page.html',\r\n  styleUrls: ['./avalanche-obs.page.scss']\r\n})\r\nexport class AvalancheObsPage extends BasePage {\r\n  expoArray: SelectOption[] = [\r\n    {\r\n      text: 'DIRECTION.N',\r\n      id: '10000000'\r\n    },\r\n    {\r\n      text: 'DIRECTION.NE',\r\n      id: '01000000'\r\n    },\r\n    {\r\n      text: 'DIRECTION.E',\r\n      id: '00100000'\r\n    },\r\n    {\r\n      text: 'DIRECTION.SE',\r\n      id: '00010000'\r\n    },\r\n    {\r\n      text: 'DIRECTION.S',\r\n      id: '00001000'\r\n    },\r\n    {\r\n      text: 'DIRECTION.SW',\r\n      id: '00000100'\r\n    },\r\n    {\r\n      text: 'DIRECTION.W',\r\n      id: '00000010'\r\n    },\r\n    {\r\n      text: 'DIRECTION.NW',\r\n      id: '00000001'\r\n    }\r\n  ];\r\n\r\n  showWarning = false;\r\n  maxDate: string;\r\n\r\n  get dateIsDifferentThanObsTime() {\r\n    return (\r\n      this.registration.request.AvalancheObs.DtAvalancheTime &&\r\n      !moment(this.registration.request.AvalancheObs.DtAvalancheTime)\r\n        .startOf('day')\r\n        .isSame(moment(this.registration.request.DtObsTime).startOf('day'))\r\n    );\r\n  }\r\n\r\n  constructor(\r\n    basePageService: BasePageService,\r\n    activatedRoute: ActivatedRoute,\r\n    private modalController: ModalController\r\n  ) {\r\n    super(RegistrationTid.AvalancheObs, basePageService, activatedRoute);\r\n  }\r\n\r\n  onInit() {\r\n    if (!this.registration.request.Incident) {\r\n      this.registration.request.Incident = {};\r\n    }\r\n    this.maxDate = this.getMaxDateForNow();\r\n  }\r\n\r\n  getMaxDateForNow() {\r\n    // There is an issue when setting max date that when changing hour, the minutes is still max minutes.\r\n    // Workaround is to set minutes to 59.\r\n    return moment().minutes(59).toISOString(true);\r\n  }\r\n\r\n  async onReset() {\r\n    this.showWarning = false;\r\n    // Also reset Incident when Avalanche obs is reset.\r\n    await this.basePageService.reset(\r\n      this.registration,\r\n      RegistrationTid.Incident\r\n    );\r\n  }\r\n\r\n  isValid() {\r\n    this.showWarning = true;\r\n    return !!this.registration.request.AvalancheObs.DtAvalancheTime;\r\n  }\r\n\r\n  async isEmpty(): Promise<boolean> {\r\n    const isEmpty = !await this.basePageService.CommonRegistrationService.hasAnyDataToShowInRegistrationTypes(\r\n      this.registration,\r\n      this.registrationTid\r\n    ).pipe(take(1)).toPromise();\r\n    const isIncidentEmpty = !await this.basePageService.CommonRegistrationService.hasAnyDataToShowInRegistrationTypes(\r\n        this.registration,\r\n        RegistrationTid.Incident\r\n      ).pipe(take(1)).toPromise();\r\n    return isEmpty && isIncidentEmpty;\r\n  }\r\n\r\n  setAvalancheTimeTimeToNow() {\r\n    this.registration.request.AvalancheObs.DtAvalancheTime = moment().toISOString(\r\n      true\r\n    );\r\n  }\r\n\r\n  async setAvalanchePosition() {\r\n    const relativeToLatLng = this.registration.request.ObsLocation\r\n      ? L.latLng(\r\n          this.registration.request.ObsLocation.Latitude,\r\n          this.registration.request.ObsLocation.Longitude\r\n        )\r\n      : null;\r\n    const startLatLng =\r\n      this.registration.request.AvalancheObs.StartLat &&\r\n      this.registration.request.AvalancheObs.StartLong\r\n        ? L.latLng(\r\n            this.registration.request.AvalancheObs.StartLat,\r\n            this.registration.request.AvalancheObs.StartLong\r\n          )\r\n        : null;\r\n    const endLatLng =\r\n      this.registration.request.AvalancheObs.StopLat &&\r\n      this.registration.request.AvalancheObs.StopLong\r\n        ? L.latLng(\r\n            this.registration.request.AvalancheObs.StopLat,\r\n            this.registration.request.AvalancheObs.StopLong\r\n          )\r\n        : null;\r\n    const modal = await this.modalController.create({\r\n      component: SetAvalanchePositionPage,\r\n      componentProps: {\r\n        relativeToLatLng,\r\n        startLatLng,\r\n        endLatLng,\r\n        geoHazard: this.registration.geoHazard\r\n      }\r\n    });\r\n    modal.present();\r\n    const result = await modal.onDidDismiss();\r\n    if (result.data) {\r\n      const start: L.LatLng = result.data.start;\r\n      const end: L.LatLng = result.data.end;\r\n      this.registration.request.AvalancheObs.StartLat = start.lat;\r\n      this.registration.request.AvalancheObs.StartLong = start.lng;\r\n      this.registration.request.AvalancheObs.StopLat = end.lat;\r\n      this.registration.request.AvalancheObs.StopLong = end.lng;\r\n    }\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\" defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{'REGISTRATION.SNOW.AVALANCHE_OBS.TITLE' | translate}}\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <app-registration-content-wrapper\r\n    *ngIf=\"registration && registration.request.AvalancheObs && registration.request.Incident\"\r\n    [registration]=\"registration\" [registrationTid]=\"registrationTid\" (reset)=\"reset()\">\r\n    <ion-list lines=\"full\">\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.SNOW.AVALANCHE_OBS.TITLE' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <ion-item [ngClass]=\"{'hasWarning': dateIsDifferentThanObsTime}\">\r\n        <ion-label [color]=\"(!registration.request.AvalancheObs.DtAvalancheTime && showWarning) ? 'danger' : 'medium'\"\r\n          position=\"stacked\" class=\"ion-text-uppercase\">{{\r\n          'REGISTRATION.SNOW.AVALANCHE_OBS.TIME' | translate }}</ion-label>\r\n        <ion-datetime color=\"medium\" monthShortNames=\"{{ 'MONTHS.SHORT_LIST' | translate }}\"\r\n          doneText=\"{{'DIALOGS.OK' | translate}}\" cancelText=\"{{'DIALOGS.CANCEL' | translate}}\"\r\n          display-format=\"D. MMM, YYYY HH:mm\" [(ngModel)]=\"registration.request.AvalancheObs.DtAvalancheTime\"\r\n          [max]=\"maxDate\">\r\n        </ion-datetime>\r\n        <ion-button class=\"set-to-now-button\" slot=\"end\" fill=\"outline\" color=\"medium\"\r\n          (click)=\"setAvalancheTimeTimeToNow()\">\r\n          <ion-icon slot=\"start\" name=\"time\"></ion-icon> {{\"REGISTRATION.SET_TIME.NOW\" | translate}}\r\n        </ion-button>\r\n      </ion-item>\r\n      <ion-item *ngIf=\"dateIsDifferentThanObsTime\">\r\n        <ion-label color=\"danger\" class=\"ion-text-wrap\">\r\n          {{'ALERT.WARNING' | translate}}! {{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.DATE_WARNING' | translate}}\r\n        </ion-label>\r\n      </ion-item>\r\n      <ion-item (click)=\"setAvalanchePosition()\">\r\n        <ion-label color=\"medium\" position=\"stacked\" class=\"ion-text-uppercase\">{{'REGISTRATION.SNOW.AVALANCHE_OBS.POSITION' |\r\n              translate}}</ion-label>\r\n        <ion-text color=\"medium\" class=\"ion-align-self-start ion-text-wrap\">\r\n          <ion-icon class=\"position-pin\" color=\"medium\" name=\"location\"></ion-icon>\r\n          <ng-container *ngIf=\"registration.request.AvalancheObs.StartLat else noPosition\">\r\n            {{\r\n                registration.request.AvalancheObs.StartLat |\r\n                number:'0.3'\r\n                }}&deg;{{'MAP_CENTER_INFO.NORTH_SHORT'|translate}},\r\n            {{ registration.request.AvalancheObs.StartLong | number:'0.3'\r\n                }}&deg;{{'MAP_CENTER_INFO.EAST_SHORT'|translate}} - {{ registration.request.AvalancheObs.StopLat |\r\n                number:'0.3'\r\n                }}&deg;{{'MAP_CENTER_INFO.NORTH_SHORT'|translate}},\r\n            {{ registration.request.AvalancheObs.StopLong | number:'0.3'\r\n                }}&deg;{{'MAP_CENTER_INFO.EAST_SHORT'|translate}}\r\n          </ng-container>\r\n        </ion-text>\r\n        <ion-icon slot=\"end\" class=\"item-detail-icon\" name=\"chevron-forward\">\r\n        </ion-icon>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label color=\"medium\" position=\"stacked\" class=\"ion-text-uppercase\">{{\r\n          'REGISTRATION.SNOW.AVALANCHE_OBS.VALID_EXPOSITION'\r\n          | translate}}</ion-label>\r\n        <app-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.VALID_EXPOSITION\"\r\n          [(selectedValue)]=\"registration.request.AvalancheObs.ValidExposition\" [options]=\"expoArray\"></app-select>\r\n      </ion-item>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.DESTRUCTIVE_SIZE\" kdvKey=\"Snow_DestructiveSizeKDV\"\r\n        [(value)]=\"registration.request.AvalancheObs.DestructiveSizeTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.AVALANCHE_TYPE\" kdvKey=\"Snow_AvalancheKDV\"\r\n        [(value)]=\"registration.request.AvalancheObs.AvalancheTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.AVALANCHE_TRIGGER\" kdvKey=\"Snow_AvalancheTriggerKDV\"\r\n        [(value)]=\"registration.request.AvalancheObs.AvalancheTriggerTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.TERRAIN_START_ZONE\" kdvKey=\"Snow_TerrainStartZoneKDV\"\r\n        [(value)]=\"registration.request.AvalancheObs.TerrainStartZoneTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.AVAL_CAUSE\" kdvKey=\"Snow_AvalCauseKDV\"\r\n        [(value)]=\"registration.request.AvalancheObs.AvalCauseTID\"></app-kdv-select>\r\n      <app-numeric-input [(value)]=\"registration.request.AvalancheObs.FractureHeight\"\r\n        title=\"REGISTRATION.SNOW.AVALANCHE_OBS.FRACTURE_HEIGTH\" [min]=\"0\" [max]=\"9999\" suffix=\"cm\" [decimalPlaces]=\"0\">\r\n      </app-numeric-input>\r\n      <app-numeric-input [(value)]=\"registration.request.AvalancheObs.FractureWidth\"\r\n        title=\"REGISTRATION.SNOW.AVALANCHE_OBS.FRACTURE_WIDTH\" [min]=\"0\" [max]=\"99999\" suffix=\"m\" [decimalPlaces]=\"0\">\r\n      </app-numeric-input>\r\n      <app-text-comment title=\"REGISTRATION.SNOW.AVALANCHE_OBS.TRAJECTORY_NAME\" [max]=\"100\" [rows]=\"2\"\r\n        [(value)]=\"registration.request.AvalancheObs.Trajectory\"></app-text-comment>\r\n      <app-text-comment title=\"REGISTRATION.DANGER_OBS.COMMENT\" [(value)]=\"registration.request.AvalancheObs.Comment\">\r\n      </app-text-comment>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.ADD_IMAGES' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-add-picture-item [geoHazard]=\"registration.geoHazard\" [registrationId]=\"registration.id\"\r\n        [registrationTid]=\"registrationTid\" [onBeforeAdd]=\"getSaveFunc()\">\r\n      </app-add-picture-item>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.SNOW.AVALANCHE_OBS.INCIDENT_DESCRIPTION' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-text-comment title=\"REGISTRATION.INCIDENT.COMMENT\" [(value)]=\"registration.request.Incident.IncidentText\">\r\n      </app-text-comment>\r\n      <app-kdv-select title=\"REGISTRATION.INCIDENT.ACTIVITY\" kdvKey=\"Snow_ActivityInfluencedKDV\"\r\n        [(value)]=\"registration.request.Incident.ActivityInfluencedTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.INCIDENT.DAMAGE_EXTENT\" kdvKey=\"DamageExtentKDV\"\r\n        [(value)]=\"registration.request.Incident.DamageExtentTID\"></app-kdv-select>\r\n      <ion-item-divider>\r\n        <ion-label class=\"ion-text-wrap\">\r\n          {{'REGISTRATION.SNOW.AVALANCHE_OBS.INCIDENT_PLACEHOLDER' | translate }}\r\n        </ion-label>\r\n      </ion-item-divider>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.ADD_WEB_URL.TITLE' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-add-web-url-item [(weburls)]=\"registration.request.Incident.IncidentURLs\"></app-add-web-url-item>\r\n    </ion-list>\r\n  </app-registration-content-wrapper>\r\n</ion-content>\r\n<ng-template #noPosition>\r\n  {{ 'REGISTRATION.SNOW.AVALANCHE_OBS.SET_AVALANCHE_POSITION' | translate }} {{\r\n        'REGISTRATION.DIRT.LAND_SLIDE_OBS.IN_MAP' | translate }}\r\n</ng-template>"],"names":[],"sourceRoot":"webpack:///"}