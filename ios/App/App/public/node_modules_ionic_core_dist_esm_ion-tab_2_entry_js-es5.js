(function () {
  "use strict";

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  (self["webpackChunkregobs4"] = self["webpackChunkregobs4"] || []).push([["node_modules_ionic_core_dist_esm_ion-tab_2_entry_js"], {
    /***/
    80298: function _(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
      __webpack_require__.r(__webpack_exports__);
      /* harmony export */


      __webpack_require__.d(__webpack_exports__, {
        /* harmony export */
        "ion_tab": function ion_tab() {
          return (
            /* binding */
            Tab
          );
        },

        /* harmony export */
        "ion_tabs": function ion_tabs() {
          return (
            /* binding */
            Tabs
          );
        }
        /* harmony export */

      });
      /* harmony import */


      var C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */
      80151);
      /* harmony import */


      var _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./index-7a8b7a1c.js */
      76842);
      /* harmony import */


      var _framework_delegate_4392cd63_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! ./framework-delegate-4392cd63.js */
      85356);
      /* harmony import */


      var _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! ./helpers-dd7e4b7b.js */
      40693);

      var tabCss = ":host(.tab-hidden){display:none !important}";

      var Tab = /*#__PURE__*/function () {
        function Tab(hostRef) {
          _classCallCheck(this, Tab);

          (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
          this.loaded = false;
          /** @internal */

          this.active = false;
        }

        _createClass(Tab, [{
          key: "componentWillLoad",
          value: function componentWillLoad() {
            var _this = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
              return regeneratorRuntime.wrap(function _callee$(_context) {
                while (1) {
                  switch (_context.prev = _context.next) {
                    case 0:
                      if (!_this.active) {
                        _context.next = 3;
                        break;
                      }

                      _context.next = 3;
                      return _this.setActive();

                    case 3:
                    case "end":
                      return _context.stop();
                  }
                }
              }, _callee);
            }))();
          }
          /** Set the active component for the tab */

        }, {
          key: "setActive",
          value: function setActive() {
            var _this2 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
              return regeneratorRuntime.wrap(function _callee2$(_context2) {
                while (1) {
                  switch (_context2.prev = _context2.next) {
                    case 0:
                      _context2.next = 2;
                      return _this2.prepareLazyLoaded();

                    case 2:
                      _this2.active = true;

                    case 3:
                    case "end":
                      return _context2.stop();
                  }
                }
              }, _callee2);
            }))();
          }
        }, {
          key: "changeActive",
          value: function changeActive(isActive) {
            if (isActive) {
              this.prepareLazyLoaded();
            }
          }
        }, {
          key: "prepareLazyLoaded",
          value: function prepareLazyLoaded() {
            if (!this.loaded && this.component != null) {
              this.loaded = true;

              try {
                return (0, _framework_delegate_4392cd63_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.delegate, this.el, this.component, ['ion-page']);
              } catch (e) {
                console.error(e);
              }
            }

            return Promise.resolve(undefined);
          }
        }, {
          key: "render",
          value: function render() {
            var tab = this.tab,
                active = this.active,
                component = this.component;
            return (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.H, {
              role: "tabpanel",
              "aria-hidden": !active ? 'true' : null,
              "aria-labelledby": "tab-button-".concat(tab),
              "class": {
                'ion-page': component === undefined,
                'tab-hidden': !active
              }
            }, (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", null));
          }
        }, {
          key: "el",
          get: function get() {
            return (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
          }
        }], [{
          key: "watchers",
          get: function get() {
            return {
              "active": ["changeActive"]
            };
          }
        }]);

        return Tab;
      }();

      Tab.style = tabCss;
      var tabsCss = ":host{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;contain:layout size style;z-index:0}.tabs-inner{position:relative;-ms-flex:1;flex:1;contain:layout size style}";

      var Tabs = /*#__PURE__*/function () {
        function Tabs(hostRef) {
          var _this8 = this;

          _classCallCheck(this, Tabs);

          (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
          this.ionNavWillLoad = (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionNavWillLoad", 7);
          this.ionTabsWillChange = (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionTabsWillChange", 3);
          this.ionTabsDidChange = (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionTabsDidChange", 3);
          this.transitioning = false;
          /** @internal */

          this.useRouter = false;

          this.onTabClicked = function (ev) {
            var _ev$detail = ev.detail,
                href = _ev$detail.href,
                tab = _ev$detail.tab;

            if (_this8.useRouter && href !== undefined) {
              var router = document.querySelector('ion-router');

              if (router) {
                router.push(href);
              }
            } else {
              _this8.select(tab);
            }
          };
        }

        _createClass(Tabs, [{
          key: "componentWillLoad",
          value: function componentWillLoad() {
            var _this3 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
              var tabs;
              return regeneratorRuntime.wrap(function _callee3$(_context3) {
                while (1) {
                  switch (_context3.prev = _context3.next) {
                    case 0:
                      if (!_this3.useRouter) {
                        _this3.useRouter = !!document.querySelector('ion-router') && !_this3.el.closest('[no-router]');
                      }

                      if (_this3.useRouter) {
                        _context3.next = 6;
                        break;
                      }

                      tabs = _this3.tabs;

                      if (!(tabs.length > 0)) {
                        _context3.next = 6;
                        break;
                      }

                      _context3.next = 6;
                      return _this3.select(tabs[0]);

                    case 6:
                      _this3.ionNavWillLoad.emit();

                    case 7:
                    case "end":
                      return _context3.stop();
                  }
                }
              }, _callee3);
            }))();
          }
        }, {
          key: "componentWillRender",
          value: function componentWillRender() {
            var tabBar = this.el.querySelector('ion-tab-bar');

            if (tabBar) {
              var tab = this.selectedTab ? this.selectedTab.tab : undefined;
              tabBar.selectedTab = tab;
            }
          }
          /**
           * Select a tab by the value of its `tab` property or an element reference.
           *
           * @param tab The tab instance to select. If passed a string, it should be the value of the tab's `tab` property.
           */

        }, {
          key: "select",
          value: function select(tab) {
            var _this4 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
              var selectedTab;
              return regeneratorRuntime.wrap(function _callee4$(_context4) {
                while (1) {
                  switch (_context4.prev = _context4.next) {
                    case 0:
                      selectedTab = _getTab(_this4.tabs, tab);

                      if (_this4.shouldSwitch(selectedTab)) {
                        _context4.next = 3;
                        break;
                      }

                      return _context4.abrupt("return", false);

                    case 3:
                      _context4.next = 5;
                      return _this4.setActive(selectedTab);

                    case 5:
                      _context4.next = 7;
                      return _this4.notifyRouter();

                    case 7:
                      _this4.tabSwitch();

                      return _context4.abrupt("return", true);

                    case 9:
                    case "end":
                      return _context4.stop();
                  }
                }
              }, _callee4);
            }))();
          }
          /**
           * Get a specific tab by the value of its `tab` property or an element reference.
           *
           * @param tab The tab instance to select. If passed a string, it should be the value of the tab's `tab` property.
           */

        }, {
          key: "getTab",
          value: function getTab(tab) {
            var _this5 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
              return regeneratorRuntime.wrap(function _callee5$(_context5) {
                while (1) {
                  switch (_context5.prev = _context5.next) {
                    case 0:
                      return _context5.abrupt("return", _getTab(_this5.tabs, tab));

                    case 1:
                    case "end":
                      return _context5.stop();
                  }
                }
              }, _callee5);
            }))();
          }
          /**
           * Get the currently selected tab.
           */

        }, {
          key: "getSelected",
          value: function getSelected() {
            return Promise.resolve(this.selectedTab ? this.selectedTab.tab : undefined);
          }
          /** @internal */

        }, {
          key: "setRouteId",
          value: function setRouteId(id) {
            var _this6 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
              var selectedTab;
              return regeneratorRuntime.wrap(function _callee6$(_context6) {
                while (1) {
                  switch (_context6.prev = _context6.next) {
                    case 0:
                      selectedTab = _getTab(_this6.tabs, id);

                      if (_this6.shouldSwitch(selectedTab)) {
                        _context6.next = 3;
                        break;
                      }

                      return _context6.abrupt("return", {
                        changed: false,
                        element: _this6.selectedTab
                      });

                    case 3:
                      _context6.next = 5;
                      return _this6.setActive(selectedTab);

                    case 5:
                      return _context6.abrupt("return", {
                        changed: true,
                        element: _this6.selectedTab,
                        markVisible: function markVisible() {
                          return _this6.tabSwitch();
                        }
                      });

                    case 6:
                    case "end":
                      return _context6.stop();
                  }
                }
              }, _callee6);
            }))();
          }
          /** @internal */

        }, {
          key: "getRouteId",
          value: function getRouteId() {
            var _this7 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {
              var tabId;
              return regeneratorRuntime.wrap(function _callee7$(_context7) {
                while (1) {
                  switch (_context7.prev = _context7.next) {
                    case 0:
                      tabId = _this7.selectedTab && _this7.selectedTab.tab;
                      return _context7.abrupt("return", tabId !== undefined ? {
                        id: tabId,
                        element: _this7.selectedTab
                      } : undefined);

                    case 2:
                    case "end":
                      return _context7.stop();
                  }
                }
              }, _callee7);
            }))();
          }
        }, {
          key: "setActive",
          value: function setActive(selectedTab) {
            if (this.transitioning) {
              return Promise.reject('transitioning already happening');
            }

            this.transitioning = true;
            this.leavingTab = this.selectedTab;
            this.selectedTab = selectedTab;
            this.ionTabsWillChange.emit({
              tab: selectedTab.tab
            });
            selectedTab.active = true;
            return Promise.resolve();
          }
        }, {
          key: "tabSwitch",
          value: function tabSwitch() {
            var selectedTab = this.selectedTab;
            var leavingTab = this.leavingTab;
            this.leavingTab = undefined;
            this.transitioning = false;

            if (!selectedTab) {
              return;
            }

            if (leavingTab !== selectedTab) {
              if (leavingTab) {
                leavingTab.active = false;
              }

              this.ionTabsDidChange.emit({
                tab: selectedTab.tab
              });
            }
          }
        }, {
          key: "notifyRouter",
          value: function notifyRouter() {
            if (this.useRouter) {
              var router = document.querySelector('ion-router');

              if (router) {
                return router.navChanged('forward');
              }
            }

            return Promise.resolve(false);
          }
        }, {
          key: "shouldSwitch",
          value: function shouldSwitch(selectedTab) {
            var leavingTab = this.selectedTab;
            return selectedTab !== undefined && selectedTab !== leavingTab && !this.transitioning;
          }
        }, {
          key: "tabs",
          get: function get() {
            return Array.from(this.el.querySelectorAll('ion-tab'));
          }
        }, {
          key: "render",
          value: function render() {
            return (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.H, {
              onIonTabButtonClick: this.onTabClicked
            }, (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", {
              name: "top"
            }), (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
              "class": "tabs-inner"
            }, (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", null)), (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", {
              name: "bottom"
            }));
          }
        }, {
          key: "el",
          get: function get() {
            return (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
          }
        }]);

        return Tabs;
      }();

      var _getTab = function _getTab(tabs, tab) {
        var tabEl = typeof tab === 'string' ? tabs.find(function (t) {
          return t.tab === tab;
        }) : tab;

        if (!tabEl) {
          console.error("tab with id: \"".concat(tabEl, "\" does not exist"));
        }

        return tabEl;
      };

      Tabs.style = tabsCss;
      /***/
    }
  }]);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFGQSxFQUFVO0FBQUVzRCxrQkFBSSxFQUFFO0FBQVIsYUFBVnRELENBQXBEQSxFQUFnRkEsdURBQUUsS0FBRkEsRUFBUztBQUFFRyx1QkFBTztBQUFULGFBQVRILEVBQWtDQSx1REFBRSxNQUFGQSxFQUFVLElBQVZBLENBQWxDQSxDQUFoRkEsRUFBb0lBLHVEQUFFLE1BQUZBLEVBQVU7QUFBRXNELGtCQUFJLEVBQUU7QUFBUixhQUFWdEQsQ0FBcElBLENBQVI7QUFDRDtBQXBJTztBQUFBO0FBQUEsZUFxSUYsZUFBRztBQUFFLG1CQUFPSSx1REFBVyxJQUFYQSxDQUFQO0FBQTBCO0FBckk3Qjs7QUFBQTtBQUFBLFNBQVY7O0FBdUlBLFVBQU0yQixPQUFNLEdBQUcsU0FBVEEsT0FBUyxDQUFDTixJQUFELEVBQU8xQixHQUFQLEVBQWU7QUFDNUIsWUFBTXdELEtBQUssR0FBSSxPQUFPeEQsR0FBUCxLQUFlLFFBQWYsR0FDWDBCLElBQUksQ0FBQytCLElBQUwvQixDQUFVZ0MsV0FBQztBQUFBLGlCQUFJQSxDQUFDLENBQUMxRCxHQUFGMEQsS0FBVTFELEdBQWQ7QUFBQSxTQUFYMEIsQ0FEVyxHQUVYMUIsR0FGSjs7QUFHQSxZQUFJLENBQUN3RCxLQUFMLEVBQVk7QUFDVjlELGlCQUFPLENBQUNDLEtBQVJELDBCQUErQjhELEtBQS9COUQ7QUFDRDs7QUFDRCxlQUFPOEQsS0FBUDtBQVBGOztBQVNBaEQsVUFBSSxDQUFDRixLQUFMRSxHQUFhRCxPQUFiQzs7OyIsIm5hbWVzIjpbInRhYkNzcyIsIlRhYiIsImNvbnN0cnVjdG9yIiwiaG9zdFJlZiIsInJlZ2lzdGVySW5zdGFuY2UiLCJsb2FkZWQiLCJhY3RpdmUiLCJjb21wb25lbnRXaWxsTG9hZCIsIl90aGlzIiwic2V0QWN0aXZlIiwiX3RoaXMyIiwicHJlcGFyZUxhenlMb2FkZWQiLCJjaGFuZ2VBY3RpdmUiLCJpc0FjdGl2ZSIsImNvbXBvbmVudCIsImF0dGFjaENvbXBvbmVudCIsImRlbGVnYXRlIiwiZWwiLCJlIiwiY29uc29sZSIsImVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1bmRlZmluZWQiLCJyZW5kZXIiLCJ0YWIiLCJoIiwiSG9zdCIsInJvbGUiLCJjbGFzcyIsImdldEVsZW1lbnQiLCJzdHlsZSIsInRhYnNDc3MiLCJUYWJzIiwiaW9uTmF2V2lsbExvYWQiLCJjcmVhdGVFdmVudCIsImlvblRhYnNXaWxsQ2hhbmdlIiwiaW9uVGFic0RpZENoYW5nZSIsInRyYW5zaXRpb25pbmciLCJ1c2VSb3V0ZXIiLCJvblRhYkNsaWNrZWQiLCJldiIsImRldGFpbCIsImhyZWYiLCJyb3V0ZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwdXNoIiwic2VsZWN0IiwiX3RoaXMzIiwiY2xvc2VzdCIsInRhYnMiLCJsZW5ndGgiLCJlbWl0IiwiY29tcG9uZW50V2lsbFJlbmRlciIsInRhYkJhciIsInNlbGVjdGVkVGFiIiwiZ2V0VGFiIiwiX3RoaXM0Iiwic2hvdWxkU3dpdGNoIiwibm90aWZ5Um91dGVyIiwidGFiU3dpdGNoIiwiX3RoaXM1IiwiZ2V0U2VsZWN0ZWQiLCJzZXRSb3V0ZUlkIiwiaWQiLCJfdGhpczYiLCJjaGFuZ2VkIiwiZWxlbWVudCIsIm1hcmtWaXNpYmxlIiwiZ2V0Um91dGVJZCIsInRhYklkIiwiX3RoaXM3IiwicmVqZWN0IiwibGVhdmluZ1RhYiIsIm5hdkNoYW5nZWQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwib25Jb25UYWJCdXR0b25DbGljayIsIm5hbWUiLCJ0YWJFbCIsImZpbmQiLCJ0Il0sInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvZGlzdC9lc20vaW9uLXRhYl8yLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgaCwgSCBhcyBIb3N0LCBpIGFzIGdldEVsZW1lbnQsIGUgYXMgY3JlYXRlRXZlbnQgfSBmcm9tICcuL2luZGV4LTdhOGI3YTFjLmpzJztcbmltcG9ydCB7IGEgYXMgYXR0YWNoQ29tcG9uZW50IH0gZnJvbSAnLi9mcmFtZXdvcmstZGVsZWdhdGUtNDM5MmNkNjMuanMnO1xuaW1wb3J0ICcuL2hlbHBlcnMtZGQ3ZTRiN2IuanMnO1xuXG5jb25zdCB0YWJDc3MgPSBcIjpob3N0KC50YWItaGlkZGVuKXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH1cIjtcblxuY29uc3QgVGFiID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRBY3RpdmUoKTtcbiAgICB9XG4gIH1cbiAgLyoqIFNldCB0aGUgYWN0aXZlIGNvbXBvbmVudCBmb3IgdGhlIHRhYiAqL1xuICBhc3luYyBzZXRBY3RpdmUoKSB7XG4gICAgYXdhaXQgdGhpcy5wcmVwYXJlTGF6eUxvYWRlZCgpO1xuICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgfVxuICBjaGFuZ2VBY3RpdmUoaXNBY3RpdmUpIHtcbiAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgIHRoaXMucHJlcGFyZUxhenlMb2FkZWQoKTtcbiAgICB9XG4gIH1cbiAgcHJlcGFyZUxhenlMb2FkZWQoKSB7XG4gICAgaWYgKCF0aGlzLmxvYWRlZCAmJiB0aGlzLmNvbXBvbmVudCAhPSBudWxsKSB7XG4gICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXR0YWNoQ29tcG9uZW50KHRoaXMuZGVsZWdhdGUsIHRoaXMuZWwsIHRoaXMuY29tcG9uZW50LCBbJ2lvbi1wYWdlJ10pO1xuICAgICAgfVxuICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHRhYiwgYWN0aXZlLCBjb21wb25lbnQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgcm9sZTogXCJ0YWJwYW5lbFwiLCBcImFyaWEtaGlkZGVuXCI6ICFhY3RpdmUgPyAndHJ1ZScgOiBudWxsLCBcImFyaWEtbGFiZWxsZWRieVwiOiBgdGFiLWJ1dHRvbi0ke3RhYn1gLCBjbGFzczoge1xuICAgICAgICAnaW9uLXBhZ2UnOiBjb21wb25lbnQgPT09IHVuZGVmaW5lZCxcbiAgICAgICAgJ3RhYi1oaWRkZW4nOiAhYWN0aXZlXG4gICAgICB9IH0sIGgoXCJzbG90XCIsIG51bGwpKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwiYWN0aXZlXCI6IFtcImNoYW5nZUFjdGl2ZVwiXVxuICB9OyB9XG59O1xuVGFiLnN0eWxlID0gdGFiQ3NzO1xuXG5jb25zdCB0YWJzQ3NzID0gXCI6aG9zdHtsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2NvbnRhaW46bGF5b3V0IHNpemUgc3R5bGU7ei1pbmRleDowfS50YWJzLWlubmVye3Bvc2l0aW9uOnJlbGF0aXZlOy1tcy1mbGV4OjE7ZmxleDoxO2NvbnRhaW46bGF5b3V0IHNpemUgc3R5bGV9XCI7XG5cbmNvbnN0IFRhYnMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuaW9uTmF2V2lsbExvYWQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdldpbGxMb2FkXCIsIDcpO1xuICAgIHRoaXMuaW9uVGFic1dpbGxDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvblRhYnNXaWxsQ2hhbmdlXCIsIDMpO1xuICAgIHRoaXMuaW9uVGFic0RpZENoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uVGFic0RpZENoYW5nZVwiLCAzKTtcbiAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgdGhpcy51c2VSb3V0ZXIgPSBmYWxzZTtcbiAgICB0aGlzLm9uVGFiQ2xpY2tlZCA9IChldikgPT4ge1xuICAgICAgY29uc3QgeyBocmVmLCB0YWIgfSA9IGV2LmRldGFpbDtcbiAgICAgIGlmICh0aGlzLnVzZVJvdXRlciAmJiBocmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qgcm91dGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW9uLXJvdXRlcicpO1xuICAgICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgICAgcm91dGVyLnB1c2goaHJlZik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnNlbGVjdCh0YWIpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgaWYgKCF0aGlzLnVzZVJvdXRlcikge1xuICAgICAgdGhpcy51c2VSb3V0ZXIgPSAhIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1yb3V0ZXInKSAmJiAhdGhpcy5lbC5jbG9zZXN0KCdbbm8tcm91dGVyXScpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMudXNlUm91dGVyKSB7XG4gICAgICBjb25zdCB0YWJzID0gdGhpcy50YWJzO1xuICAgICAgaWYgKHRhYnMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbGVjdCh0YWJzWzBdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pb25OYXZXaWxsTG9hZC5lbWl0KCk7XG4gIH1cbiAgY29tcG9uZW50V2lsbFJlbmRlcigpIHtcbiAgICBjb25zdCB0YWJCYXIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ2lvbi10YWItYmFyJyk7XG4gICAgaWYgKHRhYkJhcikge1xuICAgICAgY29uc3QgdGFiID0gdGhpcy5zZWxlY3RlZFRhYiA/IHRoaXMuc2VsZWN0ZWRUYWIudGFiIDogdW5kZWZpbmVkO1xuICAgICAgdGFiQmFyLnNlbGVjdGVkVGFiID0gdGFiO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2VsZWN0IGEgdGFiIGJ5IHRoZSB2YWx1ZSBvZiBpdHMgYHRhYmAgcHJvcGVydHkgb3IgYW4gZWxlbWVudCByZWZlcmVuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB0YWIgVGhlIHRhYiBpbnN0YW5jZSB0byBzZWxlY3QuIElmIHBhc3NlZCBhIHN0cmluZywgaXQgc2hvdWxkIGJlIHRoZSB2YWx1ZSBvZiB0aGUgdGFiJ3MgYHRhYmAgcHJvcGVydHkuXG4gICAqL1xuICBhc3luYyBzZWxlY3QodGFiKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRUYWIgPSBnZXRUYWIodGhpcy50YWJzLCB0YWIpO1xuICAgIGlmICghdGhpcy5zaG91bGRTd2l0Y2goc2VsZWN0ZWRUYWIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc2V0QWN0aXZlKHNlbGVjdGVkVGFiKTtcbiAgICBhd2FpdCB0aGlzLm5vdGlmeVJvdXRlcigpO1xuICAgIHRoaXMudGFiU3dpdGNoKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHNwZWNpZmljIHRhYiBieSB0aGUgdmFsdWUgb2YgaXRzIGB0YWJgIHByb3BlcnR5IG9yIGFuIGVsZW1lbnQgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gdGFiIFRoZSB0YWIgaW5zdGFuY2UgdG8gc2VsZWN0LiBJZiBwYXNzZWQgYSBzdHJpbmcsIGl0IHNob3VsZCBiZSB0aGUgdmFsdWUgb2YgdGhlIHRhYidzIGB0YWJgIHByb3BlcnR5LlxuICAgKi9cbiAgYXN5bmMgZ2V0VGFiKHRhYikge1xuICAgIHJldHVybiBnZXRUYWIodGhpcy50YWJzLCB0YWIpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB0YWIuXG4gICAqL1xuICBnZXRTZWxlY3RlZCgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuc2VsZWN0ZWRUYWIgPyB0aGlzLnNlbGVjdGVkVGFiLnRhYiA6IHVuZGVmaW5lZCk7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc3luYyBzZXRSb3V0ZUlkKGlkKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRUYWIgPSBnZXRUYWIodGhpcy50YWJzLCBpZCk7XG4gICAgaWYgKCF0aGlzLnNob3VsZFN3aXRjaChzZWxlY3RlZFRhYikpIHtcbiAgICAgIHJldHVybiB7IGNoYW5nZWQ6IGZhbHNlLCBlbGVtZW50OiB0aGlzLnNlbGVjdGVkVGFiIH07XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc2V0QWN0aXZlKHNlbGVjdGVkVGFiKTtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhbmdlZDogdHJ1ZSxcbiAgICAgIGVsZW1lbnQ6IHRoaXMuc2VsZWN0ZWRUYWIsXG4gICAgICBtYXJrVmlzaWJsZTogKCkgPT4gdGhpcy50YWJTd2l0Y2goKSxcbiAgICB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXN5bmMgZ2V0Um91dGVJZCgpIHtcbiAgICBjb25zdCB0YWJJZCA9IHRoaXMuc2VsZWN0ZWRUYWIgJiYgdGhpcy5zZWxlY3RlZFRhYi50YWI7XG4gICAgcmV0dXJuIHRhYklkICE9PSB1bmRlZmluZWQgPyB7IGlkOiB0YWJJZCwgZWxlbWVudDogdGhpcy5zZWxlY3RlZFRhYiB9IDogdW5kZWZpbmVkO1xuICB9XG4gIHNldEFjdGl2ZShzZWxlY3RlZFRhYikge1xuICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgndHJhbnNpdGlvbmluZyBhbHJlYWR5IGhhcHBlbmluZycpO1xuICAgIH1cbiAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSB0cnVlO1xuICAgIHRoaXMubGVhdmluZ1RhYiA9IHRoaXMuc2VsZWN0ZWRUYWI7XG4gICAgdGhpcy5zZWxlY3RlZFRhYiA9IHNlbGVjdGVkVGFiO1xuICAgIHRoaXMuaW9uVGFic1dpbGxDaGFuZ2UuZW1pdCh7IHRhYjogc2VsZWN0ZWRUYWIudGFiIH0pO1xuICAgIHNlbGVjdGVkVGFiLmFjdGl2ZSA9IHRydWU7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG4gIHRhYlN3aXRjaCgpIHtcbiAgICBjb25zdCBzZWxlY3RlZFRhYiA9IHRoaXMuc2VsZWN0ZWRUYWI7XG4gICAgY29uc3QgbGVhdmluZ1RhYiA9IHRoaXMubGVhdmluZ1RhYjtcbiAgICB0aGlzLmxlYXZpbmdUYWIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50cmFuc2l0aW9uaW5nID0gZmFsc2U7XG4gICAgaWYgKCFzZWxlY3RlZFRhYikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobGVhdmluZ1RhYiAhPT0gc2VsZWN0ZWRUYWIpIHtcbiAgICAgIGlmIChsZWF2aW5nVGFiKSB7XG4gICAgICAgIGxlYXZpbmdUYWIuYWN0aXZlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLmlvblRhYnNEaWRDaGFuZ2UuZW1pdCh7IHRhYjogc2VsZWN0ZWRUYWIudGFiIH0pO1xuICAgIH1cbiAgfVxuICBub3RpZnlSb3V0ZXIoKSB7XG4gICAgaWYgKHRoaXMudXNlUm91dGVyKSB7XG4gICAgICBjb25zdCByb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJyk7XG4gICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgIHJldHVybiByb3V0ZXIubmF2Q2hhbmdlZCgnZm9yd2FyZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgfVxuICBzaG91bGRTd2l0Y2goc2VsZWN0ZWRUYWIpIHtcbiAgICBjb25zdCBsZWF2aW5nVGFiID0gdGhpcy5zZWxlY3RlZFRhYjtcbiAgICByZXR1cm4gc2VsZWN0ZWRUYWIgIT09IHVuZGVmaW5lZCAmJiBzZWxlY3RlZFRhYiAhPT0gbGVhdmluZ1RhYiAmJiAhdGhpcy50cmFuc2l0aW9uaW5nO1xuICB9XG4gIGdldCB0YWJzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnaW9uLXRhYicpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgb25Jb25UYWJCdXR0b25DbGljazogdGhpcy5vblRhYkNsaWNrZWQgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBcInRvcFwiIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwidGFicy1pbm5lclwiIH0sIGgoXCJzbG90XCIsIG51bGwpKSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImJvdHRvbVwiIH0pKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbmNvbnN0IGdldFRhYiA9ICh0YWJzLCB0YWIpID0+IHtcbiAgY29uc3QgdGFiRWwgPSAodHlwZW9mIHRhYiA9PT0gJ3N0cmluZycpXG4gICAgPyB0YWJzLmZpbmQodCA9PiB0LnRhYiA9PT0gdGFiKVxuICAgIDogdGFiO1xuICBpZiAoIXRhYkVsKSB7XG4gICAgY29uc29sZS5lcnJvcihgdGFiIHdpdGggaWQ6IFwiJHt0YWJFbH1cIiBkb2VzIG5vdCBleGlzdGApO1xuICB9XG4gIHJldHVybiB0YWJFbDtcbn07XG5UYWJzLnN0eWxlID0gdGFic0NzcztcblxuZXhwb3J0IHsgVGFiIGFzIGlvbl90YWIsIFRhYnMgYXMgaW9uX3RhYnMgfTtcbiJdfQ==