"use strict";
(self["webpackChunkregobs4"] = self["webpackChunkregobs4"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-73f15161_js"],{

/***/ 40264:
/*!*******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/input-shims-73f15161.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "startInputShims": function() { return /* binding */ startInputShims; }
/* harmony export */ });
/* harmony import */ var C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ 80151);
/* harmony import */ var _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers-dd7e4b7b.js */ 40693);


const cloneMap = new WeakMap();

const relocateInput = (componentEl, inputEl, shouldRelocate, inputRelativeY = 0) => {
  if (cloneMap.has(componentEl) === shouldRelocate) {
    return;
  }

  if (shouldRelocate) {
    addClone(componentEl, inputEl, inputRelativeY);
  } else {
    removeClone(componentEl, inputEl);
  }
};

const isFocused = input => {
  return input === input.getRootNode().activeElement;
};

const addClone = (componentEl, inputEl, inputRelativeY) => {
  // this allows for the actual input to receive the focus from
  // the user's touch event, but before it receives focus, it
  // moves the actual input to a location that will not screw
  // up the app's layout, and does not allow the native browser
  // to attempt to scroll the input into place (messing up headers/footers)
  // the cloned input fills the area of where native input should be
  // while the native input fakes out the browser by relocating itself
  // before it receives the actual focus event
  // We hide the focused input (with the visible caret) invisible by making it scale(0),
  const parentEl = inputEl.parentNode; // DOM WRITES

  const clonedEl = inputEl.cloneNode(false);
  clonedEl.classList.add('cloned-input');
  clonedEl.tabIndex = -1;
  parentEl.appendChild(clonedEl);
  cloneMap.set(componentEl, clonedEl);
  const doc = componentEl.ownerDocument;
  const tx = doc.dir === 'rtl' ? 9999 : -9999;
  componentEl.style.pointerEvents = 'none';
  inputEl.style.transform = `translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`;
};

const removeClone = (componentEl, inputEl) => {
  const clone = cloneMap.get(componentEl);

  if (clone) {
    cloneMap.delete(componentEl);
    clone.remove();
  }

  componentEl.style.pointerEvents = '';
  inputEl.style.transform = '';
};

const enableHideCaretOnScroll = (componentEl, inputEl, scrollEl) => {
  if (!scrollEl || !inputEl) {
    return () => {
      return;
    };
  }

  const scrollHideCaret = shouldHideCaret => {
    if (isFocused(inputEl)) {
      relocateInput(componentEl, inputEl, shouldHideCaret);
    }
  };

  const onBlur = () => relocateInput(componentEl, inputEl, false);

  const hideCaret = () => scrollHideCaret(true);

  const showCaret = () => scrollHideCaret(false);

  (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.a)(scrollEl, 'ionScrollStart', hideCaret);
  (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.a)(scrollEl, 'ionScrollEnd', showCaret);
  inputEl.addEventListener('blur', onBlur);
  return () => {
    (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.b)(scrollEl, 'ionScrollStart', hideCaret);
    (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.b)(scrollEl, 'ionScrollEnd', showCaret);
    inputEl.addEventListener('ionBlur', onBlur);
  };
};

const SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';

const enableInputBlurring = () => {
  let focused = true;
  let didScroll = false;
  const doc = document;

  const onScroll = () => {
    didScroll = true;
  };

  const onFocusin = () => {
    focused = true;
  };

  const onTouchend = ev => {
    // if app did scroll return early
    if (didScroll) {
      didScroll = false;
      return;
    }

    const active = doc.activeElement;

    if (!active) {
      return;
    } // only blur if the active element is a text-input or a textarea


    if (active.matches(SKIP_SELECTOR)) {
      return;
    } // if the selected target is the active element, do not blur


    const tapped = ev.target;

    if (tapped === active) {
      return;
    }

    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
      return;
    }

    focused = false; // TODO: find a better way, why 50ms?

    setTimeout(() => {
      if (!focused) {
        active.blur();
      }
    }, 50);
  };

  (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.a)(doc, 'ionScrollStart', onScroll);
  doc.addEventListener('focusin', onFocusin, true);
  doc.addEventListener('touchend', onTouchend, false);
  return () => {
    (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.b)(doc, 'ionScrollStart', onScroll, true);
    doc.removeEventListener('focusin', onFocusin, true);
    doc.removeEventListener('touchend', onTouchend, false);
  };
};

const SCROLL_ASSIST_SPEED = 0.3;

const getScrollData = (componentEl, contentEl, keyboardHeight) => {
  const itemEl = componentEl.closest('ion-item,[ion-item]') || componentEl;
  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight);
};

const calcScrollData = (inputRect, contentRect, keyboardHeight, platformHeight) => {
  // compute input's Y values relative to the body
  const inputTop = inputRect.top;
  const inputBottom = inputRect.bottom; // compute visible area

  const visibleAreaTop = contentRect.top;
  const visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight); // compute safe area

  const safeAreaTop = visibleAreaTop + 15;
  const safeAreaBottom = visibleAreaBottom * 0.75; // figure out if each edge of the input is within the safe area

  const distanceToBottom = safeAreaBottom - inputBottom;
  const distanceToTop = safeAreaTop - inputTop; // desiredScrollAmount is the negated distance to the safe area according to our calculations.

  const desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0); // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
  // gets focus, so make sure we don't scroll the input above the visible area

  const scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
  const distance = Math.abs(scrollAmount);
  const duration = distance / SCROLL_ASSIST_SPEED;
  const scrollDuration = Math.min(400, Math.max(150, duration));
  return {
    scrollAmount,
    scrollDuration,
    scrollPadding: keyboardHeight,
    inputSafeY: -(inputTop - safeAreaTop) + 4
  };
};

const enableScrollAssist = (componentEl, inputEl, contentEl, footerEl, keyboardHeight) => {
  let coord;

  const touchStart = ev => {
    coord = (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.p)(ev);
  };

  const touchEnd = ev => {
    // input cover touchend/mouseup
    if (!coord) {
      return;
    } // get where the touchend/mouseup ended


    const endCoord = (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.p)(ev); // focus this input if the pointer hasn't moved XX pixels
    // and the input doesn't already have focus

    if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {
      ev.stopPropagation(); // begin the input focus process

      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight);
    }
  };

  componentEl.addEventListener('touchstart', touchStart, true);
  componentEl.addEventListener('touchend', touchEnd, true);
  return () => {
    componentEl.removeEventListener('touchstart', touchStart, true);
    componentEl.removeEventListener('touchend', touchEnd, true);
  };
};

const jsSetFocus = /*#__PURE__*/function () {
  var _ref = (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* (componentEl, inputEl, contentEl, footerEl, keyboardHeight) {
    if (!contentEl && !footerEl) {
      return;
    }

    const scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);

    if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {
      // the text input is in a safe position that doesn't
      // require it to be scrolled into view, just set focus now
      inputEl.focus();
      return;
    } // temporarily move the focus to the focus holder so the browser
    // doesn't freak out while it's trying to get the input in place
    // at this point the native text input still does not have focus


    relocateInput(componentEl, inputEl, true, scrollData.inputSafeY);
    inputEl.focus();
    /**
     * Relocating/Focusing input causes the
     * click event to be cancelled, so
     * manually fire one here.
     */

    (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.r)(() => componentEl.click());
    /* tslint:disable-next-line */

    if (typeof window !== 'undefined') {
      let scrollContentTimeout;

      const scrollContent = /*#__PURE__*/function () {
        var _ref2 = (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
          // clean up listeners and timeouts
          if (scrollContentTimeout !== undefined) {
            clearTimeout(scrollContentTimeout);
          }

          window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          window.removeEventListener('ionKeyboardDidShow', scrollContent); // scroll the input into place

          if (contentEl) {
            yield contentEl.scrollByPoint(0, scrollData.scrollAmount, scrollData.scrollDuration);
          } // the scroll view is in the correct position now
          // give the native text input focus


          relocateInput(componentEl, inputEl, false, scrollData.inputSafeY); // ensure this is the focused input

          inputEl.focus();
        });

        return function scrollContent() {
          return _ref2.apply(this, arguments);
        };
      }();

      const doubleKeyboardEventListener = () => {
        window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
        window.addEventListener('ionKeyboardDidShow', scrollContent);
      };

      if (contentEl) {
        const scrollEl = yield contentEl.getScrollElement();
        /**
         * scrollData will only consider the amount we need
         * to scroll in order to properly bring the input
         * into view. It will not consider the amount
         * we can scroll in the content element.
         * As a result, scrollData may request a greater
         * scroll position than is currently available
         * in the DOM. If this is the case, we need to
         * wait for the webview to resize/the keyboard
         * to show in order for additional scroll
         * bandwidth to become available.
         */

        const totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;

        if (scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {
          /**
           * On iOS devices, the system will show a "Passwords" bar above the keyboard
           * after the initial keyboard is shown. This prevents the webview from resizing
           * until the "Passwords" bar is shown, so we need to wait for that to happen first.
           */
          if (inputEl.type === 'password') {
            // Add 50px to account for the "Passwords" bar
            scrollData.scrollAmount += 50;
            window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          } else {
            window.addEventListener('ionKeyboardDidShow', scrollContent);
          }
          /**
           * This should only fire in 2 instances:
           * 1. The app is very slow.
           * 2. The app is running in a browser on an old OS
           * that does not support Ionic Keyboard Events
           */


          scrollContentTimeout = setTimeout(scrollContent, 1000);
          return;
        }
      }

      scrollContent();
    }
  });

  return function jsSetFocus(_x, _x2, _x3, _x4, _x5) {
    return _ref.apply(this, arguments);
  };
}();

const hasPointerMoved = (threshold, startCoord, endCoord) => {
  if (startCoord && endCoord) {
    const deltaX = startCoord.x - endCoord.x;
    const deltaY = startCoord.y - endCoord.y;
    const distance = deltaX * deltaX + deltaY * deltaY;
    return distance > threshold * threshold;
  }

  return false;
};

const PADDING_TIMER_KEY = '$ionPaddingTimer';

const enableScrollPadding = keyboardHeight => {
  const doc = document;

  const onFocusin = ev => {
    setScrollPadding(ev.target, keyboardHeight);
  };

  const onFocusout = ev => {
    setScrollPadding(ev.target, 0);
  };

  doc.addEventListener('focusin', onFocusin);
  doc.addEventListener('focusout', onFocusout);
  return () => {
    doc.removeEventListener('focusin', onFocusin);
    doc.removeEventListener('focusout', onFocusout);
  };
};

const setScrollPadding = (input, keyboardHeight) => {
  if (input.tagName !== 'INPUT') {
    return;
  }

  if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {
    return;
  }

  if (input.parentElement && input.parentElement.parentElement && input.parentElement.parentElement.tagName === 'ION-SEARCHBAR') {
    return;
  }

  const el = input.closest('ion-content');

  if (el === null) {
    return;
  }

  const timer = el[PADDING_TIMER_KEY];

  if (timer) {
    clearTimeout(timer);
  }

  if (keyboardHeight > 0) {
    el.style.setProperty('--keyboard-offset', `${keyboardHeight}px`);
  } else {
    el[PADDING_TIMER_KEY] = setTimeout(() => {
      el.style.setProperty('--keyboard-offset', '0px');
    }, 120);
  }
};

const INPUT_BLURRING = true;
const SCROLL_PADDING = true;

const startInputShims = config => {
  const doc = document;
  const keyboardHeight = config.getNumber('keyboardHeight', 290);
  const scrollAssist = config.getBoolean('scrollAssist', true);
  const hideCaret = config.getBoolean('hideCaretOnScroll', true);
  const inputBlurring = config.getBoolean('inputBlurring', true);
  const scrollPadding = config.getBoolean('scrollPadding', true);
  const inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));
  const hideCaretMap = new WeakMap();
  const scrollAssistMap = new WeakMap();

  const registerInput = /*#__PURE__*/function () {
    var _ref3 = (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* (componentEl) {
      yield new Promise(resolve => (0,_helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.c)(componentEl, resolve));
      const inputRoot = componentEl.shadowRoot || componentEl;
      const inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
      const scrollEl = componentEl.closest('ion-content');
      const footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;

      if (!inputEl) {
        return;
      }

      if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
        const rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
        hideCaretMap.set(componentEl, rmFn);
      }

      if ((!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
        const rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight);
        scrollAssistMap.set(componentEl, rmFn);
      }
    });

    return function registerInput(_x6) {
      return _ref3.apply(this, arguments);
    };
  }();

  const unregisterInput = componentEl => {
    if (hideCaret) {
      const fn = hideCaretMap.get(componentEl);

      if (fn) {
        fn();
      }

      hideCaretMap.delete(componentEl);
    }

    if (scrollAssist) {
      const fn = scrollAssistMap.get(componentEl);

      if (fn) {
        fn();
      }

      scrollAssistMap.delete(componentEl);
    }
  };

  if (inputBlurring && INPUT_BLURRING) {
    enableInputBlurring();
  }

  if (scrollPadding && SCROLL_PADDING) {
    enableScrollPadding(keyboardHeight);
  } // Input might be already loaded in the DOM before ion-device-hacks did.
  // At this point we need to look for all of the inputs not registered yet
  // and register them.


  for (const input of inputs) {
    registerInput(input);
  }

  doc.addEventListener('ionInputDidLoad', ev => {
    registerInput(ev.detail);
  });
  doc.addEventListener('ionInputDidUnload', ev => {
    unregisterInput(ev.detail);
  });
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5wdXQtc2hpbXMtNzNmMTUxNjFfanMtZXMyMDE1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBLE1BQU1VLFFBQVEsR0FBRyxJQUFJQyxPQUFKLEVBQWpCOztBQUNBLE1BQU1DLGFBQWEsR0FBRyxDQUFDQyxXQUFELEVBQWNDLE9BQWQsRUFBdUJDLGNBQXZCLEVBQXVDQyxjQUFjLEdBQUcsQ0FBeEQsS0FBOEQ7QUFDbEYsTUFBSU4sUUFBUSxDQUFDTyxHQUFULENBQWFKLFdBQWIsTUFBOEJFLGNBQWxDLEVBQWtEO0FBQ2hEO0FBQ0Q7O0FBQ0QsTUFBSUEsY0FBSixFQUFvQjtBQUNsQkcsSUFBQUEsUUFBUSxDQUFDTCxXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLENBQVI7QUFDRCxHQUZELE1BR0s7QUFDSEcsSUFBQUEsV0FBVyxDQUFDTixXQUFELEVBQWNDLE9BQWQsQ0FBWDtBQUNEO0FBQ0YsQ0FWRDs7QUFXQSxNQUFNTSxTQUFTLEdBQUlDLEtBQUQsSUFBVztBQUMzQixTQUFPQSxLQUFLLEtBQUtBLEtBQUssQ0FBQ0MsV0FBTixHQUFvQkMsYUFBckM7QUFDRCxDQUZEOztBQUdBLE1BQU1MLFFBQVEsR0FBRyxDQUFDTCxXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLEtBQTBDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQU1RLFFBQVEsR0FBR1YsT0FBTyxDQUFDVyxVQUF6QixDQVZ5RCxDQVd6RDs7QUFDQSxRQUFNQyxRQUFRLEdBQUdaLE9BQU8sQ0FBQ2EsU0FBUixDQUFrQixLQUFsQixDQUFqQjtBQUNBRCxFQUFBQSxRQUFRLENBQUNFLFNBQVQsQ0FBbUJDLEdBQW5CLENBQXVCLGNBQXZCO0FBQ0FILEVBQUFBLFFBQVEsQ0FBQ0ksUUFBVCxHQUFvQixDQUFDLENBQXJCO0FBQ0FOLEVBQUFBLFFBQVEsQ0FB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c3QvZXNtL2lucHV0LXNoaW1zLTczZjE1MTYxLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGEgYXMgYWRkRXZlbnRMaXN0ZW5lciwgYiBhcyByZW1vdmVFdmVudExpc3RlbmVyLCByIGFzIHJhZiwgcCBhcyBwb2ludGVyQ29vcmQsIGMgYXMgY29tcG9uZW50T25SZWFkeSB9IGZyb20gJy4vaGVscGVycy1kZDdlNGI3Yi5qcyc7XG5cbmNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlbG9jYXRlSW5wdXQgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZFJlbG9jYXRlLCBpbnB1dFJlbGF0aXZlWSA9IDApID0+IHtcbiAgaWYgKGNsb25lTWFwLmhhcyhjb21wb25lbnRFbCkgPT09IHNob3VsZFJlbG9jYXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzaG91bGRSZWxvY2F0ZSkge1xuICAgIGFkZENsb25lKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBpbnB1dFJlbGF0aXZlWSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmVtb3ZlQ2xvbmUoY29tcG9uZW50RWwsIGlucHV0RWwpO1xuICB9XG59O1xuY29uc3QgaXNGb2N1c2VkID0gKGlucHV0KSA9PiB7XG4gIHJldHVybiBpbnB1dCA9PT0gaW5wdXQuZ2V0Um9vdE5vZGUoKS5hY3RpdmVFbGVtZW50O1xufTtcbmNvbnN0IGFkZENsb25lID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBpbnB1dFJlbGF0aXZlWSkgPT4ge1xuICAvLyB0aGlzIGFsbG93cyBmb3IgdGhlIGFjdHVhbCBpbnB1dCB0byByZWNlaXZlIHRoZSBmb2N1cyBmcm9tXG4gIC8vIHRoZSB1c2VyJ3MgdG91Y2ggZXZlbnQsIGJ1dCBiZWZvcmUgaXQgcmVjZWl2ZXMgZm9jdXMsIGl0XG4gIC8vIG1vdmVzIHRoZSBhY3R1YWwgaW5wdXQgdG8gYSBsb2NhdGlvbiB0aGF0IHdpbGwgbm90IHNjcmV3XG4gIC8vIHVwIHRoZSBhcHAncyBsYXlvdXQsIGFuZCBkb2VzIG5vdCBhbGxvdyB0aGUgbmF0aXZlIGJyb3dzZXJcbiAgLy8gdG8gYXR0ZW1wdCB0byBzY3JvbGwgdGhlIGlucHV0IGludG8gcGxhY2UgKG1lc3NpbmcgdXAgaGVhZGVycy9mb290ZXJzKVxuICAvLyB0aGUgY2xvbmVkIGlucHV0IGZpbGxzIHRoZSBhcmVhIG9mIHdoZXJlIG5hdGl2ZSBpbnB1dCBzaG91bGQgYmVcbiAgLy8gd2hpbGUgdGhlIG5hdGl2ZSBpbnB1dCBmYWtlcyBvdXQgdGhlIGJyb3dzZXIgYnkgcmVsb2NhdGluZyBpdHNlbGZcbiAgLy8gYmVmb3JlIGl0IHJlY2VpdmVzIHRoZSBhY3R1YWwgZm9jdXMgZXZlbnRcbiAgLy8gV2UgaGlkZSB0aGUgZm9jdXNlZCBpbnB1dCAod2l0aCB0aGUgdmlzaWJsZSBjYXJldCkgaW52aXNpYmxlIGJ5IG1ha2luZyBpdCBzY2FsZSgwKSxcbiAgY29uc3QgcGFyZW50RWwgPSBpbnB1dEVsLnBhcmVudE5vZGU7XG4gIC8vIERPTSBXUklURVNcbiAgY29uc3QgY2xvbmVkRWwgPSBpbnB1dEVsLmNsb25lTm9kZShmYWxzZSk7XG4gIGNsb25lZEVsLmNsYXNzTGlzdC5hZGQoJ2Nsb25lZC1pbnB1dCcpO1xuICBjbG9uZWRFbC50YWJJbmRleCA9IC0xO1xuICBwYXJlbnRFbC5hcHBlbmRDaGlsZChjbG9uZWRFbCk7XG4gIGNsb25lTWFwLnNldChjb21wb25lbnRFbCwgY2xvbmVkRWwpO1xuICBjb25zdCBkb2MgPSBjb21wb25lbnRFbC5vd25lckRvY3VtZW50O1xuICBjb25zdCB0eCA9IGRvYy5kaXIgPT09ICdydGwnID8gOTk5OSA6IC05OTk5O1xuICBjb21wb25lbnRFbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICBpbnB1dEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3R4fXB4LCR7aW5wdXRSZWxhdGl2ZVl9cHgsMCkgc2NhbGUoMClgO1xufTtcbmNvbnN0IHJlbW92ZUNsb25lID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsKSA9PiB7XG4gIGNvbnN0IGNsb25lID0gY2xvbmVNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgaWYgKGNsb25lKSB7XG4gICAgY2xvbmVNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICBjbG9uZS5yZW1vdmUoKTtcbiAgfVxuICBjb21wb25lbnRFbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJyc7XG4gIGlucHV0RWwuc3R5bGUudHJhbnNmb3JtID0gJyc7XG59O1xuXG5jb25zdCBlbmFibGVIaWRlQ2FyZXRPblNjcm9sbCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2Nyb2xsRWwpID0+IHtcbiAgaWYgKCFzY3JvbGxFbCB8fCAhaW5wdXRFbCkge1xuICAgIHJldHVybiAoKSA9PiB7IHJldHVybjsgfTtcbiAgfVxuICBjb25zdCBzY3JvbGxIaWRlQ2FyZXQgPSAoc2hvdWxkSGlkZUNhcmV0KSA9PiB7XG4gICAgaWYgKGlzRm9jdXNlZChpbnB1dEVsKSkge1xuICAgICAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkSGlkZUNhcmV0KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG9uQmx1ciA9ICgpID0+IHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIGZhbHNlKTtcbiAgY29uc3QgaGlkZUNhcmV0ID0gKCkgPT4gc2Nyb2xsSGlkZUNhcmV0KHRydWUpO1xuICBjb25zdCBzaG93Q2FyZXQgPSAoKSA9PiBzY3JvbGxIaWRlQ2FyZXQoZmFsc2UpO1xuICBhZGRFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICBhZGRFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsRW5kJywgc2hvd0NhcmV0KTtcbiAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgb25CbHVyKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxFbmQnLCBzaG93Q2FyZXQpO1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignaW9uQmx1cicsIG9uQmx1cik7XG4gIH07XG59O1xuXG5jb25zdCBTS0lQX1NFTEVDVE9SID0gJ2lucHV0LCB0ZXh0YXJlYSwgW25vLWJsdXJdLCBbY29udGVudGVkaXRhYmxlXSc7XG5jb25zdCBlbmFibGVJbnB1dEJsdXJyaW5nID0gKCkgPT4ge1xuICBsZXQgZm9jdXNlZCA9IHRydWU7XG4gIGxldCBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIGNvbnN0IG9uU2Nyb2xsID0gKCkgPT4ge1xuICAgIGRpZFNjcm9sbCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IG9uRm9jdXNpbiA9ICgpID0+IHtcbiAgICBmb2N1c2VkID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3Qgb25Ub3VjaGVuZCA9IChldikgPT4ge1xuICAgIC8vIGlmIGFwcCBkaWQgc2Nyb2xsIHJldHVybiBlYXJseVxuICAgIGlmIChkaWRTY3JvbGwpIHtcbiAgICAgIGRpZFNjcm9sbCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhY3RpdmUgPSBkb2MuYWN0aXZlRWxlbWVudDtcbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBvbmx5IGJsdXIgaWYgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIGEgdGV4dC1pbnB1dCBvciBhIHRleHRhcmVhXG4gICAgaWYgKGFjdGl2ZS5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGlmIHRoZSBzZWxlY3RlZCB0YXJnZXQgaXMgdGhlIGFjdGl2ZSBlbGVtZW50LCBkbyBub3QgYmx1clxuICAgIGNvbnN0IHRhcHBlZCA9IGV2LnRhcmdldDtcbiAgICBpZiAodGFwcGVkID09PSBhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRhcHBlZC5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpIHx8IHRhcHBlZC5jbG9zZXN0KFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvY3VzZWQgPSBmYWxzZTtcbiAgICAvLyBUT0RPOiBmaW5kIGEgYmV0dGVyIHdheSwgd2h5IDUwbXM/XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIWZvY3VzZWQpIHtcbiAgICAgICAgYWN0aXZlLmJsdXIoKTtcbiAgICAgIH1cbiAgICB9LCA1MCk7XG4gIH07XG4gIGFkZEV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hlbmQsIGZhbHNlKTtcbiAgfTtcbn07XG5cbmNvbnN0IFNDUk9MTF9BU1NJU1RfU1BFRUQgPSAwLjM7XG5jb25zdCBnZXRTY3JvbGxEYXRhID0gKGNvbXBvbmVudEVsLCBjb250ZW50RWwsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGNvbnN0IGl0ZW1FbCA9IGNvbXBvbmVudEVsLmNsb3Nlc3QoJ2lvbi1pdGVtLFtpb24taXRlbV0nKSB8fCBjb21wb25lbnRFbDtcbiAgcmV0dXJuIGNhbGNTY3JvbGxEYXRhKGl0ZW1FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgY29udGVudEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBrZXlib2FyZEhlaWdodCwgY29tcG9uZW50RWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5pbm5lckhlaWdodCk7XG59O1xuY29uc3QgY2FsY1Njcm9sbERhdGEgPSAoaW5wdXRSZWN0LCBjb250ZW50UmVjdCwga2V5Ym9hcmRIZWlnaHQsIHBsYXRmb3JtSGVpZ2h0KSA9PiB7XG4gIC8vIGNvbXB1dGUgaW5wdXQncyBZIHZhbHVlcyByZWxhdGl2ZSB0byB0aGUgYm9keVxuICBjb25zdCBpbnB1dFRvcCA9IGlucHV0UmVjdC50b3A7XG4gIGNvbnN0IGlucHV0Qm90dG9tID0gaW5wdXRSZWN0LmJvdHRvbTtcbiAgLy8gY29tcHV0ZSB2aXNpYmxlIGFyZWFcbiAgY29uc3QgdmlzaWJsZUFyZWFUb3AgPSBjb250ZW50UmVjdC50b3A7XG4gIGNvbnN0IHZpc2libGVBcmVhQm90dG9tID0gTWF0aC5taW4oY29udGVudFJlY3QuYm90dG9tLCBwbGF0Zm9ybUhlaWdodCAtIGtleWJvYXJkSGVpZ2h0KTtcbiAgLy8gY29tcHV0ZSBzYWZlIGFyZWFcbiAgY29uc3Qgc2FmZUFyZWFUb3AgPSB2aXNpYmxlQXJlYVRvcCArIDE1O1xuICBjb25zdCBzYWZlQXJlYUJvdHRvbSA9IHZpc2libGVBcmVhQm90dG9tICogMC43NTtcbiAgLy8gZmlndXJlIG91dCBpZiBlYWNoIGVkZ2Ugb2YgdGhlIGlucHV0IGlzIHdpdGhpbiB0aGUgc2FmZSBhcmVhXG4gIGNvbnN0IGRpc3RhbmNlVG9Cb3R0b20gPSBzYWZlQXJlYUJvdHRvbSAtIGlucHV0Qm90dG9tO1xuICBjb25zdCBkaXN0YW5jZVRvVG9wID0gc2FmZUFyZWFUb3AgLSBpbnB1dFRvcDtcbiAgLy8gZGVzaXJlZFNjcm9sbEFtb3VudCBpcyB0aGUgbmVnYXRlZCBkaXN0YW5jZSB0byB0aGUgc2FmZSBhcmVhIGFjY29yZGluZyB0byBvdXIgY2FsY3VsYXRpb25zLlxuICBjb25zdCBkZXNpcmVkU2Nyb2xsQW1vdW50ID0gTWF0aC5yb3VuZCgoZGlzdGFuY2VUb0JvdHRvbSA8IDApXG4gICAgPyAtZGlzdGFuY2VUb0JvdHRvbVxuICAgIDogKGRpc3RhbmNlVG9Ub3AgPiAwKVxuICAgICAgPyAtZGlzdGFuY2VUb1RvcFxuICAgICAgOiAwKTtcbiAgLy8gb3VyIGNhbGN1bGF0aW9ucyBtYWtlIHNvbWUgYXNzdW1wdGlvbnMgdGhhdCBhcmVuJ3QgYWx3YXlzIHRydWUsIGxpa2UgdGhlIGtleWJvYXJkIGJlaW5nIGNsb3NlZCB3aGVuIGFuIGlucHV0XG4gIC8vIGdldHMgZm9jdXMsIHNvIG1ha2Ugc3VyZSB3ZSBkb24ndCBzY3JvbGwgdGhlIGlucHV0IGFib3ZlIHRoZSB2aXNpYmxlIGFyZWFcbiAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gTWF0aC5taW4oZGVzaXJlZFNjcm9sbEFtb3VudCwgaW5wdXRUb3AgLSB2aXNpYmxlQXJlYVRvcCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoc2Nyb2xsQW1vdW50KTtcbiAgY29uc3QgZHVyYXRpb24gPSBkaXN0YW5jZSAvIFNDUk9MTF9BU1NJU1RfU1BFRUQ7XG4gIGNvbnN0IHNjcm9sbER1cmF0aW9uID0gTWF0aC5taW4oNDAwLCBNYXRoLm1heCgxNTAsIGR1cmF0aW9uKSk7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsQW1vdW50LFxuICAgIHNjcm9sbER1cmF0aW9uLFxuICAgIHNjcm9sbFBhZGRpbmc6IGtleWJvYXJkSGVpZ2h0LFxuICAgIGlucHV0U2FmZVk6IC0oaW5wdXRUb3AgLSBzYWZlQXJlYVRvcCkgKyA0XG4gIH07XG59O1xuXG5jb25zdCBlbmFibGVTY3JvbGxBc3Npc3QgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGxldCBjb29yZDtcbiAgY29uc3QgdG91Y2hTdGFydCA9IChldikgPT4ge1xuICAgIGNvb3JkID0gcG9pbnRlckNvb3JkKGV2KTtcbiAgfTtcbiAgY29uc3QgdG91Y2hFbmQgPSAoZXYpID0+IHtcbiAgICAvLyBpbnB1dCBjb3ZlciB0b3VjaGVuZC9tb3VzZXVwXG4gICAgaWYgKCFjb29yZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBnZXQgd2hlcmUgdGhlIHRvdWNoZW5kL21vdXNldXAgZW5kZWRcbiAgICBjb25zdCBlbmRDb29yZCA9IHBvaW50ZXJDb29yZChldik7XG4gICAgLy8gZm9jdXMgdGhpcyBpbnB1dCBpZiB0aGUgcG9pbnRlciBoYXNuJ3QgbW92ZWQgWFggcGl4ZWxzXG4gICAgLy8gYW5kIHRoZSBpbnB1dCBkb2Vzbid0IGFscmVhZHkgaGF2ZSBmb2N1c1xuICAgIGlmICghaGFzUG9pbnRlck1vdmVkKDYsIGNvb3JkLCBlbmRDb29yZCkgJiYgIWlzRm9jdXNlZChpbnB1dEVsKSkge1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAvLyBiZWdpbiB0aGUgaW5wdXQgZm9jdXMgcHJvY2Vzc1xuICAgICAganNTZXRGb2N1cyhjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpO1xuICAgIH1cbiAgfTtcbiAgY29tcG9uZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRvdWNoU3RhcnQsIHRydWUpO1xuICBjb21wb25lbnRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRvdWNoRW5kLCB0cnVlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb21wb25lbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydCwgdHJ1ZSk7XG4gICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0b3VjaEVuZCwgdHJ1ZSk7XG4gIH07XG59O1xuY29uc3QganNTZXRGb2N1cyA9IGFzeW5jIChjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgaWYgKCFjb250ZW50RWwgJiYgIWZvb3RlckVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNjcm9sbERhdGEgPSBnZXRTY3JvbGxEYXRhKGNvbXBvbmVudEVsLCAoY29udGVudEVsIHx8IGZvb3RlckVsKSwga2V5Ym9hcmRIZWlnaHQpO1xuICBpZiAoY29udGVudEVsICYmIE1hdGguYWJzKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50KSA8IDQpIHtcbiAgICAvLyB0aGUgdGV4dCBpbnB1dCBpcyBpbiBhIHNhZmUgcG9zaXRpb24gdGhhdCBkb2Vzbid0XG4gICAgLy8gcmVxdWlyZSBpdCB0byBiZSBzY3JvbGxlZCBpbnRvIHZpZXcsIGp1c3Qgc2V0IGZvY3VzIG5vd1xuICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdGVtcG9yYXJpbHkgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvY3VzIGhvbGRlciBzbyB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IGZyZWFrIG91dCB3aGlsZSBpdCdzIHRyeWluZyB0byBnZXQgdGhlIGlucHV0IGluIHBsYWNlXG4gIC8vIGF0IHRoaXMgcG9pbnQgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IHN0aWxsIGRvZXMgbm90IGhhdmUgZm9jdXNcbiAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgdHJ1ZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgaW5wdXRFbC5mb2N1cygpO1xuICAvKipcbiAgICogUmVsb2NhdGluZy9Gb2N1c2luZyBpbnB1dCBjYXVzZXMgdGhlXG4gICAqIGNsaWNrIGV2ZW50IHRvIGJlIGNhbmNlbGxlZCwgc29cbiAgICogbWFudWFsbHkgZmlyZSBvbmUgaGVyZS5cbiAgICovXG4gIHJhZigoKSA9PiBjb21wb25lbnRFbC5jbGljaygpKTtcbiAgLyogdHNsaW50OmRpc2FibGUtbmV4dC1saW5lICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxldCBzY3JvbGxDb250ZW50VGltZW91dDtcbiAgICBjb25zdCBzY3JvbGxDb250ZW50ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gY2xlYW4gdXAgbGlzdGVuZXJzIGFuZCB0aW1lb3V0c1xuICAgICAgaWYgKHNjcm9sbENvbnRlbnRUaW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbENvbnRlbnRUaW1lb3V0KTtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgICAgLy8gc2Nyb2xsIHRoZSBpbnB1dCBpbnRvIHBsYWNlXG4gICAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICAgIGF3YWl0IGNvbnRlbnRFbC5zY3JvbGxCeVBvaW50KDAsIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50LCBzY3JvbGxEYXRhLnNjcm9sbER1cmF0aW9uKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZSBzY3JvbGwgdmlldyBpcyBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBub3dcbiAgICAgIC8vIGdpdmUgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IGZvY3VzXG4gICAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgICAgIC8vIGVuc3VyZSB0aGlzIGlzIHRoZSBmb2N1c2VkIGlucHV0XG4gICAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgfTtcbiAgICBjb25zdCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICB9O1xuICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgIGNvbnN0IHNjcm9sbEVsID0gYXdhaXQgY29udGVudEVsLmdldFNjcm9sbEVsZW1lbnQoKTtcbiAgICAgIC8qKlxuICAgICAgICogc2Nyb2xsRGF0YSB3aWxsIG9ubHkgY29uc2lkZXIgdGhlIGFtb3VudCB3ZSBuZWVkXG4gICAgICAgKiB0byBzY3JvbGwgaW4gb3JkZXIgdG8gcHJvcGVybHkgYnJpbmcgdGhlIGlucHV0XG4gICAgICAgKiBpbnRvIHZpZXcuIEl0IHdpbGwgbm90IGNvbnNpZGVyIHRoZSBhbW91bnRcbiAgICAgICAqIHdlIGNhbiBzY3JvbGwgaW4gdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgICAqIEFzIGEgcmVzdWx0LCBzY3JvbGxEYXRhIG1heSByZXF1ZXN0IGEgZ3JlYXRlclxuICAgICAgICogc2Nyb2xsIHBvc2l0aW9uIHRoYW4gaXMgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICogaW4gdGhlIERPTS4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZCB0b1xuICAgICAgICogd2FpdCBmb3IgdGhlIHdlYnZpZXcgdG8gcmVzaXplL3RoZSBrZXlib2FyZFxuICAgICAgICogdG8gc2hvdyBpbiBvcmRlciBmb3IgYWRkaXRpb25hbCBzY3JvbGxcbiAgICAgICAqIGJhbmR3aWR0aCB0byBiZWNvbWUgYXZhaWxhYmxlLlxuICAgICAgICovXG4gICAgICBjb25zdCB0b3RhbFNjcm9sbEFtb3VudCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodCAtIHNjcm9sbEVsLmNsaWVudEhlaWdodDtcbiAgICAgIGlmIChzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCA+ICh0b3RhbFNjcm9sbEFtb3VudCAtIHNjcm9sbEVsLnNjcm9sbFRvcCkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9uIGlPUyBkZXZpY2VzLCB0aGUgc3lzdGVtIHdpbGwgc2hvdyBhIFwiUGFzc3dvcmRzXCIgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgICAgICAgKiBhZnRlciB0aGUgaW5pdGlhbCBrZXlib2FyZCBpcyBzaG93bi4gVGhpcyBwcmV2ZW50cyB0aGUgd2VidmlldyBmcm9tIHJlc2l6aW5nXG4gICAgICAgICAqIHVudGlsIHRoZSBcIlBhc3N3b3Jkc1wiIGJhciBpcyBzaG93biwgc28gd2UgbmVlZCB0byB3YWl0IGZvciB0aGF0IHRvIGhhcHBlbiBmaXJzdC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpbnB1dEVsLnR5cGUgPT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICAvLyBBZGQgNTBweCB0byBhY2NvdW50IGZvciB0aGUgXCJQYXNzd29yZHNcIiBiYXJcbiAgICAgICAgICBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCArPSA1MDtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgZmlyZSBpbiAyIGluc3RhbmNlczpcbiAgICAgICAgICogMS4gVGhlIGFwcCBpcyB2ZXJ5IHNsb3cuXG4gICAgICAgICAqIDIuIFRoZSBhcHAgaXMgcnVubmluZyBpbiBhIGJyb3dzZXIgb24gYW4gb2xkIE9TXG4gICAgICAgICAqIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBJb25pYyBLZXlib2FyZCBFdmVudHNcbiAgICAgICAgICovXG4gICAgICAgIHNjcm9sbENvbnRlbnRUaW1lb3V0ID0gc2V0VGltZW91dChzY3JvbGxDb250ZW50LCAxMDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBzY3JvbGxDb250ZW50KCk7XG4gIH1cbn07XG5jb25zdCBoYXNQb2ludGVyTW92ZWQgPSAodGhyZXNob2xkLCBzdGFydENvb3JkLCBlbmRDb29yZCkgPT4ge1xuICBpZiAoc3RhcnRDb29yZCAmJiBlbmRDb29yZCkge1xuICAgIGNvbnN0IGRlbHRhWCA9IChzdGFydENvb3JkLnggLSBlbmRDb29yZC54KTtcbiAgICBjb25zdCBkZWx0YVkgPSAoc3RhcnRDb29yZC55IC0gZW5kQ29vcmQueSk7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVk7XG4gICAgcmV0dXJuIGRpc3RhbmNlID4gKHRocmVzaG9sZCAqIHRocmVzaG9sZCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgUEFERElOR19USU1FUl9LRVkgPSAnJGlvblBhZGRpbmdUaW1lcic7XG5jb25zdCBlbmFibGVTY3JvbGxQYWRkaW5nID0gKGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBvbkZvY3VzaW4gPSAoZXYpID0+IHtcbiAgICBzZXRTY3JvbGxQYWRkaW5nKGV2LnRhcmdldCwga2V5Ym9hcmRIZWlnaHQpO1xuICB9O1xuICBjb25zdCBvbkZvY3Vzb3V0ID0gKGV2KSA9PiB7XG4gICAgc2V0U2Nyb2xsUGFkZGluZyhldi50YXJnZXQsIDApO1xuICB9O1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbik7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uRm9jdXNvdXQpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkZvY3Vzb3V0KTtcbiAgfTtcbn07XG5jb25zdCBzZXRTY3JvbGxQYWRkaW5nID0gKGlucHV0LCBrZXlib2FyZEhlaWdodCkgPT4ge1xuICBpZiAoaW5wdXQudGFnTmFtZSAhPT0gJ0lOUFVUJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaW5wdXQucGFyZW50RWxlbWVudCAmJiBpbnB1dC5wYXJlbnRFbGVtZW50LnRhZ05hbWUgPT09ICdJT04tSU5QVVQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbnB1dC5wYXJlbnRFbGVtZW50ICYmXG4gICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50ICYmXG4gICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnRhZ05hbWUgPT09ICdJT04tU0VBUkNIQkFSJykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBlbCA9IGlucHV0LmNsb3Nlc3QoJ2lvbi1jb250ZW50Jyk7XG4gIGlmIChlbCA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB0aW1lciA9IGVsW1BBRERJTkdfVElNRVJfS0VZXTtcbiAgaWYgKHRpbWVyKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgfVxuICBpZiAoa2V5Ym9hcmRIZWlnaHQgPiAwKSB7XG4gICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgYCR7a2V5Ym9hcmRIZWlnaHR9cHhgKTtcbiAgfVxuICBlbHNlIHtcbiAgICBlbFtQQURESU5HX1RJTUVSX0tFWV0gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCctLWtleWJvYXJkLW9mZnNldCcsICcwcHgnKTtcbiAgICB9LCAxMjApO1xuICB9XG59O1xuXG5jb25zdCBJTlBVVF9CTFVSUklORyA9IHRydWU7XG5jb25zdCBTQ1JPTExfUEFERElORyA9IHRydWU7XG5jb25zdCBzdGFydElucHV0U2hpbXMgPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBrZXlib2FyZEhlaWdodCA9IGNvbmZpZy5nZXROdW1iZXIoJ2tleWJvYXJkSGVpZ2h0JywgMjkwKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0ID0gY29uZmlnLmdldEJvb2xlYW4oJ3Njcm9sbEFzc2lzdCcsIHRydWUpO1xuICBjb25zdCBoaWRlQ2FyZXQgPSBjb25maWcuZ2V0Qm9vbGVhbignaGlkZUNhcmV0T25TY3JvbGwnLCB0cnVlKTtcbiAgY29uc3QgaW5wdXRCbHVycmluZyA9IGNvbmZpZy5nZXRCb29sZWFuKCdpbnB1dEJsdXJyaW5nJywgdHJ1ZSk7XG4gIGNvbnN0IHNjcm9sbFBhZGRpbmcgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsUGFkZGluZycsIHRydWUpO1xuICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdpb24taW5wdXQsIGlvbi10ZXh0YXJlYScpKTtcbiAgY29uc3QgaGlkZUNhcmV0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgcmVnaXN0ZXJJbnB1dCA9IGFzeW5jIChjb21wb25lbnRFbCkgPT4ge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY29tcG9uZW50T25SZWFkeShjb21wb25lbnRFbCwgcmVzb2x2ZSkpO1xuICAgIGNvbnN0IGlucHV0Um9vdCA9IGNvbXBvbmVudEVsLnNoYWRvd1Jvb3QgfHwgY29tcG9uZW50RWw7XG4gICAgY29uc3QgaW5wdXRFbCA9IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIHx8IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xuICAgIGNvbnN0IHNjcm9sbEVsID0gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWNvbnRlbnQnKTtcbiAgICBjb25zdCBmb290ZXJFbCA9ICghc2Nyb2xsRWwpID8gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWZvb3RlcicpIDogbnVsbDtcbiAgICBpZiAoIWlucHV0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEhc2Nyb2xsRWwgJiYgaGlkZUNhcmV0ICYmICFoaWRlQ2FyZXRNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCk7XG4gICAgICBoaWRlQ2FyZXRNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gICAgaWYgKCghIXNjcm9sbEVsIHx8ICEhZm9vdGVyRWwpICYmIHNjcm9sbEFzc2lzdCAmJiAhc2Nyb2xsQXNzaXN0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVTY3JvbGxBc3Npc3QoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpO1xuICAgICAgc2Nyb2xsQXNzaXN0TWFwLnNldChjb21wb25lbnRFbCwgcm1Gbik7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bnJlZ2lzdGVySW5wdXQgPSAoY29tcG9uZW50RWwpID0+IHtcbiAgICBpZiAoaGlkZUNhcmV0KSB7XG4gICAgICBjb25zdCBmbiA9IGhpZGVDYXJldE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgICBoaWRlQ2FyZXRNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICB9XG4gICAgaWYgKHNjcm9sbEFzc2lzdCkge1xuICAgICAgY29uc3QgZm4gPSBzY3JvbGxBc3Npc3RNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgICAgIGlmIChmbikge1xuICAgICAgICBmbigpO1xuICAgICAgfVxuICAgICAgc2Nyb2xsQXNzaXN0TWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgfVxuICB9O1xuICBpZiAoaW5wdXRCbHVycmluZyAmJiBJTlBVVF9CTFVSUklORykge1xuICAgIGVuYWJsZUlucHV0Qmx1cnJpbmcoKTtcbiAgfVxuICBpZiAoc2Nyb2xsUGFkZGluZyAmJiBTQ1JPTExfUEFERElORykge1xuICAgIGVuYWJsZVNjcm9sbFBhZGRpbmcoa2V5Ym9hcmRIZWlnaHQpO1xuICB9XG4gIC8vIElucHV0IG1pZ2h0IGJlIGFscmVhZHkgbG9hZGVkIGluIHRoZSBET00gYmVmb3JlIGlvbi1kZXZpY2UtaGFja3MgZGlkLlxuICAvLyBBdCB0aGlzIHBvaW50IHdlIG5lZWQgdG8gbG9vayBmb3IgYWxsIG9mIHRoZSBpbnB1dHMgbm90IHJlZ2lzdGVyZWQgeWV0XG4gIC8vIGFuZCByZWdpc3RlciB0aGVtLlxuICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgIHJlZ2lzdGVySW5wdXQoaW5wdXQpO1xuICB9XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZExvYWQnLCAoKGV2KSA9PiB7XG4gICAgcmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZFVubG9hZCcsICgoZXYpID0+IHtcbiAgICB1bnJlZ2lzdGVySW5wdXQoZXYuZGV0YWlsKTtcbiAgfSkpO1xufTtcblxuZXhwb3J0IHsgc3RhcnRJbnB1dFNoaW1zIH07XG4iXSwibmFtZXMiOlsiYSIsImFkZEV2ZW50TGlzdGVuZXIiLCJiIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInIiLCJyYWYiLCJwIiwicG9pbnRlckNvb3JkIiwiYyIsImNvbXBvbmVudE9uUmVhZHkiLCJjbG9uZU1hcCIsIldlYWtNYXAiLCJyZWxvY2F0ZUlucHV0IiwiY29tcG9uZW50RWwiLCJpbnB1dEVsIiwic2hvdWxkUmVsb2NhdGUiLCJpbnB1dFJlbGF0aXZlWSIsImhhcyIsImFkZENsb25lIiwicmVtb3ZlQ2xvbmUiLCJpc0ZvY3VzZWQiLCJpbnB1dCIsImdldFJvb3ROb2RlIiwiYWN0aXZlRWxlbWVudCIsInBhcmVudEVsIiwicGFyZW50Tm9kZSIsImNsb25lZEVsIiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGFiSW5kZXgiLCJhcHBlbmRDaGlsZCIsInNldCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJ0eCIsImRpciIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsInRyYW5zZm9ybSIsImNsb25lIiwiZ2V0IiwiZGVsZXRlIiwicmVtb3ZlIiwiZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwiLCJzY3JvbGxFbCIsInNjcm9sbEhpZGVDYXJldCIsInNob3VsZEhpZGVDYXJldCIsIm9uQmx1ciIsImhpZGVDYXJldCIsInNob3dDYXJldCIsIlNLSVBfU0VMRUNUT1IiLCJlbmFibGVJbnB1dEJsdXJyaW5nIiwiZm9jdXNlZCIsImRpZFNjcm9sbCIsImRvY3VtZW50Iiwib25TY3JvbGwiLCJvbkZvY3VzaW4iLCJvblRvdWNoZW5kIiwiZXYiLCJhY3RpdmUiLCJtYXRjaGVzIiwidGFwcGVkIiwidGFyZ2V0IiwiY2xvc2VzdCIsInNldFRpbWVvdXQiLCJibHVyIiwiU0NST0xMX0FTU0lTVF9TUEVFRCIsImdldFNjcm9sbERhdGEiLCJjb250ZW50RWwiLCJrZXlib2FyZEhlaWdodCIsIml0ZW1FbCIsImNhbGNTY3JvbGxEYXRhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZGVmYXVsdFZpZXciLCJpbm5lckhlaWdodCIsImlucHV0UmVjdCIsImNvbnRlbnRSZWN0IiwicGxhdGZvcm1IZWlnaHQiLCJpbnB1dFRvcCIsInRvcCIsImlucHV0Qm90dG9tIiwiYm90dG9tIiwidmlzaWJsZUFyZWFUb3AiLCJ2aXNpYmxlQXJlYUJvdHRvbSIsIk1hdGgiLCJtaW4iLCJzYWZlQXJlYVRvcCIsInNhZmVBcmVhQm90dG9tIiwiZGlzdGFuY2VUb0JvdHRvbSIsImRpc3RhbmNlVG9Ub3AiLCJkZXNpcmVkU2Nyb2xsQW1vdW50Iiwicm91bmQiLCJzY3JvbGxBbW91bnQiLCJkaXN0YW5jZSIsImFicyIsImR1cmF0aW9uIiwic2Nyb2xsRHVyYXRpb24iLCJtYXgiLCJzY3JvbGxQYWRkaW5nIiwiaW5wdXRTYWZlWSIsImVuYWJsZVNjcm9sbEFzc2lzdCIsImZvb3RlckVsIiwiY29vcmQiLCJ0b3VjaFN0YXJ0IiwidG91Y2hFbmQiLCJlbmRDb29yZCIsImhhc1BvaW50ZXJNb3ZlZCIsInN0b3BQcm9wYWdhdGlvbiIsImpzU2V0Rm9jdXMiLCJzY3JvbGxEYXRhIiwiZm9jdXMiLCJjbGljayIsIndpbmRvdyIsInNjcm9sbENvbnRlbnRUaW1lb3V0Iiwic2Nyb2xsQ29udGVudCIsInVuZGVmaW5lZCIsImNsZWFyVGltZW91dCIsImRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lciIsInNjcm9sbEJ5UG9pbnQiLCJnZXRTY3JvbGxFbGVtZW50IiwidG90YWxTY3JvbGxBbW91bnQiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJzY3JvbGxUb3AiLCJ0eXBlIiwidGhyZXNob2xkIiwic3RhcnRDb29yZCIsImRlbHRhWCIsIngiLCJkZWx0YVkiLCJ5IiwiUEFERElOR19USU1FUl9LRVkiLCJlbmFibGVTY3JvbGxQYWRkaW5nIiwic2V0U2Nyb2xsUGFkZGluZyIsIm9uRm9jdXNvdXQiLCJ0YWdOYW1lIiwicGFyZW50RWxlbWVudCIsImVsIiwidGltZXIiLCJzZXRQcm9wZXJ0eSIsIklOUFVUX0JMVVJSSU5HIiwiU0NST0xMX1BBRERJTkciLCJzdGFydElucHV0U2hpbXMiLCJjb25maWciLCJnZXROdW1iZXIiLCJzY3JvbGxBc3Npc3QiLCJnZXRCb29sZWFuIiwiaW5wdXRCbHVycmluZyIsImlucHV0cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJoaWRlQ2FyZXRNYXAiLCJzY3JvbGxBc3Npc3RNYXAiLCJyZWdpc3RlcklucHV0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbnB1dFJvb3QiLCJzaGFkb3dSb290IiwicXVlcnlTZWxlY3RvciIsInJtRm4iLCJ1bnJlZ2lzdGVySW5wdXQiLCJmbiIsImRldGFpbCJdLCJzb3VyY2VSb290Ijoid2VicGFjazovLy8ifQ==