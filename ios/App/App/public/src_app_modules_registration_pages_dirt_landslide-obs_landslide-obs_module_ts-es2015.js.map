{"version":3,"file":"src_app_modules_registration_pages_dirt_landslide-obs_landslide-obs_module_ts-es2015.js","mappings":"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","sources":["./src/app/modules/registration/pages/dirt/landslide-obs/landslide-obs.module.ts","./src/app/modules/registration/pages/dirt/landslide-obs/landslide-obs.page.ts","./src/app/modules/registration/pages/dirt/landslide-obs/landslide-obs.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SharedComponentsModule } from '../../../shared-components.module';\r\nimport { LandslideObsPage } from './landslide-obs.page';\r\nimport { CanDeactivateRouteGuard } from '../../can-deactivate-route.guard';\r\nimport { AddWebUrlModalPageModule } from '../../add-web-url-modal/add-web-url-modal.module';\r\nimport { SetAvalanchePositionPageModule } from '../../set-avalanche-position/set-avalanche-position.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LandslideObsPage,\r\n    canDeactivate: [CanDeactivateRouteGuard]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedComponentsModule,\r\n    AddWebUrlModalPageModule,\r\n    SetAvalanchePositionPageModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LandslideObsPage]\r\n})\r\nexport class LandslideObsPageModule {}\r\n","import { Component, NgZone } from '@angular/core';\r\nimport { BasePage } from '../../base.page';\r\nimport { RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { SetAvalanchePositionPage } from '../../set-avalanche-position/set-avalanche-position.page';\r\nimport * as L from 'leaflet';\r\nimport { BasePageService } from '../../base-page-service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-landslide-obs',\r\n  templateUrl: './landslide-obs.page.html',\r\n  styleUrls: ['./landslide-obs.page.scss']\r\n})\r\nexport class LandslideObsPage extends BasePage {\r\n  maxDateStart: string;\r\n  maxDateEnd: string;\r\n  minDateEnd: string;\r\n\r\n  constructor(\r\n    basePageService: BasePageService,\r\n    activatedRoute: ActivatedRoute,\r\n    private modalController: ModalController\r\n  ) {\r\n    super(RegistrationTid.LandSlideObs, basePageService, activatedRoute);\r\n  }\r\n\r\n  get dateIsDifferentThanObsTime() {\r\n    return (\r\n      this.registration.request.LandSlideObs.DtLandSlideTime &&\r\n      !moment(this.registration.request.LandSlideObs.DtLandSlideTime)\r\n        .startOf('day')\r\n        .isSame(moment(this.registration.request.DtObsTime).startOf('day'))\r\n    );\r\n  }\r\n\r\n  get dateEndIsDifferentThanObsTime() {\r\n    return (\r\n      this.registration.request.LandSlideObs.DtLandSlideTimeEnd &&\r\n      !moment(this.registration.request.LandSlideObs.DtLandSlideTimeEnd)\r\n        .startOf('day')\r\n        .isSame(moment(this.registration.request.DtObsTime).startOf('day'))\r\n    );\r\n  }\r\n\r\n  onInit() {\r\n    if (!this.registration.request.LandSlideObs.Urls) {\r\n      this.registration.request.LandSlideObs.Urls = [];\r\n    }\r\n    if (this.registration.request.LandSlideObs.DtLandSlideTimeEnd) {\r\n      this.maxDateStart = moment(\r\n        this.registration.request.LandSlideObs.DtLandSlideTimeEnd\r\n      ).toISOString(true);\r\n    } else {\r\n      this.maxDateStart = this.getMaxDateForNow();\r\n    }\r\n    if (this.registration.request.LandSlideObs.DtLandSlideTime) {\r\n      this.minDateEnd = moment(\r\n        this.registration.request.LandSlideObs.DtLandSlideTime\r\n      ).toISOString(true);\r\n    }\r\n    this.maxDateEnd = this.getMaxDateForNow();\r\n  }\r\n\r\n  getMaxDateForNow() {\r\n    // There is an issue when setting max date that when changing hour, the minutes is still max minutes.\r\n    // Workaround is to set minutes to 59.\r\n    return moment().toISOString(true);\r\n  }\r\n\r\n  dtTimeChanged() {\r\n    this.minDateEnd = moment(\r\n      this.registration.request.LandSlideObs.DtLandSlideTime\r\n    ).toISOString(true);\r\n    if (\r\n      this.registration.request.LandSlideObs.DtLandSlideTimeEnd &&\r\n      moment(\r\n        this.registration.request.LandSlideObs.DtLandSlideTimeEnd\r\n      ).isBefore(moment(this.registration.request.LandSlideObs.DtLandSlideTime))\r\n    ) {\r\n      this.registration.request.LandSlideObs.DtLandSlideTimeEnd = this.registration.request.LandSlideObs.DtLandSlideTime;\r\n    }\r\n  }\r\n\r\n  dtEndTimeChanged() {\r\n    this.maxDateStart = moment(\r\n      this.registration.request.LandSlideObs.DtLandSlideTimeEnd\r\n    ).toISOString(true);\r\n    if (\r\n      this.registration.request.LandSlideObs.DtLandSlideTime &&\r\n      moment(this.registration.request.LandSlideObs.DtLandSlideTime).isAfter(\r\n        moment(this.registration.request.LandSlideObs.DtLandSlideTimeEnd)\r\n      )\r\n    ) {\r\n      this.registration.request.LandSlideObs.DtLandSlideTime = this.registration.request.LandSlideObs.DtLandSlideTimeEnd;\r\n    }\r\n  }\r\n\r\n  isValid() {\r\n    return (\r\n      this.registration &&\r\n      this.registration.request.LandSlideObs &&\r\n      !!this.registration.request.LandSlideObs.DtLandSlideTime &&\r\n      !!this.registration.request.LandSlideObs.DtLandSlideTimeEnd\r\n    );\r\n  }\r\n\r\n  setDtLandSlideTimeToNow() {\r\n    this.registration.request.LandSlideObs.DtLandSlideTime = moment().toISOString(\r\n      true\r\n    );\r\n  }\r\n\r\n  setDtLandSlideTimeEndToNow() {\r\n    this.registration.request.LandSlideObs.DtLandSlideTimeEnd = moment().toISOString(\r\n      true\r\n    );\r\n  }\r\n\r\n  async setLandslidePosition() {\r\n    const relativeToLatLng = this.registration.request.ObsLocation\r\n      ? L.latLng(\r\n          this.registration.request.ObsLocation.Latitude,\r\n          this.registration.request.ObsLocation.Longitude\r\n        )\r\n      : null;\r\n    const startLatLng =\r\n      this.registration.request.LandSlideObs.StartLat &&\r\n      this.registration.request.LandSlideObs.StartLong\r\n        ? L.latLng(\r\n            this.registration.request.LandSlideObs.StartLat,\r\n            this.registration.request.LandSlideObs.StartLong\r\n          )\r\n        : null;\r\n    const endLatLng =\r\n      this.registration.request.LandSlideObs.StopLat &&\r\n      this.registration.request.LandSlideObs.StopLong\r\n        ? L.latLng(\r\n            this.registration.request.LandSlideObs.StopLat,\r\n            this.registration.request.LandSlideObs.StopLong\r\n          )\r\n        : null;\r\n    const modal = await this.modalController.create({\r\n      component: SetAvalanchePositionPage,\r\n      componentProps: {\r\n        relativeToLatLng,\r\n        startLatLng,\r\n        endLatLng,\r\n        geoHazard: this.registration.geoHazard\r\n      }\r\n    });\r\n    modal.present();\r\n    const result = await modal.onDidDismiss();\r\n    if (result.data) {\r\n      const start: L.LatLng = result.data.start;\r\n      const end: L.LatLng = result.data.end;\r\n      this.registration.request.LandSlideObs.StartLat = start.lat;\r\n      this.registration.request.LandSlideObs.StartLong = start.lng;\r\n      this.registration.request.LandSlideObs.StopLat = end.lat;\r\n      this.registration.request.LandSlideObs.StopLong = end.lng;\r\n    }\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\" defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{'REGISTRATION.DIRT.LAND_SLIDE_OBS.TITLE' | translate}}\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <app-registration-content-wrapper *ngIf=\"registration && registration.request.LandSlideObs\"\r\n    [registration]=\"registration\" [registrationTid]=\"registrationTid\" (reset)=\"reset()\">\r\n    <ion-list lines=\"full\">\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.DIRT.LAND_SLIDE_OBS.TITLE' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <ion-item (click)=\"setLandslidePosition()\">\r\n        <ion-label color=\"medium\" position=\"stacked\" class=\"ion-text-uppercase\">{{'REGISTRATION.DIRT.LAND_SLIDE_OBS.POSITION' |\r\n              translate}}</ion-label>\r\n        <ion-text class=\"ion-align-self-start ion-text-wrap\">\r\n          <ion-icon class=\"position-pin\" color=\"medium\" name=\"location\"></ion-icon>\r\n          <ng-container *ngIf=\"registration.request.LandSlideObs.StartLat else noPosition\">\r\n            {{ registration.request.LandSlideObs.StartLat |\r\n                          number:'0.3'\r\n                          }}&deg;{{'MAP_CENTER_INFO.NORTH_SHORT'|translate}},\r\n            {{ registration.request.LandSlideObs.StartLong | number:'0.3'\r\n                          }}&deg;{{'MAP_CENTER_INFO.EAST_SHORT'|translate}} - {{ registration.request.LandSlideObs.StopLat |\r\n                          number:'0.3'\r\n                          }}&deg;{{'MAP_CENTER_INFO.NORTH_SHORT'|translate}},\r\n            {{ registration.request.LandSlideObs.StopLong | number:'0.3'\r\n                          }}&deg;{{'MAP_CENTER_INFO.EAST_SHORT'|translate}}\r\n          </ng-container>\r\n        </ion-text>\r\n        <ion-icon slot=\"end\" class=\"item-detail-icon\" name=\"chevron-forward\">\r\n        </ion-icon>\r\n      </ion-item>\r\n      <ion-item [ngClass]=\"{'hasWarning': dateIsDifferentThanObsTime}\">\r\n        <ion-label [color]=\"!registration.request.LandSlideObs.DtLandSlideTime ? 'danger' : 'medium'\" position=\"stacked\"\r\n          class=\"ion-text-uppercase\">{{\r\n          'REGISTRATION.DIRT.LAND_SLIDE_OBS.DT_LAND_SLIDE_TIME' | translate }}</ion-label>\r\n        <ion-datetime color=\"medium\" [max]=\"maxDateStart\" monthShortNames=\"{{ 'MONTHS.SHORT_LIST' | translate }}\"\r\n          doneText=\"{{'DIALOGS.OK' | translate}}\" cancelText=\"{{'DIALOGS.CANCEL' | translate}}\"\r\n          display-format=\"D. MMM, YYYY HH:mm\" [(ngModel)]=\"registration.request.LandSlideObs.DtLandSlideTime\"\r\n          (ionChange)=\"dtTimeChanged()\">\r\n        </ion-datetime>\r\n        <ion-button class=\"set-to-now-button\" slot=\"end\" fill=\"outline\" color=\"medium\"\r\n          (click)=\"setDtLandSlideTimeToNow()\">\r\n          <ion-icon slot=\"start\" name=\"time\"></ion-icon> {{\"REGISTRATION.SET_TIME.NOW\" | translate}}\r\n        </ion-button>\r\n      </ion-item>\r\n      <ion-item *ngIf=\"dateIsDifferentThanObsTime\">\r\n        <ion-label color=\"danger\" class=\"ion-text-wrap\">\r\n          {{'ALERT.WARNING' | translate}}! {{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.DATE_WARNING' | translate}}\r\n        </ion-label>\r\n      </ion-item>\r\n      <ion-item [ngClass]=\"{'hasWarning': dateEndIsDifferentThanObsTime}\">\r\n        <ion-label [color]=\"!registration.request.LandSlideObs.DtLandSlideTimeEnd ? 'danger' : 'medium'\"\r\n          position=\"stacked\" class=\"ion-text-uppercase\">{{\r\n          'REGISTRATION.DIRT.LAND_SLIDE_OBS.DT_LAND_SLIDE_TIME_END' | translate }}</ion-label>\r\n        <ion-datetime [min]=\"minDateEnd\" [max]=\"maxDateEnd\" color=\"medium\"\r\n          monthShortNames=\"{{ 'MONTHS.SHORT_LIST' | translate }}\" doneText=\"{{'DIALOGS.OK' | translate}}\"\r\n          cancelText=\"{{'DIALOGS.CANCEL' | translate}}\" (ionChange)=\"dtEndTimeChanged()\"\r\n          display-format=\"D. MMM, YYYY HH:mm\" [(ngModel)]=\"registration.request.LandSlideObs.DtLandSlideTimeEnd\">\r\n        </ion-datetime>\r\n        <ion-button class=\"set-to-now-button\" slot=\"end\" fill=\"outline\" color=\"medium\"\r\n          (click)=\"setDtLandSlideTimeEndToNow()\">\r\n          <ion-icon slot=\"start\" name=\"time\"></ion-icon> {{\"REGISTRATION.SET_TIME.NOW\" | translate}}\r\n        </ion-button>\r\n      </ion-item>\r\n      <ion-item *ngIf=\"dateEndIsDifferentThanObsTime\">\r\n        <ion-label color=\"danger\" class=\"ion-text-wrap\">\r\n          {{'ALERT.WARNING' | translate}}! {{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.DATE_WARNING' | translate}}\r\n        </ion-label>\r\n      </ion-item>\r\n      <app-kdv-select title=\"REGISTRATION.DIRT.LAND_SLIDE_OBS.LANDSLIDE_TYPE\" kdvKey=\"Dirt_LandSlideKDV\"\r\n        [(value)]=\"registration.request.LandSlideObs.LandSlideTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.DIRT.LAND_SLIDE_OBS.DESTRUCTIVE_SIZE\" kdvKey=\"Dirt_LandSlideSizeKDV\"\r\n        [(value)]=\"registration.request.LandSlideObs.LandSlideSizeTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.DIRT.LAND_SLIDE_OBS.AVAL_TRIGGER\" kdvKey=\"Dirt_LandSlideTriggerKDV\"\r\n        [(value)]=\"registration.request.LandSlideObs.LandSlideTriggerTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.DIRT.LAND_SLIDE_OBS.DIRT_ACTIVITY_INFLUENCED\"\r\n        kdvKey=\"Dirt_ActivityInfluencedKDV\" [(value)]=\"registration.request.LandSlideObs.ActivityInfluencedTID\">\r\n      </app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.DIRT.LAND_SLIDE_OBS.DAMAGE_EXTENT\" kdvKey=\"DamageExtentKDV\"\r\n        [(value)]=\"registration.request.LandSlideObs.DamageExtentTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.DIRT.LAND_SLIDE_OBS.DIRT_FORECAST_ACCURATE\" kdvKey=\"ForecastAccurateKDV\"\r\n        [(value)]=\"registration.request.LandSlideObs.ForecastAccurateTID\"></app-kdv-select>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.GENERAL_COMMENT.COMMENT_TITLE' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-text-comment [(value)]=\"registration.request.LandSlideObs.Comment\"\r\n        placeholder=\"{{'REGISTRATION.GENERAL_COMMENT.COMMENT_PLACEHOLDER' | translate }}\"></app-text-comment>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.ADD_IMAGES' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-add-picture-item [geoHazard]=\"registration.geoHazard\" [registrationId]=\"registration.id\" [registrationTid]=\"registrationTid\"\r\n        [onBeforeAdd]=\"getSaveFunc()\">\r\n      </app-add-picture-item>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.ADD_WEB_URL.TITLE' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-add-web-url-item [(weburls)]=\"registration.request.LandSlideObs.Urls\"></app-add-web-url-item>\r\n    </ion-list>\r\n  </app-registration-content-wrapper>\r\n</ion-content>\r\n<ng-template #noPosition>\r\n  {{ 'REGISTRATION.DIRT.LAND_SLIDE_OBS.SET_LANDSLIDE_POSITION' | translate }} {{\r\n      'REGISTRATION.DIRT.LAND_SLIDE_OBS.IN_MAP' | translate }}\r\n</ng-template>"],"names":[],"sourceRoot":"webpack:///"}