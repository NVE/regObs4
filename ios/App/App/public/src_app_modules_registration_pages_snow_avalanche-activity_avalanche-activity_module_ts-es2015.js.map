{"version":3,"file":"src_app_modules_registration_pages_snow_avalanche-activity_avalanche-activity_module_ts-es2015.js","mappings":"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","sources":["./src/app/modules/registration/pages/base-page-service.ts","./src/app/modules/registration/pages/base.page.ts","./src/app/modules/registration/pages/snow/avalanche-activity/avalanche-activity-modal/avalanche-activity-modal.module.ts","./src/app/modules/registration/pages/snow/avalanche-activity/avalanche-activity-modal/avalanche-activity-modal.page.ts","./src/app/modules/registration/pages/snow/avalanche-activity/avalanche-activity-modal/avalanche-activity-modal.page.html","./src/app/modules/registration/pages/snow/avalanche-activity/avalanche-activity.module.ts","./src/app/modules/registration/pages/snow/avalanche-activity/avalanche-activity.page.ts","./src/app/modules/registration/pages/snow/avalanche-activity/avalanche-activity.page.html"],"sourcesContent":["import { Injectable, NgZone } from '@angular/core';\r\nimport { IRegistration, RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport { getPropertyName, isArrayType } from 'src/app/modules/common-registration/registration.helpers';\r\nimport { NewAttachmentService, RegistrationService as CommonRegistrationService } from 'src/app/modules/common-registration/registration.services';\r\nimport { RegistrationService } from '../services/registration.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { forkJoin } from 'rxjs';\r\nimport { LoggingService } from '../../shared/services/logging/logging.service';\r\n\r\nconst DEBUG_TAG = 'BasePageService';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BasePageService {\r\n  get Zone() {\r\n    return this.ngZone;\r\n  }\r\n\r\n  get RegistrationService() {\r\n    return this.registrationService;\r\n  }\r\n\r\n  get AlertController() {\r\n    return this.alertController;\r\n  }\r\n\r\n  get TranslateService() {\r\n    return this.translateService;\r\n  }\r\n\r\n  get CommonRegistrationService() {\r\n    return this.commonRegistrationService;\r\n  }\r\n\r\n  constructor(\r\n    private registrationService: RegistrationService,\r\n    private newAttachmentService: NewAttachmentService,\r\n    private commonRegistrationService: CommonRegistrationService,\r\n    private ngZone: NgZone,\r\n    private alertController: AlertController,\r\n    private translateService: TranslateService,\r\n    private loggingService: LoggingService\r\n  ) {}\r\n\r\n  async confirmLeave(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const leaveText = await this.translateService.get('REGISTRATION.REQUIRED_FIELDS_MISSING').toPromise();\r\n    return this.createResetDialog(leaveText, registration, registrationTid, onReset);\r\n  }\r\n\r\n  async confirmReset(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const leaveText = await this.translateService.get('REGISTRATION.CONFIRM_RESET').toPromise();\r\n    return this.createResetDialog(leaveText, registration, registrationTid, onReset);\r\n  }\r\n\r\n  private async createResetDialog(message: string, registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const translations = await this.translateService.get(['DIALOGS.CANCEL', 'DIALOGS.YES']).toPromise();\r\n    const alert = await this.alertController.create({\r\n      message,\r\n      buttons: [\r\n        {\r\n          text: translations['DIALOGS.CANCEL'],\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: translations['DIALOGS.YES']\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n    const result = await alert.onDidDismiss();\r\n    const reset: boolean = result.role !== 'cancel';\r\n    if (reset) {\r\n      await this.reset(registration, registrationTid, onReset);\r\n    }\r\n    return reset;\r\n  }\r\n\r\n  async reset(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    this.Zone.run(() => {\r\n      if (registrationTid) {\r\n        registration.request[getPropertyName(registrationTid)] = this.getDefaultValue(registrationTid);\r\n        this.resetImages(registration);\r\n      }\r\n      if (onReset) {\r\n        onReset();\r\n      }\r\n    });\r\n    await this.registrationService.saveRegistrationAsync(registration);\r\n  }\r\n\r\n  createDefaultProps(registration: IRegistration, registrationTid: RegistrationTid) {\r\n    const propName = getPropertyName(registrationTid);\r\n    if (!registration.request[propName]) {\r\n      // Init to new object if null\r\n      registration.request[propName] = this.getDefaultValue(registrationTid);\r\n    }\r\n  }\r\n\r\n  getDefaultValue(registrationTid: RegistrationTid) {\r\n    if (isArrayType(registrationTid)) {\r\n      return [];\r\n    } else {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  resetImages(registration: IRegistration) {\r\n    this.newAttachmentService\r\n      .getAttachments(registration.id)\r\n      .pipe(switchMap((attachments) => forkJoin(attachments.map((a) => this.newAttachmentService.removeAttachment(registration.id, a.id)))))\r\n      .subscribe(\r\n        () => {\r\n          this.loggingService.debug('Reset images complete', DEBUG_TAG);\r\n        },\r\n        (error) => {\r\n          this.loggingService.error(error, DEBUG_TAG, 'Could not reset images');\r\n        }\r\n      );\r\n  }\r\n}\r\n","import { Directive, OnInit } from '@angular/core';\r\nimport { from, of } from 'rxjs';\r\nimport { BasePageService } from './base-page-service';\r\nimport { IRegistration, RegistrationTid, SyncStatus } from 'src/app/modules/common-registration/registration.models';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { take, takeUntil, map, switchMap, tap } from 'rxjs/operators';\r\nimport { NgDestoryBase } from '../../../core/helpers/observable-helper';\r\n\r\n@Directive()\r\nexport abstract class BasePage extends NgDestoryBase implements OnInit {\r\n  registration: IRegistration;\r\n  basePageService: BasePageService;\r\n  registrationTid: RegistrationTid;\r\n  activatedRoute: ActivatedRoute;\r\n\r\n  constructor(registrationTid: RegistrationTid, basePageService: BasePageService, activatedRoute: ActivatedRoute) {\r\n    super();\r\n    this.basePageService = basePageService;\r\n    this.activatedRoute = activatedRoute;\r\n    this.registrationTid = registrationTid;\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewDidEnter() {\r\n    const id = this.activatedRoute.snapshot.params['id'];\r\n    this.basePageService.CommonRegistrationService.getRegistrationByIdShared$(id)\r\n      .pipe(\r\n        take(1),\r\n        map((reg) => {\r\n          this.basePageService.createDefaultProps(reg, this.registrationTid);\r\n          return reg;\r\n        }),\r\n        tap((reg) => {\r\n          this.registration = reg;\r\n        }),\r\n        switchMap(() => this.createInitObservable()),\r\n        takeUntil(this.ngDestroy$)\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  onInit?(): void | Promise<any>;\r\n\r\n  onBeforeLeave?(): void | Promise<any>;\r\n\r\n  onReset?(): void;\r\n\r\n  isValid?(): boolean | Promise<boolean>;\r\n\r\n  // NOTE: Remember to add canDeactivate: [CanDeactivateRouteGuard] in page module\r\n  async canLeave() {\r\n    // Check if implementation page has implemented custom isValid logic\r\n    const valid = await Promise.resolve(this.isValid ? this.isValid() : true);\r\n    // Only return alert if page is not empty and invalid\r\n    const isEmpty = await Promise.resolve(this.isEmpty());\r\n    if (!isEmpty && !valid) {\r\n      return this.basePageService.confirmLeave(this.registration, this.registrationTid, () => (this.onReset ? this.onReset() : null));\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private createInitObservable() {\r\n    if (this.onInit) {\r\n      return from(Promise.resolve(this.onInit()));\r\n    }\r\n    return of({});\r\n  }\r\n\r\n  async ionViewWillLeave() {\r\n    if (this.onBeforeLeave) {\r\n      await Promise.resolve(this.onBeforeLeave());\r\n    }\r\n    await this.save(true);\r\n  }\r\n\r\n  save(clean = false) {\r\n    this.registration.syncStatus = SyncStatus.Draft;\r\n    return this.basePageService.RegistrationService.saveRegistrationAsync(this.registration, clean);\r\n  }\r\n\r\n  getSaveFunc() {\r\n    return () => this.save();\r\n  }\r\n\r\n  async isEmpty(): Promise<boolean> {\r\n    return !(await this.basePageService.CommonRegistrationService.hasAnyDataToShowInRegistrationTypes(\r\n      this.registration,\r\n      this.registrationTid\r\n    )\r\n      .pipe(take(1))\r\n      .toPromise());\r\n  }\r\n\r\n  reset() {\r\n    return this.basePageService.confirmReset(this.registration, this.registrationTid, () => (this.onReset ? this.onReset() : null));\r\n  }\r\n\r\n  getResolvedUrl(): string {\r\n    return (\r\n      '/' +\r\n      this.activatedRoute.snapshot.pathFromRoot\r\n        .map((v) => v.url.map((segment) => segment.toString()).join('/'))\r\n        .filter((path) => !!path)\r\n        .join('/')\r\n    );\r\n  }\r\n\r\n  // getConfiguredUrl(): string {\r\n  //     return '/' + this.activatedRoute.snapshot.pathFromRoot\r\n  //         .filter(v => v.routeConfig)\r\n  //         .map(v => v.routeConfig.path)\r\n  //         .join('/');\r\n  // }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { AvalancheActivityModalPage } from './avalanche-activity-modal.page';\r\nimport { SharedComponentsModule } from '../../../../shared-components.module';\r\n\r\n@NgModule({\r\n  imports: [SharedComponentsModule],\r\n  declarations: [AvalancheActivityModalPage],\r\n  entryComponents: [AvalancheActivityModalPage]\r\n})\r\nexport class AvalancheActivityModalPageModule {}\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { AvalancheActivityObs2EditModel } from '@varsom-regobs-common/regobs-api';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { IsEmptyHelper } from '../../../../../../core/helpers/is-empty.helper';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-avalanche-activity-modal',\r\n  templateUrl: './avalanche-activity-modal.page.html',\r\n  styleUrls: ['./avalanche-activity-modal.page.scss']\r\n})\r\nexport class AvalancheActivityModalPage implements OnInit {\r\n  @Input() avalancheActivity: AvalancheActivityObs2EditModel;\r\n  @Input() dtObsTime: string;\r\n\r\n  avalancheActivityCopy: AvalancheActivityObs2EditModel;\r\n  isNew = false;\r\n  maxDate: string;\r\n\r\n  get noAvalancheActivity() {\r\n    return this.avalancheActivityCopy.EstimatedNumTID === 1;\r\n  }\r\n\r\n  set noAvalancheActivity(val: boolean) {\r\n    if (val) {\r\n      this.avalancheActivityCopy.EstimatedNumTID = 1;\r\n    } else {\r\n      this.avalancheActivityCopy.EstimatedNumTID = undefined;\r\n    }\r\n  }\r\n\r\n  get dateIsDifferentThanObsTime() {\r\n    return (\r\n      this.startDate &&\r\n      !moment(this.startDate)\r\n        .startOf('day')\r\n        .isSame(moment(this.dtObsTime).startOf('day'))\r\n    );\r\n  }\r\n\r\n  timeFrames = [\r\n    {\r\n      id: 1,\r\n      start: { h: 0, m: 0 },\r\n      end: { h: 23, m: 59 },\r\n      text: 'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.DURING_THE_DAY'\r\n    },\r\n    {\r\n      id: 2,\r\n      start: { h: 0, m: 0 },\r\n      end: { h: 6, m: 0 },\r\n      text: '0-6'\r\n    },\r\n    {\r\n      id: 3,\r\n      start: { h: 6, m: 0 },\r\n      end: { h: 12, m: 0 },\r\n      text: '6-12'\r\n    },\r\n    {\r\n      id: 4,\r\n      start: { h: 12, m: 0 },\r\n      end: { h: 18, m: 0 },\r\n      text: '12-18'\r\n    },\r\n    {\r\n      id: 5,\r\n      start: { h: 18, m: 0 },\r\n      end: { h: 23, m: 59 },\r\n      text: '18-24'\r\n    }\r\n  ];\r\n\r\n  selectedTimeFrame = 1;\r\n  startDate: string;\r\n\r\n  constructor(private modalController: ModalController) {}\r\n\r\n  async ngOnInit() {\r\n    this.maxDate = this.getMaxDateForNow();\r\n    if (this.avalancheActivity) {\r\n      this.avalancheActivityCopy = { ...this.avalancheActivity };\r\n    } else {\r\n      this.avalancheActivityCopy = {};\r\n      this.isNew = true;\r\n    }\r\n    if (\r\n      this.avalancheActivityCopy.DtStart &&\r\n      this.avalancheActivityCopy.DtEnd\r\n    ) {\r\n      const start = moment(this.avalancheActivityCopy.DtStart);\r\n      const end = moment(this.avalancheActivityCopy.DtEnd);\r\n      this.startDate = moment(this.avalancheActivityCopy.DtStart)\r\n        .startOf('day')\r\n        .toISOString(true);\r\n      const timeFrame = this.timeFrames.find(\r\n        (tf) =>\r\n          tf.start.h === start.hours() &&\r\n          tf.end.h === end.hours() &&\r\n          tf.start.m === start.minutes() &&\r\n          tf.end.m === end.minutes()\r\n      );\r\n      if (timeFrame) {\r\n        this.selectedTimeFrame = timeFrame.id;\r\n      }\r\n    } else {\r\n      this.startDate = moment(this.dtObsTime).startOf('day').toISOString(true);\r\n    }\r\n  }\r\n\r\n  getMaxDateForNow() {\r\n    // There is an issue when setting max date that when changing hour, the minutes is still max minutes.\r\n    // Workaround is to set minutes to 59.\r\n    return moment().minutes(59).toISOString(true);\r\n  }\r\n\r\n  cancel() {\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  private resetWhenNoActivityFields() {\r\n    this.avalancheActivityCopy.AvalancheExtTID = undefined;\r\n    this.avalancheActivityCopy.AvalTriggerSimpleTID = undefined;\r\n    this.avalancheActivityCopy.DestructiveSizeTID = undefined;\r\n    this.avalancheActivityCopy.AvalPropagationTID = undefined;\r\n    this.avalancheActivityCopy.ExposedHeightComboTID = undefined;\r\n    this.avalancheActivityCopy.ExposedHeight1 = undefined;\r\n    this.avalancheActivityCopy.ExposedHeight2 = undefined;\r\n    this.avalancheActivityCopy.ValidExposition = undefined;\r\n  }\r\n\r\n  ok() {\r\n    if (this.avalancheActivityCopy.EstimatedNumTID === 1) {\r\n      this.resetWhenNoActivityFields();\r\n    }\r\n    const timeFrame = this.timeFrames.find(\r\n      (tf) => tf.id === this.selectedTimeFrame\r\n    );\r\n    if (this.startDate && timeFrame) {\r\n      this.avalancheActivityCopy.DtStart = moment(this.startDate)\r\n        .hours(timeFrame.start.h)\r\n        .minutes(timeFrame.start.m)\r\n        .toISOString(true);\r\n      this.avalancheActivityCopy.DtEnd = moment(this.startDate)\r\n        .hours(timeFrame.end.h)\r\n        .minutes(timeFrame.end.m)\r\n        .toISOString(true);\r\n    }\r\n    if (this.isNew && IsEmptyHelper.isEmpty(this.avalancheActivityCopy)) {\r\n      this.modalController.dismiss(null);\r\n    } else {\r\n      this.modalController.dismiss(this.avalancheActivityCopy);\r\n    }\r\n  }\r\n\r\n  delete() {\r\n    this.modalController.dismiss({ delete: true });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button (click)=\"cancel()\">{{ 'DIALOGS.CANCEL' | translate }}</ion-button>\r\n    </ion-buttons>\r\n    <ion-title>{{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.TITLE' | translate}}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content *ngIf=\"avalancheActivityCopy\">\r\n  <ion-list lines=\"full\">\r\n    <ion-item>\r\n      <ion-label>{{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.NO_AVALANCHE_ACTIVITY' | translate}}</ion-label>\r\n      <ion-checkbox mode=\"md\" slot=\"start\" [(ngModel)]=\"noAvalancheActivity\"></ion-checkbox>\r\n    </ion-item>\r\n    <ion-item [ngClass]=\"{'hasWarning': dateIsDifferentThanObsTime}\">\r\n      <ion-label color=\"medium\" position=\"stacked\" class=\"ion-text-uppercase\">{{\r\n        'DATE' | translate }}</ion-label>\r\n      <ion-datetime color=\"medium\" monthShortNames=\"{{ 'MONTHS.SHORT_LIST' | translate }}\"\r\n        doneText=\"{{'DIALOGS.OK' | translate}}\" cancelText=\"{{'DIALOGS.CANCEL' | translate}}\"\r\n        display-format=\"D. MMM, YYYY\" [max]=\"maxDate\" [(ngModel)]=\"startDate\">\r\n      </ion-datetime>\r\n    </ion-item>\r\n    <ion-item *ngIf=\"dateIsDifferentThanObsTime\">\r\n      <ion-label color=\"danger\" class=\"ion-text-wrap\">\r\n        {{'ALERT.WARNING' | translate}}! {{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.DATE_WARNING' | translate}}\r\n      </ion-label>\r\n    </ion-item>\r\n    <ion-item>\r\n      <ion-label color=\"medium\" position=\"stacked\" class=\"ion-text-uppercase\">{{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.ESTIMATED_TIME'\r\n        | translate}}</ion-label>\r\n      <ion-select cancelText=\"{{'DIALOGS.CANCEL' | translate}}\" [(ngModel)]=\"selectedTimeFrame\"\r\n        interface=\"action-sheet\">\r\n        <ion-select-option [value]=\"timeFrame.id\" *ngFor=\"let timeFrame of timeFrames\">\r\n          {{ timeFrame.text | translate }}</ion-select-option>\r\n      </ion-select>\r\n    </ion-item>\r\n    <ng-container *ngIf=\"!noAvalancheActivity\">\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_ACTIVITY.HOW_MANY_AVALANCHES\" kdvKey=\"Snow_EstimatedNumKDV\"\r\n        [(value)]=\"avalancheActivityCopy.EstimatedNumTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.AVALANCHE_TYPE\" kdvKey=\"Snow_AvalancheExtKDV\"\r\n        [(value)]=\"avalancheActivityCopy.AvalancheExtTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.AVALANCHE_TRIGGER\" kdvKey=\"Snow_AvalTriggerSimpleKDV\"\r\n        [(value)]=\"avalancheActivityCopy.AvalTriggerSimpleTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_OBS.DESTRUCTIVE_SIZE\" kdvKey=\"Snow_DestructiveSizeKDV\"\r\n        [(value)]=\"avalancheActivityCopy.DestructiveSizeTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.PROPAGATION\" kdvKey=\"Snow_AvalPropagationKDV\"\r\n        [(value)]=\"avalancheActivityCopy.AvalPropagationTID\"></app-kdv-select>\r\n      <app-exposed-height [(exposedHeightComboTID)]=\"avalancheActivityCopy.ExposedHeightComboTID\"\r\n        [(exposedHight1)]=\"avalancheActivityCopy.ExposedHeight1\"\r\n        [(exposedHight2)]=\"avalancheActivityCopy.ExposedHeight2\"></app-exposed-height>\r\n      <app-valid-exposition [(validExposition)]=\"avalancheActivityCopy.ValidExposition\"></app-valid-exposition>\r\n    </ng-container>\r\n    <app-text-comment title=\"REGISTRATION.DANGER_OBS.COMMENT\" [(value)]=\"avalancheActivityCopy.Comment\">\r\n    </app-text-comment>\r\n  </ion-list>\r\n  <app-modal-save-or-delete-buttons (saveClicked)=\"ok()\" (deleteClicked)=\"delete()\" [showDelete]=\"!isNew\">\r\n  </app-modal-save-or-delete-buttons>\r\n</ion-content>","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AvalancheActivityPage } from './avalanche-activity.page';\r\nimport { SharedComponentsModule } from '../../../shared-components.module';\r\nimport { AvalancheActivityModalPageModule } from './avalanche-activity-modal/avalanche-activity-modal.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AvalancheActivityPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedComponentsModule,\r\n    AvalancheActivityModalPageModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [AvalancheActivityPage]\r\n})\r\nexport class AvalancheActivityPageModule {}\r\n","import { Component, NgZone } from '@angular/core';\r\nimport { RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BasePage } from '../../base.page';\r\nimport { BasePageService } from '../../base-page-service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { AvalancheActivityModalPage } from './avalanche-activity-modal/avalanche-activity-modal.page';\r\nimport {\r\n  AvalancheActivityObs2EditModel,\r\n  KdvElement\r\n} from '@varsom-regobs-common/regobs-api';\r\nimport { KdvService } from '../../../../../core/services/kdv/kdv.service';\r\nimport { Subscription, combineLatest } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-avalanche-activity',\r\n  templateUrl: './avalanche-activity.page.html',\r\n  styleUrls: ['./avalanche-activity.page.scss']\r\n})\r\nexport class AvalancheActivityPage extends BasePage {\r\n  private avalancheCause: KdvElement[];\r\n  private estimatedNumber: KdvElement[];\r\n  private kdvSubscription: Subscription;\r\n\r\n  constructor(\r\n    basePageService: BasePageService,\r\n    activatedRoute: ActivatedRoute,\r\n    private modalController: ModalController,\r\n    private ngZone: NgZone,\r\n    private kdvService: KdvService\r\n  ) {\r\n    super(\r\n      RegistrationTid.AvalancheActivityObs2,\r\n      basePageService,\r\n      activatedRoute\r\n    );\r\n    this.avalancheCause = [];\r\n    this.estimatedNumber = [];\r\n  }\r\n\r\n  onInit() {\r\n    this.kdvSubscription = combineLatest([\r\n      this.kdvService.getKdvRepositoryByKeyObservable('Snow_AvalancheExtKDV'),\r\n      this.kdvService.getKdvRepositoryByKeyObservable('Snow_EstimatedNumKDV')\r\n    ]).subscribe(([causeKdv, estimatedNumberKdv]) => {\r\n      this.avalancheCause = causeKdv;\r\n      this.estimatedNumber = estimatedNumberKdv;\r\n    });\r\n  }\r\n\r\n  onBeforeLeave() {\r\n    if (this.kdvSubscription) {\r\n      this.kdvSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  async addOrEditAvalancheActivity(index?: number) {\r\n    const modal = await this.modalController.create({\r\n      component: AvalancheActivityModalPage,\r\n      componentProps: {\r\n        avalancheActivity: this.registration.request.AvalancheActivityObs2[\r\n          index\r\n        ],\r\n        dtObsTime: this.registration.request.DtObsTime\r\n      }\r\n    });\r\n    modal.present();\r\n    const result = await modal.onDidDismiss();\r\n    this.ngZone.run(() => {\r\n      if (result.data) {\r\n        if (result.data.delete) {\r\n          this.registration.request.AvalancheActivityObs2.splice(index, 1);\r\n        } else {\r\n          const avalancheActivityObs: AvalancheActivityObs2EditModel = result.data;\r\n          if (index !== undefined) {\r\n            this.registration.request.AvalancheActivityObs2[\r\n              index\r\n            ] = avalancheActivityObs;\r\n          } else {\r\n            this.registration.request.AvalancheActivityObs2.push(\r\n              avalancheActivityObs\r\n            );\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getCause(avalancheActivityObs: AvalancheActivityObs2EditModel) {\r\n    const cause = this.avalancheCause.find(\r\n      (c) => c.Id === avalancheActivityObs.AvalancheExtTID\r\n    );\r\n    if (cause) {\r\n      return cause.Name;\r\n    } else {\r\n      return 'REGISTRATION.SNOW.AVALANCHE_PROBLEM.UNKNOWN_TYPE';\r\n    }\r\n  }\r\n\r\n  getEstimatedNumber(avalancheActivityObs: AvalancheActivityObs2EditModel) {\r\n    const kdvalue = this.estimatedNumber.find(\r\n      (c) => c.Id === avalancheActivityObs.EstimatedNumTID\r\n    );\r\n    if (kdvalue) {\r\n      return kdvalue.Name;\r\n    } else {\r\n      return 'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.UNKNOWN_NUMBER';\r\n    }\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\" defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.TITLE' | translate}}\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <app-registration-content-wrapper *ngIf=\"registration && registration.request.AvalancheActivityObs2\"\r\n    [registration]=\"registration\" [registrationTid]=\"registrationTid\" (reset)=\"reset()\">\r\n    <ion-list lines=\"full\">\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.TITLE' | translate }}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <ion-item detail=\"true\" (click)=\"addOrEditAvalancheActivity(i)\"\r\n        *ngFor=\"let avalancheActivity of registration.request.AvalancheActivityObs2; let i = index\">\r\n        <ion-label>{{ getEstimatedNumber(avalancheActivity) |\r\n          translate }}<span *ngIf=\"avalancheActivity.EstimatedNumTID !== 1\"> {{ getCause(avalancheActivity) | translate\r\n            |\r\n            lowercase\r\n            }}</span></ion-label>\r\n      </ion-item>\r\n      <ion-item (click)=\"addOrEditAvalancheActivity()\">\r\n        <ion-icon color=\"primary\" name=\"add-circle-outline\" slot=\"start\"></ion-icon>\r\n        <ion-label>{{'REGISTRATION.SNOW.AVALANCHE_ACTIVITY.ADD_NEW' | translate}}</ion-label>\r\n      </ion-item>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.ADD_IMAGES' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-add-picture-item [geoHazard]=\"registration.geoHazard\" [registrationId]=\"registration.id\"\r\n        [registrationTid]=\"registrationTid\" [onBeforeAdd]=\"getSaveFunc()\"></app-add-picture-item>\r\n    </ion-list>\r\n  </app-registration-content-wrapper>\r\n</ion-content>"],"names":[],"sourceRoot":"webpack:///"}