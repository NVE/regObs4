"use strict";
(self["webpackChunkregobs4"] = self["webpackChunkregobs4"] || []).push([["node_modules_capacitor_filesystem_dist_esm_web_js"],{

/***/ 16603:
/*!************************************************************!*\
  !*** ./node_modules/@capacitor/filesystem/dist/esm/web.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FilesystemWeb": function() { return /* binding */ FilesystemWeb; }
/* harmony export */ });
/* harmony import */ var C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ 80151);
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @capacitor/core */ 41899);



function resolve(path) {
  const posix = path.split('/').filter(item => item !== '.');
  const newPosix = [];
  posix.forEach(item => {
    if (item === '..' && newPosix.length > 0 && newPosix[newPosix.length - 1] !== '..') {
      newPosix.pop();
    } else {
      newPosix.push(item);
    }
  });
  return newPosix.join('/');
}

function isPathParent(parent, children) {
  parent = resolve(parent);
  children = resolve(children);
  const pathsA = parent.split('/');
  const pathsB = children.split('/');
  return parent !== children && pathsA.every((value, index) => value === pathsB[index]);
}

class FilesystemWeb extends _capacitor_core__WEBPACK_IMPORTED_MODULE_1__.WebPlugin {
  constructor() {
    super(...arguments);
    this.DB_VERSION = 1;
    this.DB_NAME = 'Disc';
    this._writeCmds = ['add', 'put', 'delete'];
  }

  initDb() {
    var _this = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      if (_this._db !== undefined) {
        return _this._db;
      }

      if (!('indexedDB' in window)) {
        throw _this.unavailable("This browser doesn't support IndexedDB");
      }

      return new Promise((resolve, reject) => {
        const request = indexedDB.open(_this.DB_NAME, _this.DB_VERSION);
        request.onupgradeneeded = FilesystemWeb.doUpgrade;

        request.onsuccess = () => {
          _this._db = request.result;
          resolve(request.result);
        };

        request.onerror = () => reject(request.error);

        request.onblocked = () => {
          console.warn('db blocked');
        };
      });
    })();
  }

  static doUpgrade(event) {
    const eventTarget = event.target;
    const db = eventTarget.result;

    switch (event.oldVersion) {
      case 0:
      case 1:
      default:
        {
          if (db.objectStoreNames.contains('FileStorage')) {
            db.deleteObjectStore('FileStorage');
          }

          const store = db.createObjectStore('FileStorage', {
            keyPath: 'path'
          });
          store.createIndex('by_folder', 'folder');
        }
    }
  }

  dbRequest(cmd, args) {
    var _this2 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const readFlag = _this2._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';
      return _this2.initDb().then(conn => {
        return new Promise((resolve, reject) => {
          const tx = conn.transaction(['FileStorage'], readFlag);
          const store = tx.objectStore('FileStorage');
          const req = store[cmd](...args);

          req.onsuccess = () => resolve(req.result);

          req.onerror = () => reject(req.error);
        });
      });
    })();
  }

  dbIndexRequest(indexName, cmd, args) {
    var _this3 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const readFlag = _this3._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';
      return _this3.initDb().then(conn => {
        return new Promise((resolve, reject) => {
          const tx = conn.transaction(['FileStorage'], readFlag);
          const store = tx.objectStore('FileStorage');
          const index = store.index(indexName);
          const req = index[cmd](...args);

          req.onsuccess = () => resolve(req.result);

          req.onerror = () => reject(req.error);
        });
      });
    })();
  }

  getPath(directory, uriPath) {
    const cleanedUriPath = uriPath !== undefined ? uriPath.replace(/^[/]+|[/]+$/g, '') : '';
    let fsPath = '';
    if (directory !== undefined) fsPath += '/' + directory;
    if (uriPath !== '') fsPath += '/' + cleanedUriPath;
    return fsPath;
  }

  clear() {
    var _this4 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const conn = yield _this4.initDb();
      const tx = conn.transaction(['FileStorage'], 'readwrite');
      const store = tx.objectStore('FileStorage');
      store.clear();
    })();
  }
  /**
   * Read a file from disk
   * @param options options for the file read
   * @return a promise that resolves with the read file data result
   */


  readFile(options) {
    var _this5 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this5.getPath(options.directory, options.path); // const encoding = options.encoding;


      const entry = yield _this5.dbRequest('get', [path]);
      if (entry === undefined) throw Error('File does not exist.');
      return {
        data: entry.content ? entry.content : ''
      };
    })();
  }
  /**
   * Write a file to disk in the specified location on device
   * @param options options for the file write
   * @return a promise that resolves with the file write result
   */


  writeFile(options) {
    var _this6 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this6.getPath(options.directory, options.path);

      const data = options.data;
      const doRecursive = options.recursive;
      const occupiedEntry = yield _this6.dbRequest('get', [path]);
      if (occupiedEntry && occupiedEntry.type === 'directory') throw 'The supplied path is a directory.';
      const encoding = options.encoding;
      const parentPath = path.substr(0, path.lastIndexOf('/'));
      const parentEntry = yield _this6.dbRequest('get', [parentPath]);

      if (parentEntry === undefined) {
        const subDirIndex = parentPath.indexOf('/', 1);

        if (subDirIndex !== -1) {
          const parentArgPath = parentPath.substr(subDirIndex);
          yield _this6.mkdir({
            path: parentArgPath,
            directory: options.directory,
            recursive: doRecursive
          });
        }
      }

      const now = Date.now();
      const pathObj = {
        path: path,
        folder: parentPath,
        type: 'file',
        size: data.length,
        ctime: now,
        mtime: now,
        content: !encoding && data.indexOf(',') >= 0 ? data.split(',')[1] : data
      };
      yield _this6.dbRequest('put', [pathObj]);
      return {
        uri: pathObj.path
      };
    })();
  }
  /**
   * Append to a file on disk in the specified location on device
   * @param options options for the file append
   * @return a promise that resolves with the file write result
   */


  appendFile(options) {
    var _this7 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this7.getPath(options.directory, options.path);

      let data = options.data; // const encoding = options.encoding;

      const parentPath = path.substr(0, path.lastIndexOf('/'));
      const now = Date.now();
      let ctime = now;
      const occupiedEntry = yield _this7.dbRequest('get', [path]);
      if (occupiedEntry && occupiedEntry.type === 'directory') throw 'The supplied path is a directory.';
      const parentEntry = yield _this7.dbRequest('get', [parentPath]);

      if (parentEntry === undefined) {
        const subDirIndex = parentPath.indexOf('/', 1);

        if (subDirIndex !== -1) {
          const parentArgPath = parentPath.substr(subDirIndex);
          yield _this7.mkdir({
            path: parentArgPath,
            directory: options.directory,
            recursive: true
          });
        }
      }

      if (occupiedEntry !== undefined) {
        data = occupiedEntry.content + data;
        ctime = occupiedEntry.ctime;
      }

      const pathObj = {
        path: path,
        folder: parentPath,
        type: 'file',
        size: data.length,
        ctime: ctime,
        mtime: now,
        content: data
      };
      yield _this7.dbRequest('put', [pathObj]);
    })();
  }
  /**
   * Delete a file from disk
   * @param options options for the file delete
   * @return a promise that resolves with the deleted file data result
   */


  deleteFile(options) {
    var _this8 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this8.getPath(options.directory, options.path);

      const entry = yield _this8.dbRequest('get', [path]);
      if (entry === undefined) throw Error('File does not exist.');
      const entries = yield _this8.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)]);
      if (entries.length !== 0) throw Error('Folder is not empty.');
      yield _this8.dbRequest('delete', [path]);
    })();
  }
  /**
   * Create a directory.
   * @param options options for the mkdir
   * @return a promise that resolves with the mkdir result
   */


  mkdir(options) {
    var _this9 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this9.getPath(options.directory, options.path);

      const doRecursive = options.recursive;
      const parentPath = path.substr(0, path.lastIndexOf('/'));
      const depth = (path.match(/\//g) || []).length;
      const parentEntry = yield _this9.dbRequest('get', [parentPath]);
      const occupiedEntry = yield _this9.dbRequest('get', [path]);
      if (depth === 1) throw Error('Cannot create Root directory');
      if (occupiedEntry !== undefined) throw Error('Current directory does already exist.');
      if (!doRecursive && depth !== 2 && parentEntry === undefined) throw Error('Parent directory must exist');

      if (doRecursive && depth !== 2 && parentEntry === undefined) {
        const parentArgPath = parentPath.substr(parentPath.indexOf('/', 1));
        yield _this9.mkdir({
          path: parentArgPath,
          directory: options.directory,
          recursive: doRecursive
        });
      }

      const now = Date.now();
      const pathObj = {
        path: path,
        folder: parentPath,
        type: 'directory',
        size: 0,
        ctime: now,
        mtime: now
      };
      yield _this9.dbRequest('put', [pathObj]);
    })();
  }
  /**
   * Remove a directory
   * @param options the options for the directory remove
   */


  rmdir(options) {
    var _this10 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const {
        path,
        directory,
        recursive
      } = options;

      const fullPath = _this10.getPath(directory, path);

      const entry = yield _this10.dbRequest('get', [fullPath]);
      if (entry === undefined) throw Error('Folder does not exist.');
      if (entry.type !== 'directory') throw Error('Requested path is not a directory');
      const readDirResult = yield _this10.readdir({
        path,
        directory
      });
      if (readDirResult.files.length !== 0 && !recursive) throw Error('Folder is not empty');

      for (const entry of readDirResult.files) {
        const entryPath = `${path}/${entry}`;
        const entryObj = yield _this10.stat({
          path: entryPath,
          directory
        });

        if (entryObj.type === 'file') {
          yield _this10.deleteFile({
            path: entryPath,
            directory
          });
        } else {
          yield _this10.rmdir({
            path: entryPath,
            directory,
            recursive
          });
        }
      }

      yield _this10.dbRequest('delete', [fullPath]);
    })();
  }
  /**
   * Return a list of files from the directory (not recursive)
   * @param options the options for the readdir operation
   * @return a promise that resolves with the readdir directory listing result
   */


  readdir(options) {
    var _this11 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this11.getPath(options.directory, options.path);

      const entry = yield _this11.dbRequest('get', [path]);
      if (options.path !== '' && entry === undefined) throw Error('Folder does not exist.');
      const entries = yield _this11.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)]);
      const names = entries.map(e => {
        return e.substring(path.length + 1);
      });
      return {
        files: names
      };
    })();
  }
  /**
   * Return full File URI for a path and directory
   * @param options the options for the stat operation
   * @return a promise that resolves with the file stat result
   */


  getUri(options) {
    var _this12 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this12.getPath(options.directory, options.path);

      let entry = yield _this12.dbRequest('get', [path]);

      if (entry === undefined) {
        entry = yield _this12.dbRequest('get', [path + '/']);
      }

      return {
        uri: (entry === null || entry === void 0 ? void 0 : entry.path) || path
      };
    })();
  }
  /**
   * Return data about a file
   * @param options the options for the stat operation
   * @return a promise that resolves with the file stat result
   */


  stat(options) {
    var _this13 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const path = _this13.getPath(options.directory, options.path);

      let entry = yield _this13.dbRequest('get', [path]);

      if (entry === undefined) {
        entry = yield _this13.dbRequest('get', [path + '/']);
      }

      if (entry === undefined) throw Error('Entry does not exist.');
      return {
        type: entry.type,
        size: entry.size,
        ctime: entry.ctime,
        mtime: entry.mtime,
        uri: entry.path
      };
    })();
  }
  /**
   * Rename a file or directory
   * @param options the options for the rename operation
   * @return a promise that resolves with the rename result
   */


  rename(options) {
    var _this14 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      return _this14._copy(options, true);
    })();
  }
  /**
   * Copy a file or directory
   * @param options the options for the copy operation
   * @return a promise that resolves with the copy result
   */


  copy(options) {
    var _this15 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      return _this15._copy(options, false);
    })();
  }

  requestPermissions() {
    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      return {
        publicStorage: 'granted'
      };
    })();
  }

  checkPermissions() {
    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      return {
        publicStorage: 'granted'
      };
    })();
  }
  /**
   * Function that can perform a copy or a rename
   * @param options the options for the rename operation
   * @param doRename whether to perform a rename or copy operation
   * @return a promise that resolves with the result
   */


  _copy(options, doRename = false) {
    var _this16 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      let {
        toDirectory
      } = options;
      const {
        to,
        from,
        directory: fromDirectory
      } = options;

      if (!to || !from) {
        throw Error('Both to and from must be provided');
      } // If no "to" directory is provided, use the "from" directory


      if (!toDirectory) {
        toDirectory = fromDirectory;
      }

      const fromPath = _this16.getPath(fromDirectory, from);

      const toPath = _this16.getPath(toDirectory, to); // Test that the "to" and "from" locations are different


      if (fromPath === toPath) {
        return;
      }

      if (isPathParent(fromPath, toPath)) {
        throw Error('To path cannot contain the from path');
      } // Check the state of the "to" location


      let toObj;

      try {
        toObj = yield _this16.stat({
          path: to,
          directory: toDirectory
        });
      } catch (e) {
        // To location does not exist, ensure the directory containing "to" location exists and is a directory
        const toPathComponents = to.split('/');
        toPathComponents.pop();
        const toPath = toPathComponents.join('/'); // Check the containing directory of the "to" location exists

        if (toPathComponents.length > 0) {
          const toParentDirectory = yield _this16.stat({
            path: toPath,
            directory: toDirectory
          });

          if (toParentDirectory.type !== 'directory') {
            throw new Error('Parent directory of the to path is a file');
          }
        }
      } // Cannot overwrite a directory


      if (toObj && toObj.type === 'directory') {
        throw new Error('Cannot overwrite a directory with a file');
      } // Ensure the "from" object exists


      const fromObj = yield _this16.stat({
        path: from,
        directory: fromDirectory
      }); // Set the mtime/ctime of the supplied path

      const updateTime = /*#__PURE__*/function () {
        var _ref = (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* (path, ctime, mtime) {
          const fullPath = _this16.getPath(toDirectory, path);

          const entry = yield _this16.dbRequest('get', [fullPath]);
          entry.ctime = ctime;
          entry.mtime = mtime;
          yield _this16.dbRequest('put', [entry]);
        });

        return function updateTime(_x, _x2, _x3) {
          return _ref.apply(this, arguments);
        };
      }();

      const ctime = fromObj.ctime ? fromObj.ctime : Date.now();

      switch (fromObj.type) {
        // The "from" object is a file
        case 'file':
          {
            // Read the file
            const file = yield _this16.readFile({
              path: from,
              directory: fromDirectory
            }); // Optionally remove the file

            if (doRename) {
              yield _this16.deleteFile({
                path: from,
                directory: fromDirectory
              });
            } // Write the file to the new location


            yield _this16.writeFile({
              path: to,
              directory: toDirectory,
              data: file.data
            }); // Copy the mtime/ctime of a renamed file

            if (doRename) {
              yield updateTime(to, ctime, fromObj.mtime);
            } // Resolve promise


            return;
          }

        case 'directory':
          {
            if (toObj) {
              throw Error('Cannot move a directory over an existing object');
            }

            try {
              // Create the to directory
              yield _this16.mkdir({
                path: to,
                directory: toDirectory,
                recursive: false
              }); // Copy the mtime/ctime of a renamed directory

              if (doRename) {
                yield updateTime(to, ctime, fromObj.mtime);
              }
            } catch (e) {// ignore
            } // Iterate over the contents of the from location


            const contents = (yield _this16.readdir({
              path: from,
              directory: fromDirectory
            })).files;

            for (const filename of contents) {
              // Move item from the from directory to the to directory
              yield _this16._copy({
                from: `${from}/${filename}`,
                to: `${to}/${filename}`,
                directory: fromDirectory,
                toDirectory
              }, doRename);
            } // Optionally remove the original from directory


            if (doRename) {
              yield _this16.rmdir({
                path: from,
                directory: fromDirectory
              });
            }
          }
      }
    })();
  }

}
FilesystemWeb._debug = true;

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2NhcGFjaXRvcl9maWxlc3lzdGVtX2Rpc3RfZXNtX3dlYl9qcy1lczIwMTUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBLFNBQVNDLE9BQVQsQ0FBaUJDLElBQWpCLEVBQXVCO0FBQ25CLFFBQU1DLEtBQUssR0FBR0QsSUFBSSxDQUFDRSxLQUFMLENBQVcsR0FBWCxFQUFnQkMsTUFBaEIsQ0FBdUJDLElBQUksSUFBSUEsSUFBSSxLQUFLLEdBQXhDLENBQWQ7QUFDQSxRQUFNQyxRQUFRLEdBQUcsRUFBakI7QUFDQUosRUFBQUEsS0FBSyxDQUFDSyxPQUFOLENBQWNGLElBQUksSUFBSTtBQUNsQixRQUFJQSxJQUFJLEtBQUssSUFBVCxJQUNBQyxRQUFRLENBQUNFLE1BQVQsR0FBa0IsQ0FEbEIsSUFFQUYsUUFBUSxDQUFDQSxRQUFRLENBQUNFLE1BQVQsR0FBa0IsQ0FBbkIsQ0FBUixLQUFrQyxJQUZ0QyxFQUU0QztBQUN4Q0YsTUFBQUEsUUFBUSxDQUFDRyxHQUFUO0FBQ0gsS0FKRCxNQUtLO0FBQ0RILE1BQUFBLFFBQVEsQ0FBQ0ksSUFBVCxDQUFjTCxJQUFkO0FBQ0g7QUFDSixHQVREO0FBVUEsU0FBT0MsUUFBUSxDQUFDSyxJQUFULENBQWMsR0FBZCxDQUFQO0FBQ0g7O0FBQ0QsU0FBU0MsWUFBVCxDQUFzQkMsTUFBdEIsRUFBOEJDLFFBQTlCLEVBQXdDO0FBQ3BDRCxFQUFBQSxNQUFNLEdBQUdiLE9BQU8sQ0FBQ2EsTUFBRCxDQUFoQjtBQUNBQyxFQUFBQSxRQUFRLEdBQUdkLE9BQU8sQ0FBQ2MsUUFBRCxDQUFsQjtBQUNBLFFBQU1DLE1BQU0sR0FBR0YsTUFBTSxDQUFDVixLQUFQLENBQWEsR0FBYixDQUFmO0FBQ0EsUUFBTWEsTUFBTSxHQUFHRixRQUFRLENBQUNYLEtBQVQsQ0FBZSxHQUFmLENBQWY7QUFDQSxTQUFRVSxNQUFNLEtBQUtDLFFBQVgsSUFDSkMsTUFBTSxDQUFDRSxLQUFQLENBQWEsQ0FB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Sy9CLEtBQUwsRUFBWXVDLE9BQU8sQ0FBQ3RDLEtBQXBCLENBQWhCO0FBQ0g7QUFDSixhQVhELENBWUEsT0FBT21CLENBQVAsRUFBVSxDQUNOO0FBQ0gsYUFsQmEsQ0FtQmQ7OztBQUNBLGtCQUFNc0IsUUFBUSxHQUFHLE9BQU8sT0FBSSxDQUFDN0IsT0FBTCxDQUFhO0FBQ2pDakgsY0FBQUEsSUFBSSxFQUFFb0ksSUFEMkI7QUFFakM5RCxjQUFBQSxTQUFTLEVBQUUrRDtBQUZzQixhQUFiLENBQVAsRUFHYm5CLEtBSEo7O0FBSUEsaUJBQUssTUFBTTZCLFFBQVgsSUFBdUJELFFBQXZCLEVBQWlDO0FBQzdCO0FBQ0Esb0JBQU0sT0FBSSxDQUFDbEIsS0FBTCxDQUFXO0FBQ2JRLGdCQUFBQSxJQUFJLEVBQUcsR0FBRUEsSUFBSyxJQUFHVyxRQUFTLEVBRGI7QUFFYlosZ0JBQUFBLEVBQUUsRUFBRyxHQUFFQSxFQUFHLElBQUdZLFFBQVMsRUFGVDtBQUdiekUsZ0JBQUFBLFNBQVMsRUFBRStELGFBSEU7QUFJYkgsZ0JBQUFBO0FBSmEsZUFBWCxFQUtIRCxRQUxHLENBQU47QUFNSCxhQWhDYSxDQWlDZDs7O0FBQ0EsZ0JBQUlBLFFBQUosRUFBYztBQUNWLG9CQUFNLE9BQUksQ0FBQ25CLEtBQUwsQ0FBVztBQUNiOUcsZ0JBQUFBLElBQUksRUFBRW9JLElBRE87QUFFYjlELGdCQUFBQSxTQUFTLEVBQUUrRDtBQUZFLGVBQVgsQ0FBTjtBQUlIO0FBQ0o7QUFwRUw7QUE3RG1DO0FBbUl0Qzs7QUF0ZHdDO0FBd2Q3Q2xILGFBQWEsQ0FBQzZILE1BQWQsR0FBdUIsSUFBdkIiLCJzb3VyY2VzIjpbIi4vbm9kZV9tb2R1bGVzL0BjYXBhY2l0b3IvZmlsZXN5c3RlbS9kaXN0L2VzbS93ZWIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV2ViUGx1Z2luIH0gZnJvbSAnQGNhcGFjaXRvci9jb3JlJztcbmZ1bmN0aW9uIHJlc29sdmUocGF0aCkge1xuICAgIGNvbnN0IHBvc2l4ID0gcGF0aC5zcGxpdCgnLycpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09ICcuJyk7XG4gICAgY29uc3QgbmV3UG9zaXggPSBbXTtcbiAgICBwb3NpeC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbSA9PT0gJy4uJyAmJlxuICAgICAgICAgICAgbmV3UG9zaXgubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgbmV3UG9zaXhbbmV3UG9zaXgubGVuZ3RoIC0gMV0gIT09ICcuLicpIHtcbiAgICAgICAgICAgIG5ld1Bvc2l4LnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV3UG9zaXgucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBuZXdQb3NpeC5qb2luKCcvJyk7XG59XG5mdW5jdGlvbiBpc1BhdGhQYXJlbnQocGFyZW50LCBjaGlsZHJlbikge1xuICAgIHBhcmVudCA9IHJlc29sdmUocGFyZW50KTtcbiAgICBjaGlsZHJlbiA9IHJlc29sdmUoY2hpbGRyZW4pO1xuICAgIGNvbnN0IHBhdGhzQSA9IHBhcmVudC5zcGxpdCgnLycpO1xuICAgIGNvbnN0IHBhdGhzQiA9IGNoaWxkcmVuLnNwbGl0KCcvJyk7XG4gICAgcmV0dXJuIChwYXJlbnQgIT09IGNoaWxkcmVuICYmXG4gICAgICAgIHBhdGhzQS5ldmVyeSgodmFsdWUsIGluZGV4KSA9PiB2YWx1ZSA9PT0gcGF0aHNCW2luZGV4XSkpO1xufVxuZXhwb3J0IGNsYXNzIEZpbGVzeXN0ZW1XZWIgZXh0ZW5kcyBXZWJQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLkRCX1ZFUlNJT04gPSAxO1xuICAgICAgICB0aGlzLkRCX05BTUUgPSAnRGlzYyc7XG4gICAgICAgIHRoaXMuX3dyaXRlQ21kcyA9IFsnYWRkJywgJ3B1dCcsICdkZWxldGUnXTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdERiKCkge1xuICAgICAgICBpZiAodGhpcy5fZGIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RiO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKCdpbmRleGVkREInIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMudW5hdmFpbGFibGUoXCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEluZGV4ZWREQlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKHRoaXMuREJfTkFNRSwgdGhpcy5EQl9WRVJTSU9OKTtcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gRmlsZXN5c3RlbVdlYi5kb1VwZ3JhZGU7XG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kYiA9IHJlcXVlc3QucmVzdWx0O1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignZGIgYmxvY2tlZCcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBkb1VwZ3JhZGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZXZlbnRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IGRiID0gZXZlbnRUYXJnZXQucmVzdWx0O1xuICAgICAgICBzd2l0Y2ggKGV2ZW50Lm9sZFZlcnNpb24pIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnRmlsZVN0b3JhZ2UnKSkge1xuICAgICAgICAgICAgICAgICAgICBkYi5kZWxldGVPYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnLCB7IGtleVBhdGg6ICdwYXRoJyB9KTtcbiAgICAgICAgICAgICAgICBzdG9yZS5jcmVhdGVJbmRleCgnYnlfZm9sZGVyJywgJ2ZvbGRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGRiUmVxdWVzdChjbWQsIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgcmVhZEZsYWcgPSB0aGlzLl93cml0ZUNtZHMuaW5kZXhPZihjbWQpICE9PSAtMSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5JztcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdERiKCkudGhlbigoY29ubikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eCA9IGNvbm4udHJhbnNhY3Rpb24oWydGaWxlU3RvcmFnZSddLCByZWFkRmxhZyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXEgPSBzdG9yZVtjbWRdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKHJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGRiSW5kZXhSZXF1ZXN0KGluZGV4TmFtZSwgY21kLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJlYWRGbGFnID0gdGhpcy5fd3JpdGVDbWRzLmluZGV4T2YoY21kKSAhPT0gLTEgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seSc7XG4gICAgICAgIHJldHVybiB0aGlzLmluaXREYigpLnRoZW4oKGNvbm4pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHggPSBjb25uLnRyYW5zYWN0aW9uKFsnRmlsZVN0b3JhZ2UnXSwgcmVhZEZsYWcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ0ZpbGVTdG9yYWdlJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzdG9yZS5pbmRleChpbmRleE5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcSA9IGluZGV4W2NtZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0UGF0aChkaXJlY3RvcnksIHVyaVBhdGgpIHtcbiAgICAgICAgY29uc3QgY2xlYW5lZFVyaVBhdGggPSB1cmlQYXRoICE9PSB1bmRlZmluZWQgPyB1cmlQYXRoLnJlcGxhY2UoL15bL10rfFsvXSskL2csICcnKSA6ICcnO1xuICAgICAgICBsZXQgZnNQYXRoID0gJyc7XG4gICAgICAgIGlmIChkaXJlY3RvcnkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGZzUGF0aCArPSAnLycgKyBkaXJlY3Rvcnk7XG4gICAgICAgIGlmICh1cmlQYXRoICE9PSAnJylcbiAgICAgICAgICAgIGZzUGF0aCArPSAnLycgKyBjbGVhbmVkVXJpUGF0aDtcbiAgICAgICAgcmV0dXJuIGZzUGF0aDtcbiAgICB9XG4gICAgYXN5bmMgY2xlYXIoKSB7XG4gICAgICAgIGNvbnN0IGNvbm4gPSBhd2FpdCB0aGlzLmluaXREYigpO1xuICAgICAgICBjb25zdCB0eCA9IGNvbm4udHJhbnNhY3Rpb24oWydGaWxlU3RvcmFnZSddLCAncmVhZHdyaXRlJyk7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ0ZpbGVTdG9yYWdlJyk7XG4gICAgICAgIHN0b3JlLmNsZWFyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWQgYSBmaWxlIGZyb20gZGlza1xuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBmaWxlIHJlYWRcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlYWQgZmlsZSBkYXRhIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHJlYWRGaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgLy8gY29uc3QgZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZpbGUgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICAgIHJldHVybiB7IGRhdGE6IGVudHJ5LmNvbnRlbnQgPyBlbnRyeS5jb250ZW50IDogJycgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGUgYSBmaWxlIHRvIGRpc2sgaW4gdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvbiBkZXZpY2VcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgZmlsZSB3cml0ZVxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSB3cml0ZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyB3cml0ZUZpbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBjb25zdCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICBjb25zdCBkb1JlY3Vyc2l2ZSA9IG9wdGlvbnMucmVjdXJzaXZlO1xuICAgICAgICBjb25zdCBvY2N1cGllZEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGF0aF0pKTtcbiAgICAgICAgaWYgKG9jY3VwaWVkRW50cnkgJiYgb2NjdXBpZWRFbnRyeS50eXBlID09PSAnZGlyZWN0b3J5JylcbiAgICAgICAgICAgIHRocm93ICdUaGUgc3VwcGxpZWQgcGF0aCBpcyBhIGRpcmVjdG9yeS4nO1xuICAgICAgICBjb25zdCBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICBjb25zdCBwYXJlbnRFbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhcmVudFBhdGhdKSk7XG4gICAgICAgIGlmIChwYXJlbnRFbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdWJEaXJJbmRleCA9IHBhcmVudFBhdGguaW5kZXhPZignLycsIDEpO1xuICAgICAgICAgICAgaWYgKHN1YkRpckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudEFyZ1BhdGggPSBwYXJlbnRQYXRoLnN1YnN0cihzdWJEaXJJbmRleCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ta2Rpcih7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhcmVudEFyZ1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogb3B0aW9ucy5kaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZTogZG9SZWN1cnNpdmUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcGF0aE9iaiA9IHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICBmb2xkZXI6IHBhcmVudFBhdGgsXG4gICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICBzaXplOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgICAgIGN0aW1lOiBub3csXG4gICAgICAgICAgICBtdGltZTogbm93LFxuICAgICAgICAgICAgY29udGVudDogIWVuY29kaW5nICYmIGRhdGEuaW5kZXhPZignLCcpID49IDAgPyBkYXRhLnNwbGl0KCcsJylbMV0gOiBkYXRhLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLmRiUmVxdWVzdCgncHV0JywgW3BhdGhPYmpdKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVyaTogcGF0aE9iai5wYXRoLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgdG8gYSBmaWxlIG9uIGRpc2sgaW4gdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvbiBkZXZpY2VcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgZmlsZSBhcHBlbmRcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZpbGUgd3JpdGUgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgYXBwZW5kRmlsZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICAvLyBjb25zdCBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBsZXQgY3RpbWUgPSBub3c7XG4gICAgICAgIGNvbnN0IG9jY3VwaWVkRW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAob2NjdXBpZWRFbnRyeSAmJiBvY2N1cGllZEVudHJ5LnR5cGUgPT09ICdkaXJlY3RvcnknKVxuICAgICAgICAgICAgdGhyb3cgJ1RoZSBzdXBwbGllZCBwYXRoIGlzIGEgZGlyZWN0b3J5Lic7XG4gICAgICAgIGNvbnN0IHBhcmVudEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGFyZW50UGF0aF0pKTtcbiAgICAgICAgaWYgKHBhcmVudEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YkRpckluZGV4ID0gcGFyZW50UGF0aC5pbmRleE9mKCcvJywgMSk7XG4gICAgICAgICAgICBpZiAoc3ViRGlySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50QXJnUGF0aCA9IHBhcmVudFBhdGguc3Vic3RyKHN1YkRpckluZGV4KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGFyZW50QXJnUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBvcHRpb25zLmRpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvY2N1cGllZEVudHJ5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRhdGEgPSBvY2N1cGllZEVudHJ5LmNvbnRlbnQgKyBkYXRhO1xuICAgICAgICAgICAgY3RpbWUgPSBvY2N1cGllZEVudHJ5LmN0aW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGhPYmogPSB7XG4gICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgZm9sZGVyOiBwYXJlbnRQYXRoLFxuICAgICAgICAgICAgdHlwZTogJ2ZpbGUnLFxuICAgICAgICAgICAgc2l6ZTogZGF0YS5sZW5ndGgsXG4gICAgICAgICAgICBjdGltZTogY3RpbWUsXG4gICAgICAgICAgICBtdGltZTogbm93LFxuICAgICAgICAgICAgY29udGVudDogZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ3B1dCcsIFtwYXRoT2JqXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIGZpbGUgZnJvbSBkaXNrXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIGZpbGUgZGVsZXRlXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBkZWxldGVkIGZpbGUgZGF0YSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGVGaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdGaWxlIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgdGhpcy5kYkluZGV4UmVxdWVzdCgnYnlfZm9sZGVyJywgJ2dldEFsbEtleXMnLCBbXG4gICAgICAgICAgICBJREJLZXlSYW5nZS5vbmx5KHBhdGgpLFxuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoICE9PSAwKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBpcyBub3QgZW1wdHkuJyk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdkZWxldGUnLCBbcGF0aF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkaXJlY3RvcnkuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIG1rZGlyXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBta2RpciByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBta2RpcihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGNvbnN0IGRvUmVjdXJzaXZlID0gb3B0aW9ucy5yZWN1cnNpdmU7XG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICBjb25zdCBkZXB0aCA9IChwYXRoLm1hdGNoKC9cXC8vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcGFyZW50RW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXJlbnRQYXRoXSkpO1xuICAgICAgICBjb25zdCBvY2N1cGllZEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGF0aF0pKTtcbiAgICAgICAgaWYgKGRlcHRoID09PSAxKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0Nhbm5vdCBjcmVhdGUgUm9vdCBkaXJlY3RvcnknKTtcbiAgICAgICAgaWYgKG9jY3VwaWVkRW50cnkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdDdXJyZW50IGRpcmVjdG9yeSBkb2VzIGFscmVhZHkgZXhpc3QuJyk7XG4gICAgICAgIGlmICghZG9SZWN1cnNpdmUgJiYgZGVwdGggIT09IDIgJiYgcGFyZW50RW50cnkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdQYXJlbnQgZGlyZWN0b3J5IG11c3QgZXhpc3QnKTtcbiAgICAgICAgaWYgKGRvUmVjdXJzaXZlICYmIGRlcHRoICE9PSAyICYmIHBhcmVudEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudEFyZ1BhdGggPSBwYXJlbnRQYXRoLnN1YnN0cihwYXJlbnRQYXRoLmluZGV4T2YoJy8nLCAxKSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXJlbnRBcmdQYXRoLFxuICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogb3B0aW9ucy5kaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlOiBkb1JlY3Vyc2l2ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHBhdGhPYmogPSB7XG4gICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgZm9sZGVyOiBwYXJlbnRQYXRoLFxuICAgICAgICAgICAgdHlwZTogJ2RpcmVjdG9yeScsXG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICAgICAgY3RpbWU6IG5vdyxcbiAgICAgICAgICAgIG10aW1lOiBub3csXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdwdXQnLCBbcGF0aE9ial0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBkaXJlY3RvcnlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIGRpcmVjdG9yeSByZW1vdmVcbiAgICAgKi9cbiAgICBhc3luYyBybWRpcihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgcGF0aCwgZGlyZWN0b3J5LCByZWN1cnNpdmUgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gdGhpcy5nZXRQYXRoKGRpcmVjdG9yeSwgcGF0aCk7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbZnVsbFBhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgIT09ICdkaXJlY3RvcnknKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1JlcXVlc3RlZCBwYXRoIGlzIG5vdCBhIGRpcmVjdG9yeScpO1xuICAgICAgICBjb25zdCByZWFkRGlyUmVzdWx0ID0gYXdhaXQgdGhpcy5yZWFkZGlyKHsgcGF0aCwgZGlyZWN0b3J5IH0pO1xuICAgICAgICBpZiAocmVhZERpclJlc3VsdC5maWxlcy5sZW5ndGggIT09IDAgJiYgIXJlY3Vyc2l2ZSlcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdGb2xkZXIgaXMgbm90IGVtcHR5Jyk7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgcmVhZERpclJlc3VsdC5maWxlcykge1xuICAgICAgICAgICAgY29uc3QgZW50cnlQYXRoID0gYCR7cGF0aH0vJHtlbnRyeX1gO1xuICAgICAgICAgICAgY29uc3QgZW50cnlPYmogPSBhd2FpdCB0aGlzLnN0YXQoeyBwYXRoOiBlbnRyeVBhdGgsIGRpcmVjdG9yeSB9KTtcbiAgICAgICAgICAgIGlmIChlbnRyeU9iai50eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZpbGUoeyBwYXRoOiBlbnRyeVBhdGgsIGRpcmVjdG9yeSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucm1kaXIoeyBwYXRoOiBlbnRyeVBhdGgsIGRpcmVjdG9yeSwgcmVjdXJzaXZlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdkZWxldGUnLCBbZnVsbFBhdGhdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgbGlzdCBvZiBmaWxlcyBmcm9tIHRoZSBkaXJlY3RvcnkgKG5vdCByZWN1cnNpdmUpXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSByZWFkZGlyIG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVhZGRpciBkaXJlY3RvcnkgbGlzdGluZyByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyByZWFkZGlyKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAob3B0aW9ucy5wYXRoICE9PSAnJyAmJiBlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IHRoaXMuZGJJbmRleFJlcXVlc3QoJ2J5X2ZvbGRlcicsICdnZXRBbGxLZXlzJywgW0lEQktleVJhbmdlLm9ubHkocGF0aCldKTtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBlbnRyaWVzLm1hcChlID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlLnN1YnN0cmluZyhwYXRoLmxlbmd0aCArIDEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgZmlsZXM6IG5hbWVzIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBmdWxsIEZpbGUgVVJJIGZvciBhIHBhdGggYW5kIGRpcmVjdG9yeVxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25zIGZvciB0aGUgc3RhdCBvcGVyYXRpb25cbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZpbGUgc3RhdCByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBnZXRVcmkob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBsZXQgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoICsgJy8nXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmk6IChlbnRyeSA9PT0gbnVsbCB8fCBlbnRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZW50cnkucGF0aCkgfHwgcGF0aCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGRhdGEgYWJvdXQgYSBmaWxlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSBzdGF0IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSBzdGF0IHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHN0YXQob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBsZXQgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoICsgJy8nXSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0VudHJ5IGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogZW50cnkudHlwZSxcbiAgICAgICAgICAgIHNpemU6IGVudHJ5LnNpemUsXG4gICAgICAgICAgICBjdGltZTogZW50cnkuY3RpbWUsXG4gICAgICAgICAgICBtdGltZTogZW50cnkubXRpbWUsXG4gICAgICAgICAgICB1cmk6IGVudHJ5LnBhdGgsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmFtZSBhIGZpbGUgb3IgZGlyZWN0b3J5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSByZW5hbWUgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZW5hbWUgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgcmVuYW1lKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvcHkob3B0aW9ucywgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvcHkgYSBmaWxlIG9yIGRpcmVjdG9yeVxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25zIGZvciB0aGUgY29weSBvcGVyYXRpb25cbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGNvcHkgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgY29weShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb3B5KG9wdGlvbnMsIGZhbHNlKTtcbiAgICB9XG4gICAgYXN5bmMgcmVxdWVzdFBlcm1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4geyBwdWJsaWNTdG9yYWdlOiAnZ3JhbnRlZCcgfTtcbiAgICB9XG4gICAgYXN5bmMgY2hlY2tQZXJtaXNzaW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHsgcHVibGljU3RvcmFnZTogJ2dyYW50ZWQnIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgY2FuIHBlcmZvcm0gYSBjb3B5IG9yIGEgcmVuYW1lXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSByZW5hbWUgb3BlcmF0aW9uXG4gICAgICogQHBhcmFtIGRvUmVuYW1lIHdoZXRoZXIgdG8gcGVyZm9ybSBhIHJlbmFtZSBvciBjb3B5IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgX2NvcHkob3B0aW9ucywgZG9SZW5hbWUgPSBmYWxzZSkge1xuICAgICAgICBsZXQgeyB0b0RpcmVjdG9yeSB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgeyB0bywgZnJvbSwgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5IH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAoIXRvIHx8ICFmcm9tKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignQm90aCB0byBhbmQgZnJvbSBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgbm8gXCJ0b1wiIGRpcmVjdG9yeSBpcyBwcm92aWRlZCwgdXNlIHRoZSBcImZyb21cIiBkaXJlY3RvcnlcbiAgICAgICAgaWYgKCF0b0RpcmVjdG9yeSkge1xuICAgICAgICAgICAgdG9EaXJlY3RvcnkgPSBmcm9tRGlyZWN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZyb21QYXRoID0gdGhpcy5nZXRQYXRoKGZyb21EaXJlY3RvcnksIGZyb20pO1xuICAgICAgICBjb25zdCB0b1BhdGggPSB0aGlzLmdldFBhdGgodG9EaXJlY3RvcnksIHRvKTtcbiAgICAgICAgLy8gVGVzdCB0aGF0IHRoZSBcInRvXCIgYW5kIFwiZnJvbVwiIGxvY2F0aW9ucyBhcmUgZGlmZmVyZW50XG4gICAgICAgIGlmIChmcm9tUGF0aCA9PT0gdG9QYXRoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUGF0aFBhcmVudChmcm9tUGF0aCwgdG9QYXRoKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1RvIHBhdGggY2Fubm90IGNvbnRhaW4gdGhlIGZyb20gcGF0aCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIHRoZSBzdGF0ZSBvZiB0aGUgXCJ0b1wiIGxvY2F0aW9uXG4gICAgICAgIGxldCB0b09iajtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRvT2JqID0gYXdhaXQgdGhpcy5zdGF0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiB0byxcbiAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIFRvIGxvY2F0aW9uIGRvZXMgbm90IGV4aXN0LCBlbnN1cmUgdGhlIGRpcmVjdG9yeSBjb250YWluaW5nIFwidG9cIiBsb2NhdGlvbiBleGlzdHMgYW5kIGlzIGEgZGlyZWN0b3J5XG4gICAgICAgICAgICBjb25zdCB0b1BhdGhDb21wb25lbnRzID0gdG8uc3BsaXQoJy8nKTtcbiAgICAgICAgICAgIHRvUGF0aENvbXBvbmVudHMucG9wKCk7XG4gICAgICAgICAgICBjb25zdCB0b1BhdGggPSB0b1BhdGhDb21wb25lbnRzLmpvaW4oJy8nKTtcbiAgICAgICAgICAgIC8vIENoZWNrIHRoZSBjb250YWluaW5nIGRpcmVjdG9yeSBvZiB0aGUgXCJ0b1wiIGxvY2F0aW9uIGV4aXN0c1xuICAgICAgICAgICAgaWYgKHRvUGF0aENvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvUGFyZW50RGlyZWN0b3J5ID0gYXdhaXQgdGhpcy5zdGF0KHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogdG9QYXRoLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0b1BhcmVudERpcmVjdG9yeS50eXBlICE9PSAnZGlyZWN0b3J5Jykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcmVudCBkaXJlY3Rvcnkgb2YgdGhlIHRvIHBhdGggaXMgYSBmaWxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENhbm5vdCBvdmVyd3JpdGUgYSBkaXJlY3RvcnlcbiAgICAgICAgaWYgKHRvT2JqICYmIHRvT2JqLnR5cGUgPT09ICdkaXJlY3RvcnknKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBvdmVyd3JpdGUgYSBkaXJlY3Rvcnkgd2l0aCBhIGZpbGUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbnN1cmUgdGhlIFwiZnJvbVwiIG9iamVjdCBleGlzdHNcbiAgICAgICAgY29uc3QgZnJvbU9iaiA9IGF3YWl0IHRoaXMuc3RhdCh7XG4gICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU2V0IHRoZSBtdGltZS9jdGltZSBvZiB0aGUgc3VwcGxpZWQgcGF0aFxuICAgICAgICBjb25zdCB1cGRhdGVUaW1lID0gYXN5bmMgKHBhdGgsIGN0aW1lLCBtdGltZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZnVsbFBhdGggPSB0aGlzLmdldFBhdGgodG9EaXJlY3RvcnksIHBhdGgpO1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtmdWxsUGF0aF0pKTtcbiAgICAgICAgICAgIGVudHJ5LmN0aW1lID0gY3RpbWU7XG4gICAgICAgICAgICBlbnRyeS5tdGltZSA9IG10aW1lO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ3B1dCcsIFtlbnRyeV0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjdGltZSA9IGZyb21PYmouY3RpbWUgPyBmcm9tT2JqLmN0aW1lIDogRGF0ZS5ub3coKTtcbiAgICAgICAgc3dpdGNoIChmcm9tT2JqLnR5cGUpIHtcbiAgICAgICAgICAgIC8vIFRoZSBcImZyb21cIiBvYmplY3QgaXMgYSBmaWxlXG4gICAgICAgICAgICBjYXNlICdmaWxlJzoge1xuICAgICAgICAgICAgICAgIC8vIFJlYWQgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5yZWFkRmlsZSh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGZyb20sXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogZnJvbURpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPcHRpb25hbGx5IHJlbW92ZSB0aGUgZmlsZVxuICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZpbGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogZnJvbURpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBmaWxlIHRvIHRoZSBuZXcgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlRmlsZSh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHRvLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBmaWxlLmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgbXRpbWUvY3RpbWUgb2YgYSByZW5hbWVkIGZpbGVcbiAgICAgICAgICAgICAgICBpZiAoZG9SZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlVGltZSh0bywgY3RpbWUsIGZyb21PYmoubXRpbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHByb21pc2VcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdkaXJlY3RvcnknOiB7XG4gICAgICAgICAgICAgICAgaWYgKHRvT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdDYW5ub3QgbW92ZSBhIGRpcmVjdG9yeSBvdmVyIGFuIGV4aXN0aW5nIG9iamVjdCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHRvIGRpcmVjdG9yeVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiB0b0RpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBtdGltZS9jdGltZSBvZiBhIHJlbmFtZWQgZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlVGltZSh0bywgY3RpbWUsIGZyb21PYmoubXRpbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGNvbnRlbnRzIG9mIHRoZSBmcm9tIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudHMgPSAoYXdhaXQgdGhpcy5yZWFkZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgIH0pKS5maWxlcztcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGVuYW1lIG9mIGNvbnRlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgaXRlbSBmcm9tIHRoZSBmcm9tIGRpcmVjdG9yeSB0byB0aGUgdG8gZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NvcHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogYCR7ZnJvbX0vJHtmaWxlbmFtZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IGAke3RvfS8ke2ZpbGVuYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0RpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgfSwgZG9SZW5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPcHRpb25hbGx5IHJlbW92ZSB0aGUgb3JpZ2luYWwgZnJvbSBkaXJlY3RvcnlcbiAgICAgICAgICAgICAgICBpZiAoZG9SZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ybWRpcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5GaWxlc3lzdGVtV2ViLl9kZWJ1ZyA9IHRydWU7XG4iXSwibmFtZXMiOlsiV2ViUGx1Z2luIiwicmVzb2x2ZSIsInBhdGgiLCJwb3NpeCIsInNwbGl0IiwiZmlsdGVyIiwiaXRlbSIsIm5ld1Bvc2l4IiwiZm9yRWFjaCIsImxlbmd0aCIsInBvcCIsInB1c2giLCJqb2luIiwiaXNQYXRoUGFyZW50IiwicGFyZW50IiwiY2hpbGRyZW4iLCJwYXRoc0EiLCJwYXRoc0IiLCJldmVyeSIsInZhbHVlIiwiaW5kZXgiLCJGaWxlc3lzdGVtV2ViIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJEQl9WRVJTSU9OIiwiREJfTkFNRSIsIl93cml0ZUNtZHMiLCJpbml0RGIiLCJfZGIiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJ1bmF2YWlsYWJsZSIsIlByb21pc2UiLCJyZWplY3QiLCJyZXF1ZXN0IiwiaW5kZXhlZERCIiwib3BlbiIsIm9udXBncmFkZW5lZWRlZCIsImRvVXBncmFkZSIsIm9uc3VjY2VzcyIsInJlc3VsdCIsIm9uZXJyb3IiLCJlcnJvciIsIm9uYmxvY2tlZCIsImNvbnNvbGUiLCJ3YXJuIiwiZXZlbnQiLCJldmVudFRhcmdldCIsInRhcmdldCIsImRiIiwib2xkVmVyc2lvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJjb250YWlucyIsImRlbGV0ZU9iamVjdFN0b3JlIiwic3RvcmUiLCJjcmVhdGVPYmplY3RTdG9yZSIsImtleVBhdGgiLCJjcmVhdGVJbmRleCIsImRiUmVxdWVzdCIsImNtZCIsImFyZ3MiLCJyZWFkRmxhZyIsImluZGV4T2YiLCJ0aGVuIiwiY29ubiIsInR4IiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsInJlcSIsImRiSW5kZXhSZXF1ZXN0IiwiaW5kZXhOYW1lIiwiZ2V0UGF0aCIsImRpcmVjdG9yeSIsInVyaVBhdGgiLCJjbGVhbmVkVXJpUGF0aCIsInJlcGxhY2UiLCJmc1BhdGgiLCJjbGVhciIsInJlYWRGaWxlIiwib3B0aW9ucyIsImVudHJ5IiwiRXJyb3IiLCJkYXRhIiwiY29udGVudCIsIndyaXRlRmlsZSIsImRvUmVjdXJzaXZlIiwicmVjdXJzaXZlIiwib2NjdXBpZWRFbnRyeSIsInR5cGUiLCJlbmNvZGluZyIsInBhcmVudFBhdGgiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInBhcmVudEVudHJ5Iiwic3ViRGlySW5kZXgiLCJwYXJlbnRBcmdQYXRoIiwibWtkaXIiLCJub3ciLCJEYXRlIiwicGF0aE9iaiIsImZvbGRlciIsInNpemUiLCJjdGltZSIsIm10aW1lIiwidXJpIiwiYXBwZW5kRmlsZSIsImRlbGV0ZUZpbGUiLCJlbnRyaWVzIiwiSURCS2V5UmFuZ2UiLCJvbmx5IiwiZGVwdGgiLCJtYXRjaCIsInJtZGlyIiwiZnVsbFBhdGgiLCJyZWFkRGlyUmVzdWx0IiwicmVhZGRpciIsImZpbGVzIiwiZW50cnlQYXRoIiwiZW50cnlPYmoiLCJzdGF0IiwibmFtZXMiLCJtYXAiLCJlIiwic3Vic3RyaW5nIiwiZ2V0VXJpIiwicmVuYW1lIiwiX2NvcHkiLCJjb3B5IiwicmVxdWVzdFBlcm1pc3Npb25zIiwicHVibGljU3RvcmFnZSIsImNoZWNrUGVybWlzc2lvbnMiLCJkb1JlbmFtZSIsInRvRGlyZWN0b3J5IiwidG8iLCJmcm9tIiwiZnJvbURpcmVjdG9yeSIsImZyb21QYXRoIiwidG9QYXRoIiwidG9PYmoiLCJ0b1BhdGhDb21wb25lbnRzIiwidG9QYXJlbnREaXJlY3RvcnkiLCJmcm9tT2JqIiwidXBkYXRlVGltZSIsImZpbGUiLCJjb250ZW50cyIsImZpbGVuYW1lIiwiX2RlYnVnIl0sInNvdXJjZVJvb3QiOiJ3ZWJwYWNrOi8vLyJ9