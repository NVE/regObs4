(function () {
  "use strict";

  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  (self["webpackChunkregobs4"] = self["webpackChunkregobs4"] || []).push([["node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js"], {
    /***/
    72178: function _(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
      __webpack_require__.r(__webpack_exports__);
      /* harmony export */


      __webpack_require__.d(__webpack_exports__, {
        /* harmony export */
        "ion_infinite_scroll": function ion_infinite_scroll() {
          return (
            /* binding */
            InfiniteScroll
          );
        },

        /* harmony export */
        "ion_infinite_scroll_content": function ion_infinite_scroll_content() {
          return (
            /* binding */
            InfiniteScrollContent
          );
        }
        /* harmony export */

      });
      /* harmony import */


      var C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */
      80151);
      /* harmony import */


      var _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./index-7a8b7a1c.js */
      76842);
      /* harmony import */


      var _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! ./ionic-global-63a97a32.js */
      33124);
      /* harmony import */


      var _index_9e3fe806_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! ./index-9e3fe806.js */
      32986);

      var infiniteScrollCss = "ion-infinite-scroll{display:none;width:100%}.infinite-scroll-enabled{display:block}";

      var InfiniteScroll = /*#__PURE__*/function () {
        function InfiniteScroll(hostRef) {
          var _this3 = this;

          _classCallCheck(this, InfiniteScroll);

          (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
          this.ionInfinite = (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionInfinite", 7);
          this.thrPx = 0;
          this.thrPc = 0;
          this.didFire = false;
          this.isBusy = false;
          this.isLoading = false;
          /**
           * The threshold distance from the bottom
           * of the content to call the `infinite` output event when scrolled.
           * The threshold value can be either a percent, or
           * in pixels. For example, use the value of `10%` for the `infinite`
           * output event to get called when the user has scrolled 10%
           * from the bottom of the page. Use the value `100px` when the
           * scroll is within 100 pixels from the bottom of the page.
           */

          this.threshold = '15%';
          /**
           * If `true`, the infinite scroll will be hidden and scroll event listeners
           * will be removed.
           *
           * Set this to true to disable the infinite scroll from actively
           * trying to receive new data while scrolling. This is useful
           * when it is known that there is no more data that can be added, and
           * the infinite scroll is no longer needed.
           */

          this.disabled = false;
          /**
           * The position of the infinite scroll element.
           * The value can be either `top` or `bottom`.
           */

          this.position = 'bottom';

          this.onScroll = function () {
            var scrollEl = _this3.scrollEl;

            if (!scrollEl || !_this3.canStart()) {
              return 1;
            }

            var infiniteHeight = _this3.el.offsetHeight;

            if (infiniteHeight === 0) {
              // if there is no height of this element then do nothing
              return 2;
            }

            var scrollTop = scrollEl.scrollTop;
            var scrollHeight = scrollEl.scrollHeight;
            var height = scrollEl.offsetHeight;
            var threshold = _this3.thrPc !== 0 ? height * _this3.thrPc : _this3.thrPx;
            var distanceFromInfinite = _this3.position === 'bottom' ? scrollHeight - infiniteHeight - scrollTop - threshold - height : scrollTop - infiniteHeight - threshold;

            if (distanceFromInfinite < 0) {
              if (!_this3.didFire) {
                _this3.isLoading = true;
                _this3.didFire = true;

                _this3.ionInfinite.emit();

                return 3;
              }
            } else {
              _this3.didFire = false;
            }

            return 4;
          };
        }

        _createClass(InfiniteScroll, [{
          key: "thresholdChanged",
          value: function thresholdChanged() {
            var val = this.threshold;

            if (val.lastIndexOf('%') > -1) {
              this.thrPx = 0;
              this.thrPc = parseFloat(val) / 100;
            } else {
              this.thrPx = parseFloat(val);
              this.thrPc = 0;
            }
          }
        }, {
          key: "disabledChanged",
          value: function disabledChanged() {
            var disabled = this.disabled;

            if (disabled) {
              this.isLoading = false;
              this.isBusy = false;
            }

            this.enableScrollEvents(!disabled);
          }
        }, {
          key: "connectedCallback",
          value: function connectedCallback() {
            var _this = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
              var contentEl;
              return regeneratorRuntime.wrap(function _callee$(_context) {
                while (1) {
                  switch (_context.prev = _context.next) {
                    case 0:
                      contentEl = _this.el.closest('ion-content');

                      if (contentEl) {
                        _context.next = 4;
                        break;
                      }

                      console.error('<ion-infinite-scroll> must be used inside an <ion-content>');
                      return _context.abrupt("return");

                    case 4:
                      _context.next = 6;
                      return contentEl.getScrollElement();

                    case 6:
                      _this.scrollEl = _context.sent;

                      _this.thresholdChanged();

                      _this.disabledChanged();

                      if (_this.position === 'top') {
                        (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.c)(function () {
                          if (_this.scrollEl) {
                            _this.scrollEl.scrollTop = _this.scrollEl.scrollHeight - _this.scrollEl.clientHeight;
                          }
                        });
                      }

                    case 10:
                    case "end":
                      return _context.stop();
                  }
                }
              }, _callee);
            }))();
          }
        }, {
          key: "disconnectedCallback",
          value: function disconnectedCallback() {
            this.enableScrollEvents(false);
            this.scrollEl = undefined;
          }
          /**
           * Call `complete()` within the `ionInfinite` output event handler when
           * your async operation has completed. For example, the `loading`
           * state is while the app is performing an asynchronous operation,
           * such as receiving more data from an AJAX request to add more items
           * to a data list. Once the data has been received and UI updated, you
           * then call this method to signify that the loading has completed.
           * This method will change the infinite scroll's state from `loading`
           * to `enabled`.
           */

        }, {
          key: "complete",
          value: function complete() {
            var _this2 = this;

            return (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
              var scrollEl, prev;
              return regeneratorRuntime.wrap(function _callee2$(_context2) {
                while (1) {
                  switch (_context2.prev = _context2.next) {
                    case 0:
                      scrollEl = _this2.scrollEl;

                      if (!(!_this2.isLoading || !scrollEl)) {
                        _context2.next = 3;
                        break;
                      }

                      return _context2.abrupt("return");

                    case 3:
                      _this2.isLoading = false;

                      if (_this2.position === 'top') {
                        /**
                         * New content is being added at the top, but the scrollTop position stays the same,
                         * which causes a scroll jump visually. This algorithm makes sure to prevent this.
                         * (Frame 1)
                         *    - complete() is called, but the UI hasn't had time to update yet.
                         *    - Save the current content dimensions.
                         *    - Wait for the next frame using _dom.read, so the UI will be updated.
                         * (Frame 2)
                         *    - Read the new content dimensions.
                         *    - Calculate the height difference and the new scroll position.
                         *    - Delay the scroll position change until other possible dom reads are done using _dom.write to be performant.
                         * (Still frame 2, if I'm correct)
                         *    - Change the scroll position (= visually maintain the scroll position).
                         *    - Change the state to re-enable the InfiniteScroll.
                         *    - This should be after changing the scroll position, or it could
                         *    cause the InfiniteScroll to be triggered again immediately.
                         * (Frame 3)
                         *    Done.
                         */
                        _this2.isBusy = true; // ******** DOM READ ****************
                        // Save the current content dimensions before the UI updates

                        prev = scrollEl.scrollHeight - scrollEl.scrollTop; // ******** DOM READ ****************

                        requestAnimationFrame(function () {
                          (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.f)(function () {
                            // UI has updated, save the new content dimensions
                            var scrollHeight = scrollEl.scrollHeight; // New content was added on top, so the scroll position should be changed immediately to prevent it from jumping around

                            var newScrollTop = scrollHeight - prev; // ******** DOM WRITE ****************

                            requestAnimationFrame(function () {
                              (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.c)(function () {
                                scrollEl.scrollTop = newScrollTop;
                                _this2.isBusy = false;
                              });
                            });
                          });
                        });
                      }

                    case 5:
                    case "end":
                      return _context2.stop();
                  }
                }
              }, _callee2);
            }))();
          }
        }, {
          key: "canStart",
          value: function canStart() {
            return !this.disabled && !this.isBusy && !!this.scrollEl && !this.isLoading;
          }
        }, {
          key: "enableScrollEvents",
          value: function enableScrollEvents(shouldListen) {
            if (this.scrollEl) {
              if (shouldListen) {
                this.scrollEl.addEventListener('scroll', this.onScroll);
              } else {
                this.scrollEl.removeEventListener('scroll', this.onScroll);
              }
            }
          }
        }, {
          key: "render",
          value: function render() {
            var _class;

            var mode = (0, _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
            var disabled = this.disabled;
            return (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.H, {
              "class": (_class = {}, _defineProperty(_class, mode, true), _defineProperty(_class, 'infinite-scroll-loading', this.isLoading), _defineProperty(_class, 'infinite-scroll-enabled', !disabled), _class)
            });
          }
        }, {
          key: "el",
          get: function get() {
            return (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
          }
        }], [{
          key: "watchers",
          get: function get() {
            return {
              "threshold": ["thresholdChanged"],
              "disabled": ["disabledChanged"]
            };
          }
        }]);

        return InfiniteScroll;
      }();

      InfiniteScroll.style = infiniteScrollCss;
      var infiniteScrollContentIosCss = "ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{margin-left:32px;margin-right:32px;margin-top:4px;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.infinite-loading-text{margin-left:unset;margin-right:unset;-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px}}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-ios .infinite-loading-text{color:var(--ion-color-step-600, #666666)}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-small-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, #666666)}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, #666666)}";
      var infiniteScrollContentMdCss = "ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{margin-left:32px;margin-right:32px;margin-top:4px;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.infinite-loading-text{margin-left:unset;margin-right:unset;-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px}}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-md .infinite-loading-text{color:var(--ion-color-step-600, #666666)}.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-small-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, #666666)}.infinite-scroll-content-md .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, #666666)}";

      var InfiniteScrollContent = /*#__PURE__*/function () {
        function InfiniteScrollContent(hostRef) {
          _classCallCheck(this, InfiniteScrollContent);

          (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
        }

        _createClass(InfiniteScrollContent, [{
          key: "componentDidLoad",
          value: function componentDidLoad() {
            if (this.loadingSpinner === undefined) {
              var mode = (0, _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
              this.loadingSpinner = _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.c.get('infiniteLoadingSpinner', _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.c.get('spinner', mode === 'ios' ? 'lines' : 'crescent'));
            }
          }
        }, {
          key: "render",
          value: function render() {
            var _class2;

            var mode = (0, _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
            return (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.H, {
              "class": (_class2 = {}, _defineProperty(_class2, mode, true), _defineProperty(_class2, "infinite-scroll-content-".concat(mode), true), _class2)
            }, (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
              "class": "infinite-loading"
            }, this.loadingSpinner && (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
              "class": "infinite-loading-spinner"
            }, (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("ion-spinner", {
              name: this.loadingSpinner
            })), this.loadingText && (0, _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
              "class": "infinite-loading-text",
              innerHTML: (0, _index_9e3fe806_js__WEBPACK_IMPORTED_MODULE_3__.s)(this.loadingText)
            })));
          }
        }]);

        return InfiniteScrollContent;
      }();

      InfiniteScrollContent.style = {
        ios: infiniteScrollContentIosCss,
        md: infiniteScrollContentMdCss
      };
      /***/
    }
  }]);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0Q7QUFqQndCOztBQUFBO0FBQUEsU0FBM0I7O0FBbUJBTywyQkFBcUIsQ0FBQ0gsS0FBdEJHLEdBQThCO0FBQzVCUSxXQUFHLEVBQUVWLDJCQUR1QjtBQUU1QlcsVUFBRSxFQUFFVjtBQUZ3QixPQUE5QkM7OzsiLCJuYW1lcyI6WyJpbmZpbml0ZVNjcm9sbENzcyIsIkluZmluaXRlU2Nyb2xsIiwiY29uc3RydWN0b3IiLCJob3N0UmVmIiwicmVnaXN0ZXJJbnN0YW5jZSIsImlvbkluZmluaXRlIiwiY3JlYXRlRXZlbnQiLCJ0aHJQeCIsInRoclBjIiwiZGlkRmlyZSIsImlzQnVzeSIsImlzTG9hZGluZyIsInRocmVzaG9sZCIsImRpc2FibGVkIiwicG9zaXRpb24iLCJvblNjcm9sbCIsInNjcm9sbEVsIiwiY2FuU3RhcnQiLCJpbmZpbml0ZUhlaWdodCIsImVsIiwib2Zmc2V0SGVpZ2h0Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwiaGVpZ2h0IiwiZGlzdGFuY2VGcm9tSW5maW5pdGUiLCJlbWl0IiwidGhyZXNob2xkQ2hhbmdlZCIsInZhbCIsImxhc3RJbmRleE9mIiwicGFyc2VGbG9hdCIsImRpc2FibGVkQ2hhbmdlZCIsImVuYWJsZVNjcm9sbEV2ZW50cyIsImNvbm5lY3RlZENhbGxiYWNrIiwiY29udGVudEVsIiwiX3RoaXMiLCJjbG9zZXN0IiwiY29uc29sZSIsImVycm9yIiwiZ2V0U2Nyb2xsRWxlbWVudCIsIndyaXRlVGFzayIsImNsaWVudEhlaWdodCIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwidW5kZWZpbmVkIiwiY29tcGxldGUiLCJfdGhpczIiLCJwcmV2IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVhZFRhc2siLCJuZXdTY3JvbGxUb3AiLCJzaG91bGRMaXN0ZW4iLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbmRlciIsIm1vZGUiLCJnZXRJb25Nb2RlIiwiaCIsIkhvc3QiLCJjbGFzcyIsImdldEVsZW1lbnQiLCJzdHlsZSIsImluZmluaXRlU2Nyb2xsQ29udGVudElvc0NzcyIsImluZmluaXRlU2Nyb2xsQ29udGVudE1kQ3NzIiwiSW5maW5pdGVTY3JvbGxDb250ZW50IiwiY29tcG9uZW50RGlkTG9hZCIsImxvYWRpbmdTcGlubmVyIiwiY29uZmlnIiwibmFtZSIsImxvYWRpbmdUZXh0IiwiaW5uZXJIVE1MIiwic2FuaXRpemVET01TdHJpbmciLCJpb3MiLCJtZCJdLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lvbi1pbmZpbml0ZS1zY3JvbGxfMi5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGUgYXMgY3JlYXRlRXZlbnQsIGMgYXMgd3JpdGVUYXNrLCBmIGFzIHJlYWRUYXNrLCBoLCBpIGFzIGdldEVsZW1lbnQsIEggYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtN2E4YjdhMWMuanMnO1xuaW1wb3J0IHsgYiBhcyBnZXRJb25Nb2RlLCBjIGFzIGNvbmZpZyB9IGZyb20gJy4vaW9uaWMtZ2xvYmFsLTYzYTk3YTMyLmpzJztcbmltcG9ydCB7IHMgYXMgc2FuaXRpemVET01TdHJpbmcgfSBmcm9tICcuL2luZGV4LTllM2ZlODA2LmpzJztcblxuY29uc3QgaW5maW5pdGVTY3JvbGxDc3MgPSBcImlvbi1pbmZpbml0ZS1zY3JvbGx7ZGlzcGxheTpub25lO3dpZHRoOjEwMCV9LmluZmluaXRlLXNjcm9sbC1lbmFibGVke2Rpc3BsYXk6YmxvY2t9XCI7XG5cbmNvbnN0IEluZmluaXRlU2Nyb2xsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmlvbkluZmluaXRlID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25JbmZpbml0ZVwiLCA3KTtcbiAgICB0aGlzLnRoclB4ID0gMDtcbiAgICB0aGlzLnRoclBjID0gMDtcbiAgICB0aGlzLmRpZEZpcmUgPSBmYWxzZTtcbiAgICB0aGlzLmlzQnVzeSA9IGZhbHNlO1xuICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogVGhlIHRocmVzaG9sZCBkaXN0YW5jZSBmcm9tIHRoZSBib3R0b21cbiAgICAgKiBvZiB0aGUgY29udGVudCB0byBjYWxsIHRoZSBgaW5maW5pdGVgIG91dHB1dCBldmVudCB3aGVuIHNjcm9sbGVkLlxuICAgICAqIFRoZSB0aHJlc2hvbGQgdmFsdWUgY2FuIGJlIGVpdGhlciBhIHBlcmNlbnQsIG9yXG4gICAgICogaW4gcGl4ZWxzLiBGb3IgZXhhbXBsZSwgdXNlIHRoZSB2YWx1ZSBvZiBgMTAlYCBmb3IgdGhlIGBpbmZpbml0ZWBcbiAgICAgKiBvdXRwdXQgZXZlbnQgdG8gZ2V0IGNhbGxlZCB3aGVuIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCAxMCVcbiAgICAgKiBmcm9tIHRoZSBib3R0b20gb2YgdGhlIHBhZ2UuIFVzZSB0aGUgdmFsdWUgYDEwMHB4YCB3aGVuIHRoZVxuICAgICAqIHNjcm9sbCBpcyB3aXRoaW4gMTAwIHBpeGVscyBmcm9tIHRoZSBib3R0b20gb2YgdGhlIHBhZ2UuXG4gICAgICovXG4gICAgdGhpcy50aHJlc2hvbGQgPSAnMTUlJztcbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBpbmZpbml0ZSBzY3JvbGwgd2lsbCBiZSBoaWRkZW4gYW5kIHNjcm9sbCBldmVudCBsaXN0ZW5lcnNcbiAgICAgKiB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBTZXQgdGhpcyB0byB0cnVlIHRvIGRpc2FibGUgdGhlIGluZmluaXRlIHNjcm9sbCBmcm9tIGFjdGl2ZWx5XG4gICAgICogdHJ5aW5nIHRvIHJlY2VpdmUgbmV3IGRhdGEgd2hpbGUgc2Nyb2xsaW5nLiBUaGlzIGlzIHVzZWZ1bFxuICAgICAqIHdoZW4gaXQgaXMga25vd24gdGhhdCB0aGVyZSBpcyBubyBtb3JlIGRhdGEgdGhhdCBjYW4gYmUgYWRkZWQsIGFuZFxuICAgICAqIHRoZSBpbmZpbml0ZSBzY3JvbGwgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICAgKi9cbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogVGhlIHBvc2l0aW9uIG9mIHRoZSBpbmZpbml0ZSBzY3JvbGwgZWxlbWVudC5cbiAgICAgKiBUaGUgdmFsdWUgY2FuIGJlIGVpdGhlciBgdG9wYCBvciBgYm90dG9tYC5cbiAgICAgKi9cbiAgICB0aGlzLnBvc2l0aW9uID0gJ2JvdHRvbSc7XG4gICAgdGhpcy5vblNjcm9sbCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHNjcm9sbEVsID0gdGhpcy5zY3JvbGxFbDtcbiAgICAgIGlmICghc2Nyb2xsRWwgfHwgIXRoaXMuY2FuU3RhcnQoKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZmluaXRlSGVpZ2h0ID0gdGhpcy5lbC5vZmZzZXRIZWlnaHQ7XG4gICAgICBpZiAoaW5maW5pdGVIZWlnaHQgPT09IDApIHtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gaGVpZ2h0IG9mIHRoaXMgZWxlbWVudCB0aGVuIGRvIG5vdGhpbmdcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgICB9XG4gICAgICBjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxFbC5zY3JvbGxUb3A7XG4gICAgICBjb25zdCBzY3JvbGxIZWlnaHQgPSBzY3JvbGxFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICBjb25zdCBoZWlnaHQgPSBzY3JvbGxFbC5vZmZzZXRIZWlnaHQ7XG4gICAgICBjb25zdCB0aHJlc2hvbGQgPSB0aGlzLnRoclBjICE9PSAwID8gKGhlaWdodCAqIHRoaXMudGhyUGMpIDogdGhpcy50aHJQeDtcbiAgICAgIGNvbnN0IGRpc3RhbmNlRnJvbUluZmluaXRlID0gKHRoaXMucG9zaXRpb24gPT09ICdib3R0b20nKVxuICAgICAgICA/IHNjcm9sbEhlaWdodCAtIGluZmluaXRlSGVpZ2h0IC0gc2Nyb2xsVG9wIC0gdGhyZXNob2xkIC0gaGVpZ2h0XG4gICAgICAgIDogc2Nyb2xsVG9wIC0gaW5maW5pdGVIZWlnaHQgLSB0aHJlc2hvbGQ7XG4gICAgICBpZiAoZGlzdGFuY2VGcm9tSW5maW5pdGUgPCAwKSB7XG4gICAgICAgIGlmICghdGhpcy5kaWRGaXJlKSB7XG4gICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZGlkRmlyZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5pb25JbmZpbml0ZS5lbWl0KCk7XG4gICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRpZEZpcmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiA0O1xuICAgIH07XG4gIH1cbiAgdGhyZXNob2xkQ2hhbmdlZCgpIHtcbiAgICBjb25zdCB2YWwgPSB0aGlzLnRocmVzaG9sZDtcbiAgICBpZiAodmFsLmxhc3RJbmRleE9mKCclJykgPiAtMSkge1xuICAgICAgdGhpcy50aHJQeCA9IDA7XG4gICAgICB0aGlzLnRoclBjID0gKHBhcnNlRmxvYXQodmFsKSAvIDEwMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy50aHJQeCA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICAgIHRoaXMudGhyUGMgPSAwO1xuICAgIH1cbiAgfVxuICBkaXNhYmxlZENoYW5nZWQoKSB7XG4gICAgY29uc3QgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkO1xuICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuZW5hYmxlU2Nyb2xsRXZlbnRzKCFkaXNhYmxlZCk7XG4gIH1cbiAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgY29udGVudEVsID0gdGhpcy5lbC5jbG9zZXN0KCdpb24tY29udGVudCcpO1xuICAgIGlmICghY29udGVudEVsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCc8aW9uLWluZmluaXRlLXNjcm9sbD4gbXVzdCBiZSB1c2VkIGluc2lkZSBhbiA8aW9uLWNvbnRlbnQ+Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2Nyb2xsRWwgPSBhd2FpdCBjb250ZW50RWwuZ2V0U2Nyb2xsRWxlbWVudCgpO1xuICAgIHRoaXMudGhyZXNob2xkQ2hhbmdlZCgpO1xuICAgIHRoaXMuZGlzYWJsZWRDaGFuZ2VkKCk7XG4gICAgaWYgKHRoaXMucG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICB3cml0ZVRhc2soKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxFbCkge1xuICAgICAgICAgIHRoaXMuc2Nyb2xsRWwuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxFbC5zY3JvbGxIZWlnaHQgLSB0aGlzLnNjcm9sbEVsLmNsaWVudEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuZW5hYmxlU2Nyb2xsRXZlbnRzKGZhbHNlKTtcbiAgICB0aGlzLnNjcm9sbEVsID0gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBDYWxsIGBjb21wbGV0ZSgpYCB3aXRoaW4gdGhlIGBpb25JbmZpbml0ZWAgb3V0cHV0IGV2ZW50IGhhbmRsZXIgd2hlblxuICAgKiB5b3VyIGFzeW5jIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkLiBGb3IgZXhhbXBsZSwgdGhlIGBsb2FkaW5nYFxuICAgKiBzdGF0ZSBpcyB3aGlsZSB0aGUgYXBwIGlzIHBlcmZvcm1pbmcgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbixcbiAgICogc3VjaCBhcyByZWNlaXZpbmcgbW9yZSBkYXRhIGZyb20gYW4gQUpBWCByZXF1ZXN0IHRvIGFkZCBtb3JlIGl0ZW1zXG4gICAqIHRvIGEgZGF0YSBsaXN0LiBPbmNlIHRoZSBkYXRhIGhhcyBiZWVuIHJlY2VpdmVkIGFuZCBVSSB1cGRhdGVkLCB5b3VcbiAgICogdGhlbiBjYWxsIHRoaXMgbWV0aG9kIHRvIHNpZ25pZnkgdGhhdCB0aGUgbG9hZGluZyBoYXMgY29tcGxldGVkLlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIGNoYW5nZSB0aGUgaW5maW5pdGUgc2Nyb2xsJ3Mgc3RhdGUgZnJvbSBgbG9hZGluZ2BcbiAgICogdG8gYGVuYWJsZWRgLlxuICAgKi9cbiAgYXN5bmMgY29tcGxldGUoKSB7XG4gICAgY29uc3Qgc2Nyb2xsRWwgPSB0aGlzLnNjcm9sbEVsO1xuICAgIGlmICghdGhpcy5pc0xvYWRpbmcgfHwgIXNjcm9sbEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICAvKipcbiAgICAgICAqIE5ldyBjb250ZW50IGlzIGJlaW5nIGFkZGVkIGF0IHRoZSB0b3AsIGJ1dCB0aGUgc2Nyb2xsVG9wIHBvc2l0aW9uIHN0YXlzIHRoZSBzYW1lLFxuICAgICAgICogd2hpY2ggY2F1c2VzIGEgc2Nyb2xsIGp1bXAgdmlzdWFsbHkuIFRoaXMgYWxnb3JpdGhtIG1ha2VzIHN1cmUgdG8gcHJldmVudCB0aGlzLlxuICAgICAgICogKEZyYW1lIDEpXG4gICAgICAgKiAgICAtIGNvbXBsZXRlKCkgaXMgY2FsbGVkLCBidXQgdGhlIFVJIGhhc24ndCBoYWQgdGltZSB0byB1cGRhdGUgeWV0LlxuICAgICAgICogICAgLSBTYXZlIHRoZSBjdXJyZW50IGNvbnRlbnQgZGltZW5zaW9ucy5cbiAgICAgICAqICAgIC0gV2FpdCBmb3IgdGhlIG5leHQgZnJhbWUgdXNpbmcgX2RvbS5yZWFkLCBzbyB0aGUgVUkgd2lsbCBiZSB1cGRhdGVkLlxuICAgICAgICogKEZyYW1lIDIpXG4gICAgICAgKiAgICAtIFJlYWQgdGhlIG5ldyBjb250ZW50IGRpbWVuc2lvbnMuXG4gICAgICAgKiAgICAtIENhbGN1bGF0ZSB0aGUgaGVpZ2h0IGRpZmZlcmVuY2UgYW5kIHRoZSBuZXcgc2Nyb2xsIHBvc2l0aW9uLlxuICAgICAgICogICAgLSBEZWxheSB0aGUgc2Nyb2xsIHBvc2l0aW9uIGNoYW5nZSB1bnRpbCBvdGhlciBwb3NzaWJsZSBkb20gcmVhZHMgYXJlIGRvbmUgdXNpbmcgX2RvbS53cml0ZSB0byBiZSBwZXJmb3JtYW50LlxuICAgICAgICogKFN0aWxsIGZyYW1lIDIsIGlmIEknbSBjb3JyZWN0KVxuICAgICAgICogICAgLSBDaGFuZ2UgdGhlIHNjcm9sbCBwb3NpdGlvbiAoPSB2aXN1YWxseSBtYWludGFpbiB0aGUgc2Nyb2xsIHBvc2l0aW9uKS5cbiAgICAgICAqICAgIC0gQ2hhbmdlIHRoZSBzdGF0ZSB0byByZS1lbmFibGUgdGhlIEluZmluaXRlU2Nyb2xsLlxuICAgICAgICogICAgLSBUaGlzIHNob3VsZCBiZSBhZnRlciBjaGFuZ2luZyB0aGUgc2Nyb2xsIHBvc2l0aW9uLCBvciBpdCBjb3VsZFxuICAgICAgICogICAgY2F1c2UgdGhlIEluZmluaXRlU2Nyb2xsIHRvIGJlIHRyaWdnZXJlZCBhZ2FpbiBpbW1lZGlhdGVseS5cbiAgICAgICAqIChGcmFtZSAzKVxuICAgICAgICogICAgRG9uZS5cbiAgICAgICAqL1xuICAgICAgdGhpcy5pc0J1c3kgPSB0cnVlO1xuICAgICAgLy8gKioqKioqKiogRE9NIFJFQUQgKioqKioqKioqKioqKioqKlxuICAgICAgLy8gU2F2ZSB0aGUgY3VycmVudCBjb250ZW50IGRpbWVuc2lvbnMgYmVmb3JlIHRoZSBVSSB1cGRhdGVzXG4gICAgICBjb25zdCBwcmV2ID0gc2Nyb2xsRWwuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRWwuc2Nyb2xsVG9wO1xuICAgICAgLy8gKioqKioqKiogRE9NIFJFQUQgKioqKioqKioqKioqKioqKlxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgcmVhZFRhc2soKCkgPT4ge1xuICAgICAgICAgIC8vIFVJIGhhcyB1cGRhdGVkLCBzYXZlIHRoZSBuZXcgY29udGVudCBkaW1lbnNpb25zXG4gICAgICAgICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gc2Nyb2xsRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgIC8vIE5ldyBjb250ZW50IHdhcyBhZGRlZCBvbiB0b3AsIHNvIHRoZSBzY3JvbGwgcG9zaXRpb24gc2hvdWxkIGJlIGNoYW5nZWQgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBpdCBmcm9tIGp1bXBpbmcgYXJvdW5kXG4gICAgICAgICAgY29uc3QgbmV3U2Nyb2xsVG9wID0gc2Nyb2xsSGVpZ2h0IC0gcHJldjtcbiAgICAgICAgICAvLyAqKioqKioqKiBET00gV1JJVEUgKioqKioqKioqKioqKioqKlxuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB3cml0ZVRhc2soKCkgPT4ge1xuICAgICAgICAgICAgICBzY3JvbGxFbC5zY3JvbGxUb3AgPSBuZXdTY3JvbGxUb3A7XG4gICAgICAgICAgICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgY2FuU3RhcnQoKSB7XG4gICAgcmV0dXJuICghdGhpcy5kaXNhYmxlZCAmJlxuICAgICAgIXRoaXMuaXNCdXN5ICYmXG4gICAgICAhIXRoaXMuc2Nyb2xsRWwgJiZcbiAgICAgICF0aGlzLmlzTG9hZGluZyk7XG4gIH1cbiAgZW5hYmxlU2Nyb2xsRXZlbnRzKHNob3VsZExpc3Rlbikge1xuICAgIGlmICh0aGlzLnNjcm9sbEVsKSB7XG4gICAgICBpZiAoc2hvdWxkTGlzdGVuKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsRWwuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblNjcm9sbCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zY3JvbGxFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgIGNvbnN0IGRpc2FibGVkID0gdGhpcy5kaXNhYmxlZDtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczoge1xuICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgICdpbmZpbml0ZS1zY3JvbGwtbG9hZGluZyc6IHRoaXMuaXNMb2FkaW5nLFxuICAgICAgICAnaW5maW5pdGUtc2Nyb2xsLWVuYWJsZWQnOiAhZGlzYWJsZWRcbiAgICAgIH0gfSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcInRocmVzaG9sZFwiOiBbXCJ0aHJlc2hvbGRDaGFuZ2VkXCJdLFxuICAgIFwiZGlzYWJsZWRcIjogW1wiZGlzYWJsZWRDaGFuZ2VkXCJdXG4gIH07IH1cbn07XG5JbmZpbml0ZVNjcm9sbC5zdHlsZSA9IGluZmluaXRlU2Nyb2xsQ3NzO1xuXG5jb25zdCBpbmZpbml0ZVNjcm9sbENvbnRlbnRJb3NDc3MgPSBcImlvbi1pbmZpbml0ZS1zY3JvbGwtY29udGVudHtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21pbi1oZWlnaHQ6ODRweDt0ZXh0LWFsaWduOmNlbnRlcjstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9LmluZmluaXRlLWxvYWRpbmd7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTozMnB4O2Rpc3BsYXk6bm9uZTt3aWR0aDoxMDAlfS5pbmZpbml0ZS1sb2FkaW5nLXRleHR7bWFyZ2luLWxlZnQ6MzJweDttYXJnaW4tcmlnaHQ6MzJweDttYXJnaW4tdG9wOjRweDttYXJnaW4tYm90dG9tOjB9QHN1cHBvcnRzICgoLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDApIG9yIChtYXJnaW4taW5saW5lLXN0YXJ0OiAwKSkgb3IgKC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwKXsuaW5maW5pdGUtbG9hZGluZy10ZXh0e21hcmdpbi1sZWZ0OnVuc2V0O21hcmdpbi1yaWdodDp1bnNldDstd2Via2l0LW1hcmdpbi1zdGFydDozMnB4O21hcmdpbi1pbmxpbmUtc3RhcnQ6MzJweDstd2Via2l0LW1hcmdpbi1lbmQ6MzJweDttYXJnaW4taW5saW5lLWVuZDozMnB4fX0uaW5maW5pdGUtc2Nyb2xsLWxvYWRpbmcgaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50Pi5pbmZpbml0ZS1sb2FkaW5ne2Rpc3BsYXk6YmxvY2t9LmluZmluaXRlLXNjcm9sbC1jb250ZW50LWlvcyAuaW5maW5pdGUtbG9hZGluZy10ZXh0e2NvbG9yOnZhcigtLWlvbi1jb2xvci1zdGVwLTYwMCwgIzY2NjY2Nil9LmluZmluaXRlLXNjcm9sbC1jb250ZW50LWlvcyAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWxpbmVzLWlvcyBsaW5lLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1pb3MgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1saW5lcy1zbWFsbC1pb3MgbGluZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtaW9zIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItY3Jlc2NlbnQgY2lyY2xle3N0cm9rZTp2YXIoLS1pb24tY29sb3Itc3RlcC02MDAsICM2NjY2NjYpfS5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1pb3MgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1idWJibGVzIGNpcmNsZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtaW9zIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItY2lyY2xlcyBjaXJjbGUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LWlvcyAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWRvdHMgY2lyY2xle2ZpbGw6dmFyKC0taW9uLWNvbG9yLXN0ZXAtNjAwLCAjNjY2NjY2KX1cIjtcblxuY29uc3QgaW5maW5pdGVTY3JvbGxDb250ZW50TWRDc3MgPSBcImlvbi1pbmZpbml0ZS1zY3JvbGwtY29udGVudHtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21pbi1oZWlnaHQ6ODRweDt0ZXh0LWFsaWduOmNlbnRlcjstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9LmluZmluaXRlLWxvYWRpbmd7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTozMnB4O2Rpc3BsYXk6bm9uZTt3aWR0aDoxMDAlfS5pbmZpbml0ZS1sb2FkaW5nLXRleHR7bWFyZ2luLWxlZnQ6MzJweDttYXJnaW4tcmlnaHQ6MzJweDttYXJnaW4tdG9wOjRweDttYXJnaW4tYm90dG9tOjB9QHN1cHBvcnRzICgoLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDApIG9yIChtYXJnaW4taW5saW5lLXN0YXJ0OiAwKSkgb3IgKC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwKXsuaW5maW5pdGUtbG9hZGluZy10ZXh0e21hcmdpbi1sZWZ0OnVuc2V0O21hcmdpbi1yaWdodDp1bnNldDstd2Via2l0LW1hcmdpbi1zdGFydDozMnB4O21hcmdpbi1pbmxpbmUtc3RhcnQ6MzJweDstd2Via2l0LW1hcmdpbi1lbmQ6MzJweDttYXJnaW4taW5saW5lLWVuZDozMnB4fX0uaW5maW5pdGUtc2Nyb2xsLWxvYWRpbmcgaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50Pi5pbmZpbml0ZS1sb2FkaW5ne2Rpc3BsYXk6YmxvY2t9LmluZmluaXRlLXNjcm9sbC1jb250ZW50LW1kIC5pbmZpbml0ZS1sb2FkaW5nLXRleHR7Y29sb3I6dmFyKC0taW9uLWNvbG9yLXN0ZXAtNjAwLCAjNjY2NjY2KX0uaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtbWQgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1saW5lcy1tZCBsaW5lLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1tZCAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWxpbmVzLXNtYWxsLW1kIGxpbmUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LW1kIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItY3Jlc2NlbnQgY2lyY2xle3N0cm9rZTp2YXIoLS1pb24tY29sb3Itc3RlcC02MDAsICM2NjY2NjYpfS5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1tZCAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWJ1YmJsZXMgY2lyY2xlLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1tZCAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWNpcmNsZXMgY2lyY2xlLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1tZCAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWRvdHMgY2lyY2xle2ZpbGw6dmFyKC0taW9uLWNvbG9yLXN0ZXAtNjAwLCAjNjY2NjY2KX1cIjtcblxuY29uc3QgSW5maW5pdGVTY3JvbGxDb250ZW50ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIGlmICh0aGlzLmxvYWRpbmdTcGlubmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lciA9IGNvbmZpZy5nZXQoJ2luZmluaXRlTG9hZGluZ1NwaW5uZXInLCBjb25maWcuZ2V0KCdzcGlubmVyJywgbW9kZSA9PT0gJ2lvcycgPyAnbGluZXMnIDogJ2NyZXNjZW50JykpO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgY2xhc3M6IHtcbiAgICAgICAgW21vZGVdOiB0cnVlLFxuICAgICAgICAvLyBVc2VkIGludGVybmFsbHkgZm9yIHN0eWxpbmdcbiAgICAgICAgW2BpbmZpbml0ZS1zY3JvbGwtY29udGVudC0ke21vZGV9YF06IHRydWVcbiAgICAgIH0gfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImluZmluaXRlLWxvYWRpbmdcIiB9LCB0aGlzLmxvYWRpbmdTcGlubmVyICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaW5maW5pdGUtbG9hZGluZy1zcGlubmVyXCIgfSwgaChcImlvbi1zcGlubmVyXCIsIHsgbmFtZTogdGhpcy5sb2FkaW5nU3Bpbm5lciB9KSkpLCB0aGlzLmxvYWRpbmdUZXh0ICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaW5maW5pdGUtbG9hZGluZy10ZXh0XCIsIGlubmVySFRNTDogc2FuaXRpemVET01TdHJpbmcodGhpcy5sb2FkaW5nVGV4dCkgfSkpKSkpO1xuICB9XG59O1xuSW5maW5pdGVTY3JvbGxDb250ZW50LnN0eWxlID0ge1xuICBpb3M6IGluZmluaXRlU2Nyb2xsQ29udGVudElvc0NzcyxcbiAgbWQ6IGluZmluaXRlU2Nyb2xsQ29udGVudE1kQ3NzXG59O1xuXG5leHBvcnQgeyBJbmZpbml0ZVNjcm9sbCBhcyBpb25faW5maW5pdGVfc2Nyb2xsLCBJbmZpbml0ZVNjcm9sbENvbnRlbnQgYXMgaW9uX2luZmluaXRlX3Njcm9sbF9jb250ZW50IH07XG4iXX0=