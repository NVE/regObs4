"use strict";
(self["webpackChunkregobs4"] = self["webpackChunkregobs4"] || []).push([["node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js"],{

/***/ 72178:
/*!**************************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-infinite-scroll_2.entry.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_infinite_scroll": function() { return /* binding */ InfiniteScroll; },
/* harmony export */   "ion_infinite_scroll_content": function() { return /* binding */ InfiniteScrollContent; }
/* harmony export */ });
/* harmony import */ var C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ 80151);
/* harmony import */ var _index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-7a8b7a1c.js */ 76842);
/* harmony import */ var _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ionic-global-63a97a32.js */ 33124);
/* harmony import */ var _index_9e3fe806_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-9e3fe806.js */ 32986);




const infiniteScrollCss = "ion-infinite-scroll{display:none;width:100%}.infinite-scroll-enabled{display:block}";
const InfiniteScroll = class {
  constructor(hostRef) {
    (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.ionInfinite = (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionInfinite", 7);
    this.thrPx = 0;
    this.thrPc = 0;
    this.didFire = false;
    this.isBusy = false;
    this.isLoading = false;
    /**
     * The threshold distance from the bottom
     * of the content to call the `infinite` output event when scrolled.
     * The threshold value can be either a percent, or
     * in pixels. For example, use the value of `10%` for the `infinite`
     * output event to get called when the user has scrolled 10%
     * from the bottom of the page. Use the value `100px` when the
     * scroll is within 100 pixels from the bottom of the page.
     */

    this.threshold = '15%';
    /**
     * If `true`, the infinite scroll will be hidden and scroll event listeners
     * will be removed.
     *
     * Set this to true to disable the infinite scroll from actively
     * trying to receive new data while scrolling. This is useful
     * when it is known that there is no more data that can be added, and
     * the infinite scroll is no longer needed.
     */

    this.disabled = false;
    /**
     * The position of the infinite scroll element.
     * The value can be either `top` or `bottom`.
     */

    this.position = 'bottom';

    this.onScroll = () => {
      const scrollEl = this.scrollEl;

      if (!scrollEl || !this.canStart()) {
        return 1;
      }

      const infiniteHeight = this.el.offsetHeight;

      if (infiniteHeight === 0) {
        // if there is no height of this element then do nothing
        return 2;
      }

      const scrollTop = scrollEl.scrollTop;
      const scrollHeight = scrollEl.scrollHeight;
      const height = scrollEl.offsetHeight;
      const threshold = this.thrPc !== 0 ? height * this.thrPc : this.thrPx;
      const distanceFromInfinite = this.position === 'bottom' ? scrollHeight - infiniteHeight - scrollTop - threshold - height : scrollTop - infiniteHeight - threshold;

      if (distanceFromInfinite < 0) {
        if (!this.didFire) {
          this.isLoading = true;
          this.didFire = true;
          this.ionInfinite.emit();
          return 3;
        }
      } else {
        this.didFire = false;
      }

      return 4;
    };
  }

  thresholdChanged() {
    const val = this.threshold;

    if (val.lastIndexOf('%') > -1) {
      this.thrPx = 0;
      this.thrPc = parseFloat(val) / 100;
    } else {
      this.thrPx = parseFloat(val);
      this.thrPc = 0;
    }
  }

  disabledChanged() {
    const disabled = this.disabled;

    if (disabled) {
      this.isLoading = false;
      this.isBusy = false;
    }

    this.enableScrollEvents(!disabled);
  }

  connectedCallback() {
    var _this = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const contentEl = _this.el.closest('ion-content');

      if (!contentEl) {
        console.error('<ion-infinite-scroll> must be used inside an <ion-content>');
        return;
      }

      _this.scrollEl = yield contentEl.getScrollElement();

      _this.thresholdChanged();

      _this.disabledChanged();

      if (_this.position === 'top') {
        (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.c)(() => {
          if (_this.scrollEl) {
            _this.scrollEl.scrollTop = _this.scrollEl.scrollHeight - _this.scrollEl.clientHeight;
          }
        });
      }
    })();
  }

  disconnectedCallback() {
    this.enableScrollEvents(false);
    this.scrollEl = undefined;
  }
  /**
   * Call `complete()` within the `ionInfinite` output event handler when
   * your async operation has completed. For example, the `loading`
   * state is while the app is performing an asynchronous operation,
   * such as receiving more data from an AJAX request to add more items
   * to a data list. Once the data has been received and UI updated, you
   * then call this method to signify that the loading has completed.
   * This method will change the infinite scroll's state from `loading`
   * to `enabled`.
   */


  complete() {
    var _this2 = this;

    return (0,C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      const scrollEl = _this2.scrollEl;

      if (!_this2.isLoading || !scrollEl) {
        return;
      }

      _this2.isLoading = false;

      if (_this2.position === 'top') {
        /**
         * New content is being added at the top, but the scrollTop position stays the same,
         * which causes a scroll jump visually. This algorithm makes sure to prevent this.
         * (Frame 1)
         *    - complete() is called, but the UI hasn't had time to update yet.
         *    - Save the current content dimensions.
         *    - Wait for the next frame using _dom.read, so the UI will be updated.
         * (Frame 2)
         *    - Read the new content dimensions.
         *    - Calculate the height difference and the new scroll position.
         *    - Delay the scroll position change until other possible dom reads are done using _dom.write to be performant.
         * (Still frame 2, if I'm correct)
         *    - Change the scroll position (= visually maintain the scroll position).
         *    - Change the state to re-enable the InfiniteScroll.
         *    - This should be after changing the scroll position, or it could
         *    cause the InfiniteScroll to be triggered again immediately.
         * (Frame 3)
         *    Done.
         */
        _this2.isBusy = true; // ******** DOM READ ****************
        // Save the current content dimensions before the UI updates

        const prev = scrollEl.scrollHeight - scrollEl.scrollTop; // ******** DOM READ ****************

        requestAnimationFrame(() => {
          (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.f)(() => {
            // UI has updated, save the new content dimensions
            const scrollHeight = scrollEl.scrollHeight; // New content was added on top, so the scroll position should be changed immediately to prevent it from jumping around

            const newScrollTop = scrollHeight - prev; // ******** DOM WRITE ****************

            requestAnimationFrame(() => {
              (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.c)(() => {
                scrollEl.scrollTop = newScrollTop;
                _this2.isBusy = false;
              });
            });
          });
        });
      }
    })();
  }

  canStart() {
    return !this.disabled && !this.isBusy && !!this.scrollEl && !this.isLoading;
  }

  enableScrollEvents(shouldListen) {
    if (this.scrollEl) {
      if (shouldListen) {
        this.scrollEl.addEventListener('scroll', this.onScroll);
      } else {
        this.scrollEl.removeEventListener('scroll', this.onScroll);
      }
    }
  }

  render() {
    const mode = (0,_ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
    const disabled = this.disabled;
    return (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      class: {
        [mode]: true,
        'infinite-scroll-loading': this.isLoading,
        'infinite-scroll-enabled': !disabled
      }
    });
  }

  get el() {
    return (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
  }

  static get watchers() {
    return {
      "threshold": ["thresholdChanged"],
      "disabled": ["disabledChanged"]
    };
  }

};
InfiniteScroll.style = infiniteScrollCss;
const infiniteScrollContentIosCss = "ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{margin-left:32px;margin-right:32px;margin-top:4px;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.infinite-loading-text{margin-left:unset;margin-right:unset;-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px}}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-ios .infinite-loading-text{color:var(--ion-color-step-600, #666666)}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-small-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, #666666)}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, #666666)}";
const infiniteScrollContentMdCss = "ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{margin-left:32px;margin-right:32px;margin-top:4px;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.infinite-loading-text{margin-left:unset;margin-right:unset;-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px}}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-md .infinite-loading-text{color:var(--ion-color-step-600, #666666)}.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-small-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, #666666)}.infinite-scroll-content-md .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, #666666)}";
const InfiniteScrollContent = class {
  constructor(hostRef) {
    (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
  }

  componentDidLoad() {
    if (this.loadingSpinner === undefined) {
      const mode = (0,_ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
      this.loadingSpinner = _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.c.get('infiniteLoadingSpinner', _ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.c.get('spinner', mode === 'ios' ? 'lines' : 'crescent'));
    }
  }

  render() {
    const mode = (0,_ionic_global_63a97a32_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
    return (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      class: {
        [mode]: true,
        // Used internally for styling
        [`infinite-scroll-content-${mode}`]: true
      }
    }, (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
      class: "infinite-loading"
    }, this.loadingSpinner && (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
      class: "infinite-loading-spinner"
    }, (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("ion-spinner", {
      name: this.loadingSpinner
    })), this.loadingText && (0,_index_7a8b7a1c_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
      class: "infinite-loading-text",
      innerHTML: (0,_index_9e3fe806_js__WEBPACK_IMPORTED_MODULE_3__.s)(this.loadingText)
    })));
  }

};
InfiniteScrollContent.style = {
  ios: infiniteScrollContentIosCss,
  md: infiniteScrollContentMdCss
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLWluZmluaXRlLXNjcm9sbF8yX2VudHJ5X2pzLWVzMjAxNS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUEsTUFBTWtCLGlCQUFpQixHQUFHLHFGQUExQjtBQUVBLE1BQU1DLGNBQWMsR0FBRyxNQUFNO0FBQzNCQyxFQUFBQSxXQUFXLENBQUNDLE9BQUQsRUFBVTtBQUNuQnBCLElBQUFBLHFEQUFnQixDQUFDLElBQUQsRUFBT29CLE9BQVAsQ0FBaEI7QUFDQSxTQUFLQyxXQUFMLEdBQW1CbkIscURBQVcsQ0FBQyxJQUFELEVBQU8sYUFBUCxFQUFzQixDQUF0QixDQUE5QjtBQUNBLFNBQUtvQixLQUFMLEdBQWEsQ0FBYjtBQUNBLFNBQUtDLEtBQUwsR0FBYSxDQUFiO0FBQ0EsU0FBS0MsT0FBTCxHQUFlLEtBQWY7QUFDQSxTQUFLQyxNQUFMLEdBQWMsS0FBZDtBQUNBLFNBQUtDLFNBQUwsR0FBaUIsS0FBakI7QUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0MsU0FBTCxHQUFpQixLQUFqQjtBQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDSSxTQUFLQyxRQUFMLEdBQWdCLEtBQWhCO0FBQ0E7QUFDSjtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0MsUUFBTCxHQUFnQixRQUFoQjs7QUFDQSxTQUFLQyxRQUFMLEdBQWdCLE1BQU07QUFDcEIsWUFBTUMsUUFBUSxHQUFHLEtBQUtBLFFBQXRCOztBQUNBLFVBQUksQ0FBQ0EsUUFBRCxJQUFhLENBQUMsS0FBS0MsUUFBTCxFQUFsQixFQUFtQztBQUNqQyxlQUFPLENBQVA7QUFDRDs7QUFDRCxZQUFNQyxjQUFjLEdBQUcsS0FBS0MsRUFBTCxDQUFRQyxZQUEvQjs7QUFDQSxVQUFJRixjQUFjLEtBQUssQ0FBdkIsRUFBMEI7QUFD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QXFCLENBQUNILEtBQXRCLEdBQThCO0FBQzVCVSxFQUFBQSxHQUFHLEVBQUVULDJCQUR1QjtBQUU1QlUsRUFBQUEsRUFBRSxFQUFFVDtBQUZ3QixDQUE5QiIsInNvdXJjZXMiOlsiLi9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvZGlzdC9lc20vaW9uLWluZmluaXRlLXNjcm9sbF8yLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgZSBhcyBjcmVhdGVFdmVudCwgYyBhcyB3cml0ZVRhc2ssIGYgYXMgcmVhZFRhc2ssIGgsIGkgYXMgZ2V0RWxlbWVudCwgSCBhcyBIb3N0IH0gZnJvbSAnLi9pbmRleC03YThiN2ExYy5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldElvbk1vZGUsIGMgYXMgY29uZmlnIH0gZnJvbSAnLi9pb25pYy1nbG9iYWwtNjNhOTdhMzIuanMnO1xuaW1wb3J0IHsgcyBhcyBzYW5pdGl6ZURPTVN0cmluZyB9IGZyb20gJy4vaW5kZXgtOWUzZmU4MDYuanMnO1xuXG5jb25zdCBpbmZpbml0ZVNjcm9sbENzcyA9IFwiaW9uLWluZmluaXRlLXNjcm9sbHtkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJX0uaW5maW5pdGUtc2Nyb2xsLWVuYWJsZWR7ZGlzcGxheTpibG9ja31cIjtcblxuY29uc3QgSW5maW5pdGVTY3JvbGwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuaW9uSW5maW5pdGUgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbkluZmluaXRlXCIsIDcpO1xuICAgIHRoaXMudGhyUHggPSAwO1xuICAgIHRoaXMudGhyUGMgPSAwO1xuICAgIHRoaXMuZGlkRmlyZSA9IGZhbHNlO1xuICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7XG4gICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBUaGUgdGhyZXNob2xkIGRpc3RhbmNlIGZyb20gdGhlIGJvdHRvbVxuICAgICAqIG9mIHRoZSBjb250ZW50IHRvIGNhbGwgdGhlIGBpbmZpbml0ZWAgb3V0cHV0IGV2ZW50IHdoZW4gc2Nyb2xsZWQuXG4gICAgICogVGhlIHRocmVzaG9sZCB2YWx1ZSBjYW4gYmUgZWl0aGVyIGEgcGVyY2VudCwgb3JcbiAgICAgKiBpbiBwaXhlbHMuIEZvciBleGFtcGxlLCB1c2UgdGhlIHZhbHVlIG9mIGAxMCVgIGZvciB0aGUgYGluZmluaXRlYFxuICAgICAqIG91dHB1dCBldmVudCB0byBnZXQgY2FsbGVkIHdoZW4gdGhlIHVzZXIgaGFzIHNjcm9sbGVkIDEwJVxuICAgICAqIGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgcGFnZS4gVXNlIHRoZSB2YWx1ZSBgMTAwcHhgIHdoZW4gdGhlXG4gICAgICogc2Nyb2xsIGlzIHdpdGhpbiAxMDAgcGl4ZWxzIGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgcGFnZS5cbiAgICAgKi9cbiAgICB0aGlzLnRocmVzaG9sZCA9ICcxNSUnO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgdGhlIGluZmluaXRlIHNjcm9sbCB3aWxsIGJlIGhpZGRlbiBhbmQgc2Nyb2xsIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqIHdpbGwgYmUgcmVtb3ZlZC5cbiAgICAgKlxuICAgICAqIFNldCB0aGlzIHRvIHRydWUgdG8gZGlzYWJsZSB0aGUgaW5maW5pdGUgc2Nyb2xsIGZyb20gYWN0aXZlbHlcbiAgICAgKiB0cnlpbmcgdG8gcmVjZWl2ZSBuZXcgZGF0YSB3aGlsZSBzY3JvbGxpbmcuIFRoaXMgaXMgdXNlZnVsXG4gICAgICogd2hlbiBpdCBpcyBrbm93biB0aGF0IHRoZXJlIGlzIG5vIG1vcmUgZGF0YSB0aGF0IGNhbiBiZSBhZGRlZCwgYW5kXG4gICAgICogdGhlIGluZmluaXRlIHNjcm9sbCBpcyBubyBsb25nZXIgbmVlZGVkLlxuICAgICAqL1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBUaGUgcG9zaXRpb24gb2YgdGhlIGluZmluaXRlIHNjcm9sbCBlbGVtZW50LlxuICAgICAqIFRoZSB2YWx1ZSBjYW4gYmUgZWl0aGVyIGB0b3BgIG9yIGBib3R0b21gLlxuICAgICAqL1xuICAgIHRoaXMucG9zaXRpb24gPSAnYm90dG9tJztcbiAgICB0aGlzLm9uU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc2Nyb2xsRWwgPSB0aGlzLnNjcm9sbEVsO1xuICAgICAgaWYgKCFzY3JvbGxFbCB8fCAhdGhpcy5jYW5TdGFydCgpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5maW5pdGVIZWlnaHQgPSB0aGlzLmVsLm9mZnNldEhlaWdodDtcbiAgICAgIGlmIChpbmZpbml0ZUhlaWdodCA9PT0gMCkge1xuICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyBoZWlnaHQgb2YgdGhpcyBlbGVtZW50IHRoZW4gZG8gbm90aGluZ1xuICAgICAgICByZXR1cm4gMjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbEVsLnNjcm9sbFRvcDtcbiAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHNjcm9sbEVsLm9mZnNldEhlaWdodDtcbiAgICAgIGNvbnN0IHRocmVzaG9sZCA9IHRoaXMudGhyUGMgIT09IDAgPyAoaGVpZ2h0ICogdGhpcy50aHJQYykgOiB0aGlzLnRoclB4O1xuICAgICAgY29uc3QgZGlzdGFuY2VGcm9tSW5maW5pdGUgPSAodGhpcy5wb3NpdGlvbiA9PT0gJ2JvdHRvbScpXG4gICAgICAgID8gc2Nyb2xsSGVpZ2h0IC0gaW5maW5pdGVIZWlnaHQgLSBzY3JvbGxUb3AgLSB0aHJlc2hvbGQgLSBoZWlnaHRcbiAgICAgICAgOiBzY3JvbGxUb3AgLSBpbmZpbml0ZUhlaWdodCAtIHRocmVzaG9sZDtcbiAgICAgIGlmIChkaXN0YW5jZUZyb21JbmZpbml0ZSA8IDApIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpZEZpcmUpIHtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgdGhpcy5kaWRGaXJlID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmlvbkluZmluaXRlLmVtaXQoKTtcbiAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGlkRmlyZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDQ7XG4gICAgfTtcbiAgfVxuICB0aHJlc2hvbGRDaGFuZ2VkKCkge1xuICAgIGNvbnN0IHZhbCA9IHRoaXMudGhyZXNob2xkO1xuICAgIGlmICh2YWwubGFzdEluZGV4T2YoJyUnKSA+IC0xKSB7XG4gICAgICB0aGlzLnRoclB4ID0gMDtcbiAgICAgIHRoaXMudGhyUGMgPSAocGFyc2VGbG9hdCh2YWwpIC8gMTAwKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnRoclB4ID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgICAgdGhpcy50aHJQYyA9IDA7XG4gICAgfVxuICB9XG4gIGRpc2FibGVkQ2hhbmdlZCgpIHtcbiAgICBjb25zdCBkaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQ7XG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0J1c3kgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5lbmFibGVTY3JvbGxFdmVudHMoIWRpc2FibGVkKTtcbiAgfVxuICBhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25zdCBjb250ZW50RWwgPSB0aGlzLmVsLmNsb3Nlc3QoJ2lvbi1jb250ZW50Jyk7XG4gICAgaWYgKCFjb250ZW50RWwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJzxpb24taW5maW5pdGUtc2Nyb2xsPiBtdXN0IGJlIHVzZWQgaW5zaWRlIGFuIDxpb24tY29udGVudD4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zY3JvbGxFbCA9IGF3YWl0IGNvbnRlbnRFbC5nZXRTY3JvbGxFbGVtZW50KCk7XG4gICAgdGhpcy50aHJlc2hvbGRDaGFuZ2VkKCk7XG4gICAgdGhpcy5kaXNhYmxlZENoYW5nZWQoKTtcbiAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgIHdyaXRlVGFzaygoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbEVsKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxFbC5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbEVsLnNjcm9sbEhlaWdodCAtIHRoaXMuc2Nyb2xsRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5lbmFibGVTY3JvbGxFdmVudHMoZmFsc2UpO1xuICAgIHRoaXMuc2Nyb2xsRWwgPSB1bmRlZmluZWQ7XG4gIH1cbiAgLyoqXG4gICAqIENhbGwgYGNvbXBsZXRlKClgIHdpdGhpbiB0aGUgYGlvbkluZmluaXRlYCBvdXRwdXQgZXZlbnQgaGFuZGxlciB3aGVuXG4gICAqIHlvdXIgYXN5bmMgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuIEZvciBleGFtcGxlLCB0aGUgYGxvYWRpbmdgXG4gICAqIHN0YXRlIGlzIHdoaWxlIHRoZSBhcHAgaXMgcGVyZm9ybWluZyBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLFxuICAgKiBzdWNoIGFzIHJlY2VpdmluZyBtb3JlIGRhdGEgZnJvbSBhbiBBSkFYIHJlcXVlc3QgdG8gYWRkIG1vcmUgaXRlbXNcbiAgICogdG8gYSBkYXRhIGxpc3QuIE9uY2UgdGhlIGRhdGEgaGFzIGJlZW4gcmVjZWl2ZWQgYW5kIFVJIHVwZGF0ZWQsIHlvdVxuICAgKiB0aGVuIGNhbGwgdGhpcyBtZXRob2QgdG8gc2lnbmlmeSB0aGF0IHRoZSBsb2FkaW5nIGhhcyBjb21wbGV0ZWQuXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgY2hhbmdlIHRoZSBpbmZpbml0ZSBzY3JvbGwncyBzdGF0ZSBmcm9tIGBsb2FkaW5nYFxuICAgKiB0byBgZW5hYmxlZGAuXG4gICAqL1xuICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICBjb25zdCBzY3JvbGxFbCA9IHRoaXMuc2Nyb2xsRWw7XG4gICAgaWYgKCF0aGlzLmlzTG9hZGluZyB8fCAhc2Nyb2xsRWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgIC8qKlxuICAgICAgICogTmV3IGNvbnRlbnQgaXMgYmVpbmcgYWRkZWQgYXQgdGhlIHRvcCwgYnV0IHRoZSBzY3JvbGxUb3AgcG9zaXRpb24gc3RheXMgdGhlIHNhbWUsXG4gICAgICAgKiB3aGljaCBjYXVzZXMgYSBzY3JvbGwganVtcCB2aXN1YWxseS4gVGhpcyBhbGdvcml0aG0gbWFrZXMgc3VyZSB0byBwcmV2ZW50IHRoaXMuXG4gICAgICAgKiAoRnJhbWUgMSlcbiAgICAgICAqICAgIC0gY29tcGxldGUoKSBpcyBjYWxsZWQsIGJ1dCB0aGUgVUkgaGFzbid0IGhhZCB0aW1lIHRvIHVwZGF0ZSB5ZXQuXG4gICAgICAgKiAgICAtIFNhdmUgdGhlIGN1cnJlbnQgY29udGVudCBkaW1lbnNpb25zLlxuICAgICAgICogICAgLSBXYWl0IGZvciB0aGUgbmV4dCBmcmFtZSB1c2luZyBfZG9tLnJlYWQsIHNvIHRoZSBVSSB3aWxsIGJlIHVwZGF0ZWQuXG4gICAgICAgKiAoRnJhbWUgMilcbiAgICAgICAqICAgIC0gUmVhZCB0aGUgbmV3IGNvbnRlbnQgZGltZW5zaW9ucy5cbiAgICAgICAqICAgIC0gQ2FsY3VsYXRlIHRoZSBoZWlnaHQgZGlmZmVyZW5jZSBhbmQgdGhlIG5ldyBzY3JvbGwgcG9zaXRpb24uXG4gICAgICAgKiAgICAtIERlbGF5IHRoZSBzY3JvbGwgcG9zaXRpb24gY2hhbmdlIHVudGlsIG90aGVyIHBvc3NpYmxlIGRvbSByZWFkcyBhcmUgZG9uZSB1c2luZyBfZG9tLndyaXRlIHRvIGJlIHBlcmZvcm1hbnQuXG4gICAgICAgKiAoU3RpbGwgZnJhbWUgMiwgaWYgSSdtIGNvcnJlY3QpXG4gICAgICAgKiAgICAtIENoYW5nZSB0aGUgc2Nyb2xsIHBvc2l0aW9uICg9IHZpc3VhbGx5IG1haW50YWluIHRoZSBzY3JvbGwgcG9zaXRpb24pLlxuICAgICAgICogICAgLSBDaGFuZ2UgdGhlIHN0YXRlIHRvIHJlLWVuYWJsZSB0aGUgSW5maW5pdGVTY3JvbGwuXG4gICAgICAgKiAgICAtIFRoaXMgc2hvdWxkIGJlIGFmdGVyIGNoYW5naW5nIHRoZSBzY3JvbGwgcG9zaXRpb24sIG9yIGl0IGNvdWxkXG4gICAgICAgKiAgICBjYXVzZSB0aGUgSW5maW5pdGVTY3JvbGwgdG8gYmUgdHJpZ2dlcmVkIGFnYWluIGltbWVkaWF0ZWx5LlxuICAgICAgICogKEZyYW1lIDMpXG4gICAgICAgKiAgICBEb25lLlxuICAgICAgICovXG4gICAgICB0aGlzLmlzQnVzeSA9IHRydWU7XG4gICAgICAvLyAqKioqKioqKiBET00gUkVBRCAqKioqKioqKioqKioqKioqXG4gICAgICAvLyBTYXZlIHRoZSBjdXJyZW50IGNvbnRlbnQgZGltZW5zaW9ucyBiZWZvcmUgdGhlIFVJIHVwZGF0ZXNcbiAgICAgIGNvbnN0IHByZXYgPSBzY3JvbGxFbC5zY3JvbGxIZWlnaHQgLSBzY3JvbGxFbC5zY3JvbGxUb3A7XG4gICAgICAvLyAqKioqKioqKiBET00gUkVBRCAqKioqKioqKioqKioqKioqXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICByZWFkVGFzaygoKSA9PiB7XG4gICAgICAgICAgLy8gVUkgaGFzIHVwZGF0ZWQsIHNhdmUgdGhlIG5ldyBjb250ZW50IGRpbWVuc2lvbnNcbiAgICAgICAgICBjb25zdCBzY3JvbGxIZWlnaHQgPSBzY3JvbGxFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgLy8gTmV3IGNvbnRlbnQgd2FzIGFkZGVkIG9uIHRvcCwgc28gdGhlIHNjcm9sbCBwb3NpdGlvbiBzaG91bGQgYmUgY2hhbmdlZCBpbW1lZGlhdGVseSB0byBwcmV2ZW50IGl0IGZyb20ganVtcGluZyBhcm91bmRcbiAgICAgICAgICBjb25zdCBuZXdTY3JvbGxUb3AgPSBzY3JvbGxIZWlnaHQgLSBwcmV2O1xuICAgICAgICAgIC8vICoqKioqKioqIERPTSBXUklURSAqKioqKioqKioqKioqKioqXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHdyaXRlVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgIHNjcm9sbEVsLnNjcm9sbFRvcCA9IG5ld1Njcm9sbFRvcDtcbiAgICAgICAgICAgICAgdGhpcy5pc0J1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBjYW5TdGFydCgpIHtcbiAgICByZXR1cm4gKCF0aGlzLmRpc2FibGVkICYmXG4gICAgICAhdGhpcy5pc0J1c3kgJiZcbiAgICAgICEhdGhpcy5zY3JvbGxFbCAmJlxuICAgICAgIXRoaXMuaXNMb2FkaW5nKTtcbiAgfVxuICBlbmFibGVTY3JvbGxFdmVudHMoc2hvdWxkTGlzdGVuKSB7XG4gICAgaWYgKHRoaXMuc2Nyb2xsRWwpIHtcbiAgICAgIGlmIChzaG91bGRMaXN0ZW4pIHtcbiAgICAgICAgdGhpcy5zY3JvbGxFbC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnNjcm9sbEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgY29uc3QgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkO1xuICAgIHJldHVybiAoaChIb3N0LCB7IGNsYXNzOiB7XG4gICAgICAgIFttb2RlXTogdHJ1ZSxcbiAgICAgICAgJ2luZmluaXRlLXNjcm9sbC1sb2FkaW5nJzogdGhpcy5pc0xvYWRpbmcsXG4gICAgICAgICdpbmZpbml0ZS1zY3JvbGwtZW5hYmxlZCc6ICFkaXNhYmxlZFxuICAgICAgfSB9KSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwidGhyZXNob2xkXCI6IFtcInRocmVzaG9sZENoYW5nZWRcIl0sXG4gICAgXCJkaXNhYmxlZFwiOiBbXCJkaXNhYmxlZENoYW5nZWRcIl1cbiAgfTsgfVxufTtcbkluZmluaXRlU2Nyb2xsLnN0eWxlID0gaW5maW5pdGVTY3JvbGxDc3M7XG5cbmNvbnN0IGluZmluaXRlU2Nyb2xsQ29udGVudElvc0NzcyA9IFwiaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50e2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWluLWhlaWdodDo4NHB4O3RleHQtYWxpZ246Y2VudGVyOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX0uaW5maW5pdGUtbG9hZGluZ3ttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDowO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjMycHg7ZGlzcGxheTpub25lO3dpZHRoOjEwMCV9LmluZmluaXRlLWxvYWRpbmctdGV4dHttYXJnaW4tbGVmdDozMnB4O21hcmdpbi1yaWdodDozMnB4O21hcmdpbi10b3A6NHB4O21hcmdpbi1ib3R0b206MH1Ac3VwcG9ydHMgKCgtd2Via2l0LW1hcmdpbi1zdGFydDogMCkgb3IgKG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDApKSBvciAoLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDApey5pbmZpbml0ZS1sb2FkaW5nLXRleHR7bWFyZ2luLWxlZnQ6dW5zZXQ7bWFyZ2luLXJpZ2h0OnVuc2V0Oy13ZWJraXQtbWFyZ2luLXN0YXJ0OjMycHg7bWFyZ2luLWlubGluZS1zdGFydDozMnB4Oy13ZWJraXQtbWFyZ2luLWVuZDozMnB4O21hcmdpbi1pbmxpbmUtZW5kOjMycHh9fS5pbmZpbml0ZS1zY3JvbGwtbG9hZGluZyBpb24taW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQ+LmluZmluaXRlLWxvYWRpbmd7ZGlzcGxheTpibG9ja30uaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtaW9zIC5pbmZpbml0ZS1sb2FkaW5nLXRleHR7Y29sb3I6dmFyKC0taW9uLWNvbG9yLXN0ZXAtNjAwLCAjNjY2NjY2KX0uaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtaW9zIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItbGluZXMtaW9zIGxpbmUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LWlvcyAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWxpbmVzLXNtYWxsLWlvcyBsaW5lLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1pb3MgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1jcmVzY2VudCBjaXJjbGV7c3Ryb2tlOnZhcigtLWlvbi1jb2xvci1zdGVwLTYwMCwgIzY2NjY2Nil9LmluZmluaXRlLXNjcm9sbC1jb250ZW50LWlvcyAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWJ1YmJsZXMgY2lyY2xlLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1pb3MgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1jaXJjbGVzIGNpcmNsZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtaW9zIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItZG90cyBjaXJjbGV7ZmlsbDp2YXIoLS1pb24tY29sb3Itc3RlcC02MDAsICM2NjY2NjYpfVwiO1xuXG5jb25zdCBpbmZpbml0ZVNjcm9sbENvbnRlbnRNZENzcyA9IFwiaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50e2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWluLWhlaWdodDo4NHB4O3RleHQtYWxpZ246Y2VudGVyOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX0uaW5maW5pdGUtbG9hZGluZ3ttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDowO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjMycHg7ZGlzcGxheTpub25lO3dpZHRoOjEwMCV9LmluZmluaXRlLWxvYWRpbmctdGV4dHttYXJnaW4tbGVmdDozMnB4O21hcmdpbi1yaWdodDozMnB4O21hcmdpbi10b3A6NHB4O21hcmdpbi1ib3R0b206MH1Ac3VwcG9ydHMgKCgtd2Via2l0LW1hcmdpbi1zdGFydDogMCkgb3IgKG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDApKSBvciAoLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDApey5pbmZpbml0ZS1sb2FkaW5nLXRleHR7bWFyZ2luLWxlZnQ6dW5zZXQ7bWFyZ2luLXJpZ2h0OnVuc2V0Oy13ZWJraXQtbWFyZ2luLXN0YXJ0OjMycHg7bWFyZ2luLWlubGluZS1zdGFydDozMnB4Oy13ZWJraXQtbWFyZ2luLWVuZDozMnB4O21hcmdpbi1pbmxpbmUtZW5kOjMycHh9fS5pbmZpbml0ZS1zY3JvbGwtbG9hZGluZyBpb24taW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQ+LmluZmluaXRlLWxvYWRpbmd7ZGlzcGxheTpibG9ja30uaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtbWQgLmluZmluaXRlLWxvYWRpbmctdGV4dHtjb2xvcjp2YXIoLS1pb24tY29sb3Itc3RlcC02MDAsICM2NjY2NjYpfS5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1tZCAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWxpbmVzLW1kIGxpbmUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LW1kIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItbGluZXMtc21hbGwtbWQgbGluZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtbWQgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1jcmVzY2VudCBjaXJjbGV7c3Ryb2tlOnZhcigtLWlvbi1jb2xvci1zdGVwLTYwMCwgIzY2NjY2Nil9LmluZmluaXRlLXNjcm9sbC1jb250ZW50LW1kIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItYnViYmxlcyBjaXJjbGUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LW1kIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItY2lyY2xlcyBjaXJjbGUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LW1kIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItZG90cyBjaXJjbGV7ZmlsbDp2YXIoLS1pb24tY29sb3Itc3RlcC02MDAsICM2NjY2NjYpfVwiO1xuXG5jb25zdCBJbmZpbml0ZVNjcm9sbENvbnRlbnQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgaWYgKHRoaXMubG9hZGluZ1NwaW5uZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgICB0aGlzLmxvYWRpbmdTcGlubmVyID0gY29uZmlnLmdldCgnaW5maW5pdGVMb2FkaW5nU3Bpbm5lcicsIGNvbmZpZy5nZXQoJ3NwaW5uZXInLCBtb2RlID09PSAnaW9zJyA/ICdsaW5lcycgOiAnY3Jlc2NlbnQnKSk7XG4gICAgfVxuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczoge1xuICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgIC8vIFVzZWQgaW50ZXJuYWxseSBmb3Igc3R5bGluZ1xuICAgICAgICBbYGluZmluaXRlLXNjcm9sbC1jb250ZW50LSR7bW9kZX1gXTogdHJ1ZVxuICAgICAgfSB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaW5maW5pdGUtbG9hZGluZ1wiIH0sIHRoaXMubG9hZGluZ1NwaW5uZXIgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXJcIiB9LCBoKFwiaW9uLXNwaW5uZXJcIiwgeyBuYW1lOiB0aGlzLmxvYWRpbmdTcGlubmVyIH0pKSksIHRoaXMubG9hZGluZ1RleHQgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbmZpbml0ZS1sb2FkaW5nLXRleHRcIiwgaW5uZXJIVE1MOiBzYW5pdGl6ZURPTVN0cmluZyh0aGlzLmxvYWRpbmdUZXh0KSB9KSkpKSk7XG4gIH1cbn07XG5JbmZpbml0ZVNjcm9sbENvbnRlbnQuc3R5bGUgPSB7XG4gIGlvczogaW5maW5pdGVTY3JvbGxDb250ZW50SW9zQ3NzLFxuICBtZDogaW5maW5pdGVTY3JvbGxDb250ZW50TWRDc3Ncbn07XG5cbmV4cG9ydCB7IEluZmluaXRlU2Nyb2xsIGFzIGlvbl9pbmZpbml0ZV9zY3JvbGwsIEluZmluaXRlU2Nyb2xsQ29udGVudCBhcyBpb25faW5maW5pdGVfc2Nyb2xsX2NvbnRlbnQgfTtcbiJdLCJuYW1lcyI6WyJyIiwicmVnaXN0ZXJJbnN0YW5jZSIsImUiLCJjcmVhdGVFdmVudCIsImMiLCJ3cml0ZVRhc2siLCJmIiwicmVhZFRhc2siLCJoIiwiaSIsImdldEVsZW1lbnQiLCJIIiwiSG9zdCIsImIiLCJnZXRJb25Nb2RlIiwiY29uZmlnIiwicyIsInNhbml0aXplRE9NU3RyaW5nIiwiaW5maW5pdGVTY3JvbGxDc3MiLCJJbmZpbml0ZVNjcm9sbCIsImNvbnN0cnVjdG9yIiwiaG9zdFJlZiIsImlvbkluZmluaXRlIiwidGhyUHgiLCJ0aHJQYyIsImRpZEZpcmUiLCJpc0J1c3kiLCJpc0xvYWRpbmciLCJ0aHJlc2hvbGQiLCJkaXNhYmxlZCIsInBvc2l0aW9uIiwib25TY3JvbGwiLCJzY3JvbGxFbCIsImNhblN0YXJ0IiwiaW5maW5pdGVIZWlnaHQiLCJlbCIsIm9mZnNldEhlaWdodCIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsImhlaWdodCIsImRpc3RhbmNlRnJvbUluZmluaXRlIiwiZW1pdCIsInRocmVzaG9sZENoYW5nZWQiLCJ2YWwiLCJsYXN0SW5kZXhPZiIsInBhcnNlRmxvYXQiLCJkaXNhYmxlZENoYW5nZWQiLCJlbmFibGVTY3JvbGxFdmVudHMiLCJjb25uZWN0ZWRDYWxsYmFjayIsImNvbnRlbnRFbCIsImNsb3Nlc3QiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRTY3JvbGxFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJ1bmRlZmluZWQiLCJjb21wbGV0ZSIsInByZXYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJuZXdTY3JvbGxUb3AiLCJzaG91bGRMaXN0ZW4iLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbmRlciIsIm1vZGUiLCJjbGFzcyIsIndhdGNoZXJzIiwic3R5bGUiLCJpbmZpbml0ZVNjcm9sbENvbnRlbnRJb3NDc3MiLCJpbmZpbml0ZVNjcm9sbENvbnRlbnRNZENzcyIsIkluZmluaXRlU2Nyb2xsQ29udGVudCIsImNvbXBvbmVudERpZExvYWQiLCJsb2FkaW5nU3Bpbm5lciIsImdldCIsIm5hbWUiLCJsb2FkaW5nVGV4dCIsImlubmVySFRNTCIsImlvcyIsIm1kIiwiaW9uX2luZmluaXRlX3Njcm9sbCIsImlvbl9pbmZpbml0ZV9zY3JvbGxfY29udGVudCJdLCJzb3VyY2VSb290Ijoid2VicGFjazovLy8ifQ==