{"version":3,"file":"src_app_pages_legacy-trip_legacy-trip_module_ts-es2015.js","mappings":"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","sources":["./src/app/pages/legacy-trip/legacy-trip.module.ts","./src/app/pages/legacy-trip/legacy-trip.page.ts","./src/app/pages/legacy-trip/legacy-trip.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SharedModule } from '../../modules/shared/shared.module';\r\nimport { SharedComponentsModule } from '../../modules/registration/shared-components.module';\r\nimport { LegacyTripPage } from './legacy-trip.page';\r\nimport { AuthGuard } from '../../core/guards/auth.guard';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LegacyTripPage,\r\n    canActivate: [AuthGuard]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    SharedComponentsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LegacyTripPage]\r\n})\r\nexport class LegacyTripPageModule {}\r\n","import { Component, OnInit, NgZone, OnDestroy } from '@angular/core';\r\nimport { TripLoggerService } from '../../core/services/trip-logger/trip-logger.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { CreateTripDto } from '@varsom-regobs-common/regobs-api';\r\nimport moment from 'moment';\r\nimport { NavController, ModalController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { GeoHazard } from '@varsom-regobs-common/core';\r\nimport { HelpModalPage } from '../../modules/registration/pages/modal-pages/help-modal/help-modal.page';\r\nimport { LoggingService } from '../../modules/shared/services/logging/logging.service';\r\nimport { LogLevel } from '../../modules/shared/services/logging/log-level.model';\r\nimport * as utils from '@nano-sql/core/lib/utilities';\r\nimport { IsEmptyHelper } from '../../core/helpers/is-empty.helper';\r\nimport { SelectOption } from '../../modules/shared/components/input/select/select-option.model';\r\nimport { GeoPositionService } from '../../core/services/geo-position/geo-position.service';\r\nimport { RegobsAuthService } from '../../modules/auth/services/regobs-auth.service';\r\nimport { Geoposition } from '@ionic-native/geolocation/ngx';\r\n\r\nconst DEBUG_TAG = 'LegacyTripPage';\r\n\r\n@Component({\r\n  selector: 'app-legacy-trip',\r\n  templateUrl: './legacy-trip.page.html',\r\n  styleUrls: ['./legacy-trip.page.scss']\r\n})\r\nexport class LegacyTripPage implements OnInit, OnDestroy {\r\n  private tripLoggerSubscription: Subscription;\r\n\r\n  isRunning = false;\r\n  tripDto: CreateTripDto;\r\n  minutes: SelectOption[];\r\n  isLoading = false;\r\n  hasClicked = false;\r\n  isLoadingCurrentPosition = false;\r\n  currentPosition: Geoposition;\r\n\r\n  private startTripSubscription: Subscription;\r\n\r\n  get isValid(): boolean {\r\n    return (\r\n      this.tripDto.ObservationExpectedMinutes !== undefined &&\r\n      this.tripDto.TripTypeID !== undefined &&\r\n      this.currentPosition != null\r\n    );\r\n  }\r\n\r\n  get isEmpty(): boolean {\r\n    return IsEmptyHelper.isEmpty(this.tripDto);\r\n  }\r\n\r\n  constructor(\r\n    private tripLoggerService: TripLoggerService,\r\n    private ngZone: NgZone,\r\n    private regobsAuthService: RegobsAuthService,\r\n    private translateService: TranslateService,\r\n    private geoPositionService: GeoPositionService,\r\n    private navController: NavController,\r\n    private modalController: ModalController,\r\n    private loggingService: LoggingService\r\n  ) {\r\n    this.tripDto = {};\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.isLoading = false;\r\n    this.setHoursToMidnight();\r\n    this.tripLoggerSubscription = this.tripLoggerService\r\n      .getLegacyTripAsObservable()\r\n      .subscribe((val) => {\r\n        this.ngZone.run(() => {\r\n          if (val) {\r\n            this.tripDto = val.request;\r\n            this.isRunning = true;\r\n          } else {\r\n            this.isRunning = false;\r\n          }\r\n        });\r\n      });\r\n    this.initCurrentPosition();\r\n  }\r\n\r\n  private async initCurrentPosition(): Promise<void> {\r\n    this.isLoadingCurrentPosition = true;\r\n    try {\r\n      this.currentPosition = await this.geoPositionService.getSingleCurrentPosition();\r\n      if (this.currentPosition == null) {\r\n        this.tripLoggerService.showTripNoPositionErrorMessage();\r\n      }\r\n    } catch (error) {\r\n      this.loggingService.log(\r\n        'Could not get geolocation',\r\n        error,\r\n        LogLevel.Warning,\r\n        DEBUG_TAG\r\n      );\r\n      this.tripLoggerService.showTripNoPositionErrorMessage();\r\n    } finally {\r\n      this.ngZone.run(() => {\r\n        this.isLoadingCurrentPosition = false;\r\n      });\r\n    }\r\n  }\r\n\r\n  private setHoursToMidnight() {\r\n    this.minutes = [];\r\n    for (let i = moment().get('hours'); i <= 24; i++) {\r\n      this.minutes.push({ text: `${i}:00`, id: i * 60 });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.tripLoggerSubscription) {\r\n      this.tripLoggerSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  async startTrip(): Promise<void> {\r\n    this.cancel();\r\n    if (!this.isValid) {\r\n      this.hasClicked = true;\r\n      return;\r\n    } else {\r\n      const loggedInUser = await this.regobsAuthService.getLoggedInUserAsPromise();\r\n      if (loggedInUser && loggedInUser.isLoggedIn) {\r\n        this.isLoading = true;\r\n        // this.tripDto.ObserverGuid = loggedInUser.user.Guid; // TODO: Fix api to use access token for this call\r\n        this.tripDto.GeoHazardID = GeoHazard.Snow;\r\n        this.tripDto.DeviceGuid = utils.uuid();\r\n        try {\r\n          if (this.currentPosition && this.currentPosition.coords) {\r\n            this.tripDto.Lat = this.currentPosition.coords.latitude.toString();\r\n            this.tripDto.Lng = this.currentPosition.coords.longitude.toString();\r\n            this.startTripSubscription = this.tripLoggerService\r\n              .startLegacyTrip(this.tripDto)\r\n              .subscribe(\r\n                () => this.navController.navigateRoot('/'),\r\n                (error) => {\r\n                  this.loggingService.error(\r\n                    error,\r\n                    'Error when starting trip',\r\n                    DEBUG_TAG\r\n                  );\r\n                  this.tripLoggerService.showTripErrorMessage(true);\r\n                },\r\n                () => {\r\n                  this.ngZone.run(() => {\r\n                    this.isLoading = false;\r\n                  });\r\n                }\r\n              );\r\n          } else {\r\n            this.isLoading = false;\r\n            this.tripLoggerService.showTripNoPositionErrorMessage();\r\n          }\r\n        } catch (error) {\r\n          this.isLoading = false;\r\n          this.loggingService.log(\r\n            'Could not get geolocation',\r\n            error,\r\n            LogLevel.Warning,\r\n            DEBUG_TAG\r\n          );\r\n          this.tripLoggerService.showTripNoPositionErrorMessage();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  cancel(): void {\r\n    if (this.startTripSubscription && !this.startTripSubscription.closed) {\r\n      this.startTripSubscription.unsubscribe();\r\n      this.startTripSubscription = undefined;\r\n    }\r\n    this.isLoading = false;\r\n  }\r\n\r\n  stopTrip(): void {\r\n    this.cancel();\r\n    this.tripLoggerService.stopLegacyTrip();\r\n  }\r\n\r\n  async showHelp(): Promise<void> {\r\n    const translation = await this.translateService\r\n      .get('TRIP.LEGACY_HELP_TEXT')\r\n      .toPromise();\r\n    const modal = await this.modalController.create({\r\n      component: HelpModalPage,\r\n      componentProps: {\r\n        helpText: translation\r\n      }\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n  clearPage(): void {\r\n    this.tripDto = {};\r\n    this.initCurrentPosition();\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\" defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>{{\"TRIP.TRIP\" | translate}}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <ion-grid class=\"pull-last-bottom ion-no-paddig ion-no-margin\">\r\n    <ion-row *ngIf=\"!isLoading\">\r\n      <ion-col class=\"ion-no-padding\">\r\n        <ion-list lines=\"full\">\r\n          <app-kdv-select [labelColor]=\"(hasClicked && tripDto.TripTypeID === undefined) ? 'danger' : 'medium'\"\r\n            [disabled]=\"isRunning || isLoading\" title=\"TRIP.TRIP_TYPE\" kdvKey=\"TripTypeKDV\"\r\n            [(value)]=\"tripDto.TripTypeID\"></app-kdv-select>\r\n          <ion-item>\r\n            <ion-label [color]=\"(hasClicked && tripDto.ObservationExpectedMinutes === undefined) ? 'danger' : 'medium'\"\r\n              color=\"medium\" position=\"stacked\" class=\"ion-text-uppercase\">{{'TRIP.TRIP_END_DESCRIPTION'\r\n              | translate}}</ion-label>\r\n            <app-select [disabled]=\"isRunning || isLoading\" [(selectedValue)]=\"tripDto.ObservationExpectedMinutes\"\r\n              [options]=\"minutes\" title=\"TRIP.TRIP_END_DESCRIPTION\"></app-select>\r\n          </ion-item>\r\n          <app-text-comment title=\"DIALOGS.COMMENT\" [disabled]=\"isRunning || isLoading\" [(value)]=\"tripDto.Comment\">\r\n          </app-text-comment>\r\n          <ion-item-divider>\r\n            <ion-label class=\"ion-text-wrap\">\r\n              {{'TRIP.COMMENT_DESCRIPTION' | translate}}\r\n            </ion-label>\r\n          </ion-item-divider>\r\n        </ion-list>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ion-row *ngIf=\"isLoadingCurrentPosition\">\r\n      <ion-col class=\"ion-text-center\">\r\n        <ion-spinner name=\"dots\"></ion-spinner>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ng-container *ngIf=\"isLoading\">\r\n      <ion-row>\r\n        <ion-col class=\"ion-no-padding ion-text-center\">\r\n          <div>\r\n            <ion-spinner name=\"dots\"></ion-spinner>\r\n          </div>\r\n          <div>\r\n            <ion-button fill=\"clear\" type=\"button\" (click)=\"cancel()\">{{'ALERT.CANCEL' | translate}}</ion-button>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ng-container>\r\n    <ion-row>\r\n      <ion-col class=\"ion-no-padding\">\r\n        <ion-grid class=\"ion-no-padding\">\r\n          <ion-row>\r\n            <ion-col class=\"ion-text-center\">\r\n              <ion-button (click)=\"showHelp()\" fill=\"clear\">{{'HELP.TITLE' | translate}}</ion-button>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row class=\"white-background\">\r\n            <ion-col size=\"12\" class=\"start-buttons\">\r\n              <ion-button (click)=\"startTrip()\" [disabled]=\"isLoading || !isValid\" *ngIf=\"!isRunning\"\r\n                class=\"back-button\" expand=\"block\" color=\"varsom-orange\">\r\n                {{ 'TRIP.START_TRIP' | translate }}\r\n              </ion-button>\r\n              <ion-button *ngIf=\"isRunning\" (click)=\"stopTrip()\" [disabled]=\"isLoading\" class=\"back-button\"\r\n                expand=\"block\" color=\"varsom-orange\">\r\n                {{ 'TRIP.STOP_TRIP' | translate }}\r\n              </ion-button>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row class=\"white-background\" *ngIf=\"!isEmpty\">\r\n            <ion-col class=\"ion-text-center\">\r\n              <ion-button (click)=\"clearPage()\" [disabled]=\"isRunning || isLoading\" class=\"reset-button\" color=\"dark\"\r\n                size=\"small\" fill=\"clear\">\r\n                <svg-icon src=\"/assets/icon/reset.svg\"></svg-icon>\r\n                {{\"REGISTRATION.RESET\" | translate}}\r\n              </ion-button>\r\n            </ion-col>\r\n          </ion-row>\r\n        </ion-grid>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</ion-content>"],"names":[],"sourceRoot":"webpack:///"}