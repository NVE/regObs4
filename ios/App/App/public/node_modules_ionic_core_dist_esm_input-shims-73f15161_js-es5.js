(function () {
  "use strict";

  (self["webpackChunkregobs4"] = self["webpackChunkregobs4"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-73f15161_js"], {
    /***/
    40264: function _(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
      __webpack_require__.r(__webpack_exports__);
      /* harmony export */


      __webpack_require__.d(__webpack_exports__, {
        /* harmony export */
        "startInputShims": function startInputShims() {
          return (
            /* binding */
            _startInputShims
          );
        }
        /* harmony export */

      });
      /* harmony import */


      var C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */
      80151);
      /* harmony import */


      var _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./helpers-dd7e4b7b.js */
      40693);

      var cloneMap = new WeakMap();

      var relocateInput = function relocateInput(componentEl, inputEl, shouldRelocate) {
        var inputRelativeY = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;

        if (cloneMap.has(componentEl) === shouldRelocate) {
          return;
        }

        if (shouldRelocate) {
          addClone(componentEl, inputEl, inputRelativeY);
        } else {
          removeClone(componentEl, inputEl);
        }
      };

      var isFocused = function isFocused(input) {
        return input === input.getRootNode().activeElement;
      };

      var addClone = function addClone(componentEl, inputEl, inputRelativeY) {
        // this allows for the actual input to receive the focus from
        // the user's touch event, but before it receives focus, it
        // moves the actual input to a location that will not screw
        // up the app's layout, and does not allow the native browser
        // to attempt to scroll the input into place (messing up headers/footers)
        // the cloned input fills the area of where native input should be
        // while the native input fakes out the browser by relocating itself
        // before it receives the actual focus event
        // We hide the focused input (with the visible caret) invisible by making it scale(0),
        var parentEl = inputEl.parentNode; // DOM WRITES

        var clonedEl = inputEl.cloneNode(false);
        clonedEl.classList.add('cloned-input');
        clonedEl.tabIndex = -1;
        parentEl.appendChild(clonedEl);
        cloneMap.set(componentEl, clonedEl);
        var doc = componentEl.ownerDocument;
        var tx = doc.dir === 'rtl' ? 9999 : -9999;
        componentEl.style.pointerEvents = 'none';
        inputEl.style.transform = "translate3d(".concat(tx, "px,").concat(inputRelativeY, "px,0) scale(0)");
      };

      var removeClone = function removeClone(componentEl, inputEl) {
        var clone = cloneMap.get(componentEl);

        if (clone) {
          cloneMap["delete"](componentEl);
          clone.remove();
        }

        componentEl.style.pointerEvents = '';
        inputEl.style.transform = '';
      };

      var enableHideCaretOnScroll = function enableHideCaretOnScroll(componentEl, inputEl, scrollEl) {
        if (!scrollEl || !inputEl) {
          return function () {
            return;
          };
        }

        var scrollHideCaret = function scrollHideCaret(shouldHideCaret) {
          if (isFocused(inputEl)) {
            relocateInput(componentEl, inputEl, shouldHideCaret);
          }
        };

        var onBlur = function onBlur() {
          return relocateInput(componentEl, inputEl, false);
        };

        var hideCaret = function hideCaret() {
          return scrollHideCaret(true);
        };

        var showCaret = function showCaret() {
          return scrollHideCaret(false);
        };

        (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.a)(scrollEl, 'ionScrollStart', hideCaret);
        (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.a)(scrollEl, 'ionScrollEnd', showCaret);
        inputEl.addEventListener('blur', onBlur);
        return function () {
          (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.b)(scrollEl, 'ionScrollStart', hideCaret);
          (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.b)(scrollEl, 'ionScrollEnd', showCaret);
          inputEl.addEventListener('ionBlur', onBlur);
        };
      };

      var SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';

      var enableInputBlurring = function enableInputBlurring() {
        var focused = true;
        var didScroll = false;
        var doc = document;

        var onScroll = function onScroll() {
          didScroll = true;
        };

        var onFocusin = function onFocusin() {
          focused = true;
        };

        var onTouchend = function onTouchend(ev) {
          // if app did scroll return early
          if (didScroll) {
            didScroll = false;
            return;
          }

          var active = doc.activeElement;

          if (!active) {
            return;
          } // only blur if the active element is a text-input or a textarea


          if (active.matches(SKIP_SELECTOR)) {
            return;
          } // if the selected target is the active element, do not blur


          var tapped = ev.target;

          if (tapped === active) {
            return;
          }

          if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
            return;
          }

          focused = false; // TODO: find a better way, why 50ms?

          setTimeout(function () {
            if (!focused) {
              active.blur();
            }
          }, 50);
        };

        (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.a)(doc, 'ionScrollStart', onScroll);
        doc.addEventListener('focusin', onFocusin, true);
        doc.addEventListener('touchend', onTouchend, false);
        return function () {
          (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.b)(doc, 'ionScrollStart', onScroll, true);
          doc.removeEventListener('focusin', onFocusin, true);
          doc.removeEventListener('touchend', onTouchend, false);
        };
      };

      var SCROLL_ASSIST_SPEED = 0.3;

      var getScrollData = function getScrollData(componentEl, contentEl, keyboardHeight) {
        var itemEl = componentEl.closest('ion-item,[ion-item]') || componentEl;
        return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight);
      };

      var calcScrollData = function calcScrollData(inputRect, contentRect, keyboardHeight, platformHeight) {
        // compute input's Y values relative to the body
        var inputTop = inputRect.top;
        var inputBottom = inputRect.bottom; // compute visible area

        var visibleAreaTop = contentRect.top;
        var visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight); // compute safe area

        var safeAreaTop = visibleAreaTop + 15;
        var safeAreaBottom = visibleAreaBottom * 0.75; // figure out if each edge of the input is within the safe area

        var distanceToBottom = safeAreaBottom - inputBottom;
        var distanceToTop = safeAreaTop - inputTop; // desiredScrollAmount is the negated distance to the safe area according to our calculations.

        var desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0); // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
        // gets focus, so make sure we don't scroll the input above the visible area

        var scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
        var distance = Math.abs(scrollAmount);
        var duration = distance / SCROLL_ASSIST_SPEED;
        var scrollDuration = Math.min(400, Math.max(150, duration));
        return {
          scrollAmount: scrollAmount,
          scrollDuration: scrollDuration,
          scrollPadding: keyboardHeight,
          inputSafeY: -(inputTop - safeAreaTop) + 4
        };
      };

      var enableScrollAssist = function enableScrollAssist(componentEl, inputEl, contentEl, footerEl, keyboardHeight) {
        var coord;

        var touchStart = function touchStart(ev) {
          coord = (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.p)(ev);
        };

        var touchEnd = function touchEnd(ev) {
          // input cover touchend/mouseup
          if (!coord) {
            return;
          } // get where the touchend/mouseup ended


          var endCoord = (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.p)(ev); // focus this input if the pointer hasn't moved XX pixels
          // and the input doesn't already have focus

          if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {
            ev.stopPropagation(); // begin the input focus process

            jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight);
          }
        };

        componentEl.addEventListener('touchstart', touchStart, true);
        componentEl.addEventListener('touchend', touchEnd, true);
        return function () {
          componentEl.removeEventListener('touchstart', touchStart, true);
          componentEl.removeEventListener('touchend', touchEnd, true);
        };
      };

      var jsSetFocus = /*#__PURE__*/function () {
        var _ref = (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(componentEl, inputEl, contentEl, footerEl, keyboardHeight) {
          var scrollData, scrollContentTimeout, scrollContent, doubleKeyboardEventListener, scrollEl, totalScrollAmount;
          return regeneratorRuntime.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  if (!(!contentEl && !footerEl)) {
                    _context2.next = 2;
                    break;
                  }

                  return _context2.abrupt("return");

                case 2:
                  scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);

                  if (!(contentEl && Math.abs(scrollData.scrollAmount) < 4)) {
                    _context2.next = 6;
                    break;
                  }

                  // the text input is in a safe position that doesn't
                  // require it to be scrolled into view, just set focus now
                  inputEl.focus();
                  return _context2.abrupt("return");

                case 6:
                  // temporarily move the focus to the focus holder so the browser
                  // doesn't freak out while it's trying to get the input in place
                  // at this point the native text input still does not have focus
                  relocateInput(componentEl, inputEl, true, scrollData.inputSafeY);
                  inputEl.focus();
                  /**
                   * Relocating/Focusing input causes the
                   * click event to be cancelled, so
                   * manually fire one here.
                   */

                  (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.r)(function () {
                    return componentEl.click();
                  });
                  /* tslint:disable-next-line */

                  if (!(typeof window !== 'undefined')) {
                    _context2.next = 22;
                    break;
                  }

                  scrollContent = /*#__PURE__*/function () {
                    var _ref2 = (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
                      return regeneratorRuntime.wrap(function _callee$(_context) {
                        while (1) {
                          switch (_context.prev = _context.next) {
                            case 0:
                              // clean up listeners and timeouts
                              if (scrollContentTimeout !== undefined) {
                                clearTimeout(scrollContentTimeout);
                              }

                              window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
                              window.removeEventListener('ionKeyboardDidShow', scrollContent); // scroll the input into place

                              if (!contentEl) {
                                _context.next = 6;
                                break;
                              }

                              _context.next = 6;
                              return contentEl.scrollByPoint(0, scrollData.scrollAmount, scrollData.scrollDuration);

                            case 6:
                              // the scroll view is in the correct position now
                              // give the native text input focus
                              relocateInput(componentEl, inputEl, false, scrollData.inputSafeY); // ensure this is the focused input

                              inputEl.focus();

                            case 8:
                            case "end":
                              return _context.stop();
                          }
                        }
                      }, _callee);
                    }));

                    return function scrollContent() {
                      return _ref2.apply(this, arguments);
                    };
                  }();

                  doubleKeyboardEventListener = function doubleKeyboardEventListener() {
                    window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
                    window.addEventListener('ionKeyboardDidShow', scrollContent);
                  };

                  if (!contentEl) {
                    _context2.next = 21;
                    break;
                  }

                  _context2.next = 15;
                  return contentEl.getScrollElement();

                case 15:
                  scrollEl = _context2.sent;

                  /**
                   * scrollData will only consider the amount we need
                   * to scroll in order to properly bring the input
                   * into view. It will not consider the amount
                   * we can scroll in the content element.
                   * As a result, scrollData may request a greater
                   * scroll position than is currently available
                   * in the DOM. If this is the case, we need to
                   * wait for the webview to resize/the keyboard
                   * to show in order for additional scroll
                   * bandwidth to become available.
                   */
                  totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;

                  if (!(scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop)) {
                    _context2.next = 21;
                    break;
                  }

                  /**
                   * On iOS devices, the system will show a "Passwords" bar above the keyboard
                   * after the initial keyboard is shown. This prevents the webview from resizing
                   * until the "Passwords" bar is shown, so we need to wait for that to happen first.
                   */
                  if (inputEl.type === 'password') {
                    // Add 50px to account for the "Passwords" bar
                    scrollData.scrollAmount += 50;
                    window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
                  } else {
                    window.addEventListener('ionKeyboardDidShow', scrollContent);
                  }
                  /**
                   * This should only fire in 2 instances:
                   * 1. The app is very slow.
                   * 2. The app is running in a browser on an old OS
                   * that does not support Ionic Keyboard Events
                   */


                  scrollContentTimeout = setTimeout(scrollContent, 1000);
                  return _context2.abrupt("return");

                case 21:
                  scrollContent();

                case 22:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2);
        }));

        return function jsSetFocus(_x, _x2, _x3, _x4, _x5) {
          return _ref.apply(this, arguments);
        };
      }();

      var hasPointerMoved = function hasPointerMoved(threshold, startCoord, endCoord) {
        if (startCoord && endCoord) {
          var deltaX = startCoord.x - endCoord.x;
          var deltaY = startCoord.y - endCoord.y;
          var distance = deltaX * deltaX + deltaY * deltaY;
          return distance > threshold * threshold;
        }

        return false;
      };

      var PADDING_TIMER_KEY = '$ionPaddingTimer';

      var enableScrollPadding = function enableScrollPadding(keyboardHeight) {
        var doc = document;

        var onFocusin = function onFocusin(ev) {
          setScrollPadding(ev.target, keyboardHeight);
        };

        var onFocusout = function onFocusout(ev) {
          setScrollPadding(ev.target, 0);
        };

        doc.addEventListener('focusin', onFocusin);
        doc.addEventListener('focusout', onFocusout);
        return function () {
          doc.removeEventListener('focusin', onFocusin);
          doc.removeEventListener('focusout', onFocusout);
        };
      };

      var setScrollPadding = function setScrollPadding(input, keyboardHeight) {
        if (input.tagName !== 'INPUT') {
          return;
        }

        if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {
          return;
        }

        if (input.parentElement && input.parentElement.parentElement && input.parentElement.parentElement.tagName === 'ION-SEARCHBAR') {
          return;
        }

        var el = input.closest('ion-content');

        if (el === null) {
          return;
        }

        var timer = el[PADDING_TIMER_KEY];

        if (timer) {
          clearTimeout(timer);
        }

        if (keyboardHeight > 0) {
          el.style.setProperty('--keyboard-offset', "".concat(keyboardHeight, "px"));
        } else {
          el[PADDING_TIMER_KEY] = setTimeout(function () {
            el.style.setProperty('--keyboard-offset', '0px');
          }, 120);
        }
      };

      var INPUT_BLURRING = true;
      var SCROLL_PADDING = true;

      var _startInputShims = function _startInputShims(config) {
        var doc = document;
        var keyboardHeight = config.getNumber('keyboardHeight', 290);
        var scrollAssist = config.getBoolean('scrollAssist', true);
        var hideCaret = config.getBoolean('hideCaretOnScroll', true);
        var inputBlurring = config.getBoolean('inputBlurring', true);
        var scrollPadding = config.getBoolean('scrollPadding', true);
        var inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));
        var hideCaretMap = new WeakMap();
        var scrollAssistMap = new WeakMap();

        var registerInput = /*#__PURE__*/function () {
          var _ref3 = (0, C_Repos_regobs_regObs4_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(componentEl) {
            var inputRoot, inputEl, scrollEl, footerEl, rmFn, _rmFn;

            return regeneratorRuntime.wrap(function _callee3$(_context3) {
              while (1) {
                switch (_context3.prev = _context3.next) {
                  case 0:
                    _context3.next = 2;
                    return new Promise(function (resolve) {
                      return (0, _helpers_dd7e4b7b_js__WEBPACK_IMPORTED_MODULE_1__.c)(componentEl, resolve);
                    });

                  case 2:
                    inputRoot = componentEl.shadowRoot || componentEl;
                    inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
                    scrollEl = componentEl.closest('ion-content');
                    footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;

                    if (inputEl) {
                      _context3.next = 8;
                      break;
                    }

                    return _context3.abrupt("return");

                  case 8:
                    if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
                      rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
                      hideCaretMap.set(componentEl, rmFn);
                    }

                    if ((!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
                      _rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight);
                      scrollAssistMap.set(componentEl, _rmFn);
                    }

                  case 10:
                  case "end":
                    return _context3.stop();
                }
              }
            }, _callee3);
          }));

          return function registerInput(_x6) {
            return _ref3.apply(this, arguments);
          };
        }();

        var unregisterInput = function unregisterInput(componentEl) {
          if (hideCaret) {
            var fn = hideCaretMap.get(componentEl);

            if (fn) {
              fn();
            }

            hideCaretMap["delete"](componentEl);
          }

          if (scrollAssist) {
            var _fn = scrollAssistMap.get(componentEl);

            if (_fn) {
              _fn();
            }

            scrollAssistMap["delete"](componentEl);
          }
        };

        if (inputBlurring && INPUT_BLURRING) {
          enableInputBlurring();
        }

        if (scrollPadding && SCROLL_PADDING) {
          enableScrollPadding(keyboardHeight);
        } // Input might be already loaded in the DOM before ion-device-hacks did.
        // At this point we need to look for all of the inputs not registered yet
        // and register them.


        for (var _i = 0, _inputs = inputs; _i < _inputs.length; _i++) {
          var input = _inputs[_i];
          registerInput(input);
        }

        doc.addEventListener('ionInputDidLoad', function (ev) {
          registerInput(ev.detail);
        });
        doc.addEventListener('ionInputDidUnload', function (ev) {
          unregisterInput(ev.detail);
        });
      };
      /***/

    }
  }]);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFxQixpQkFBckJBLEVBQTBDMkIsWUFBRCxFQUFRO0FBQy9Da0csdUJBQWEsQ0FBQ2xHLEVBQUUsQ0FBQzRHLE1BQUosQ0FBYlY7QUFERjtBQUdBN0gsV0FBRyxDQUFDaUIsZ0JBQUpqQixDQUFxQixtQkFBckJBLEVBQTRDMkIsWUFBRCxFQUFRO0FBQ2pEMEcseUJBQWUsQ0FBQzFHLEVBQUUsQ0FBQzRHLE1BQUosQ0FBZkY7QUFERjtBQTNERjs7OzsiLCJuYW1lcyI6WyJjbG9uZU1hcCIsIldlYWtNYXAiLCJyZWxvY2F0ZUlucHV0IiwiY29tcG9uZW50RWwiLCJpbnB1dEVsIiwic2hvdWxkUmVsb2NhdGUiLCJpbnB1dFJlbGF0aXZlWSIsImhhcyIsImFkZENsb25lIiwicmVtb3ZlQ2xvbmUiLCJpc0ZvY3VzZWQiLCJpbnB1dCIsImdldFJvb3ROb2RlIiwiYWN0aXZlRWxlbWVudCIsInBhcmVudEVsIiwicGFyZW50Tm9kZSIsImNsb25lZEVsIiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGFiSW5kZXgiLCJhcHBlbmRDaGlsZCIsInNldCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJ0eCIsImRpciIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsInRyYW5zZm9ybSIsImNsb25lIiwiZ2V0IiwicmVtb3ZlIiwiZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwiLCJzY3JvbGxFbCIsInNjcm9sbEhpZGVDYXJldCIsInNob3VsZEhpZGVDYXJldCIsIm9uQmx1ciIsImhpZGVDYXJldCIsInNob3dDYXJldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiU0tJUF9TRUxFQ1RPUiIsImVuYWJsZUlucHV0Qmx1cnJpbmciLCJmb2N1c2VkIiwiZGlkU2Nyb2xsIiwiZG9jdW1lbnQiLCJvblNjcm9sbCIsIm9uRm9jdXNpbiIsIm9uVG91Y2hlbmQiLCJldiIsImFjdGl2ZSIsIm1hdGNoZXMiLCJ0YXBwZWQiLCJ0YXJnZXQiLCJjbG9zZXN0Iiwic2V0VGltZW91dCIsImJsdXIiLCJTQ1JPTExfQVNTSVNUX1NQRUVEIiwiZ2V0U2Nyb2xsRGF0YSIsImNvbnRlbnRFbCIsImtleWJvYXJkSGVpZ2h0IiwiaXRlbUVsIiwiY2FsY1Njcm9sbERhdGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJkZWZhdWx0VmlldyIsImlubmVySGVpZ2h0IiwiaW5wdXRSZWN0IiwiY29udGVudFJlY3QiLCJwbGF0Zm9ybUhlaWdodCIsImlucHV0VG9wIiwidG9wIiwiaW5wdXRCb3R0b20iLCJib3R0b20iLCJ2aXNpYmxlQXJlYVRvcCIsInZpc2libGVBcmVhQm90dG9tIiwiTWF0aCIsIm1pbiIsInNhZmVBcmVhVG9wIiwic2FmZUFyZWFCb3R0b20iLCJkaXN0YW5jZVRvQm90dG9tIiwiZGlzdGFuY2VUb1RvcCIsImRlc2lyZWRTY3JvbGxBbW91bnQiLCJyb3VuZCIsInNjcm9sbEFtb3VudCIsImRpc3RhbmNlIiwiYWJzIiwiZHVyYXRpb24iLCJzY3JvbGxEdXJhdGlvbiIsIm1heCIsInNjcm9sbFBhZGRpbmciLCJpbnB1dFNhZmVZIiwiZW5hYmxlU2Nyb2xsQXNzaXN0IiwiZm9vdGVyRWwiLCJjb29yZCIsInRvdWNoU3RhcnQiLCJwb2ludGVyQ29vcmQiLCJ0b3VjaEVuZCIsImVuZENvb3JkIiwiaGFzUG9pbnRlck1vdmVkIiwic3RvcFByb3BhZ2F0aW9uIiwianNTZXRGb2N1cyIsInNjcm9sbERhdGEiLCJmb2N1cyIsInJhZiIsImNsaWNrIiwid2luZG93Iiwic2Nyb2xsQ29udGVudCIsInNjcm9sbENvbnRlbnRUaW1lb3V0IiwidW5kZWZpbmVkIiwiY2xlYXJUaW1lb3V0IiwiZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyIiwic2Nyb2xsQnlQb2ludCIsImdldFNjcm9sbEVsZW1lbnQiLCJ0b3RhbFNjcm9sbEFtb3VudCIsInNjcm9sbEhlaWdodCIsImNsaWVudEhlaWdodCIsInNjcm9sbFRvcCIsInR5cGUiLCJ0aHJlc2hvbGQiLCJzdGFydENvb3JkIiwiZGVsdGFYIiwieCIsImRlbHRhWSIsInkiLCJQQURESU5HX1RJTUVSX0tFWSIsImVuYWJsZVNjcm9sbFBhZGRpbmciLCJzZXRTY3JvbGxQYWRkaW5nIiwib25Gb2N1c291dCIsInRhZ05hbWUiLCJwYXJlbnRFbGVtZW50IiwiZWwiLCJ0aW1lciIsInNldFByb3BlcnR5IiwiSU5QVVRfQkxVUlJJTkciLCJTQ1JPTExfUEFERElORyIsInN0YXJ0SW5wdXRTaGltcyIsImNvbmZpZyIsImdldE51bWJlciIsInNjcm9sbEFzc2lzdCIsImdldEJvb2xlYW4iLCJpbnB1dEJsdXJyaW5nIiwiaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImhpZGVDYXJldE1hcCIsInNjcm9sbEFzc2lzdE1hcCIsInJlZ2lzdGVySW5wdXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNvbXBvbmVudE9uUmVhZHkiLCJpbnB1dFJvb3QiLCJzaGFkb3dSb290IiwicXVlcnlTZWxlY3RvciIsInJtRm4iLCJ1bnJlZ2lzdGVySW5wdXQiLCJmbiIsImRldGFpbCJdLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lucHV0LXNoaW1zLTczZjE1MTYxLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGEgYXMgYWRkRXZlbnRMaXN0ZW5lciwgYiBhcyByZW1vdmVFdmVudExpc3RlbmVyLCByIGFzIHJhZiwgcCBhcyBwb2ludGVyQ29vcmQsIGMgYXMgY29tcG9uZW50T25SZWFkeSB9IGZyb20gJy4vaGVscGVycy1kZDdlNGI3Yi5qcyc7XG5cbmNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlbG9jYXRlSW5wdXQgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZFJlbG9jYXRlLCBpbnB1dFJlbGF0aXZlWSA9IDApID0+IHtcbiAgaWYgKGNsb25lTWFwLmhhcyhjb21wb25lbnRFbCkgPT09IHNob3VsZFJlbG9jYXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzaG91bGRSZWxvY2F0ZSkge1xuICAgIGFkZENsb25lKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBpbnB1dFJlbGF0aXZlWSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmVtb3ZlQ2xvbmUoY29tcG9uZW50RWwsIGlucHV0RWwpO1xuICB9XG59O1xuY29uc3QgaXNGb2N1c2VkID0gKGlucHV0KSA9PiB7XG4gIHJldHVybiBpbnB1dCA9PT0gaW5wdXQuZ2V0Um9vdE5vZGUoKS5hY3RpdmVFbGVtZW50O1xufTtcbmNvbnN0IGFkZENsb25lID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBpbnB1dFJlbGF0aXZlWSkgPT4ge1xuICAvLyB0aGlzIGFsbG93cyBmb3IgdGhlIGFjdHVhbCBpbnB1dCB0byByZWNlaXZlIHRoZSBmb2N1cyBmcm9tXG4gIC8vIHRoZSB1c2VyJ3MgdG91Y2ggZXZlbnQsIGJ1dCBiZWZvcmUgaXQgcmVjZWl2ZXMgZm9jdXMsIGl0XG4gIC8vIG1vdmVzIHRoZSBhY3R1YWwgaW5wdXQgdG8gYSBsb2NhdGlvbiB0aGF0IHdpbGwgbm90IHNjcmV3XG4gIC8vIHVwIHRoZSBhcHAncyBsYXlvdXQsIGFuZCBkb2VzIG5vdCBhbGxvdyB0aGUgbmF0aXZlIGJyb3dzZXJcbiAgLy8gdG8gYXR0ZW1wdCB0byBzY3JvbGwgdGhlIGlucHV0IGludG8gcGxhY2UgKG1lc3NpbmcgdXAgaGVhZGVycy9mb290ZXJzKVxuICAvLyB0aGUgY2xvbmVkIGlucHV0IGZpbGxzIHRoZSBhcmVhIG9mIHdoZXJlIG5hdGl2ZSBpbnB1dCBzaG91bGQgYmVcbiAgLy8gd2hpbGUgdGhlIG5hdGl2ZSBpbnB1dCBmYWtlcyBvdXQgdGhlIGJyb3dzZXIgYnkgcmVsb2NhdGluZyBpdHNlbGZcbiAgLy8gYmVmb3JlIGl0IHJlY2VpdmVzIHRoZSBhY3R1YWwgZm9jdXMgZXZlbnRcbiAgLy8gV2UgaGlkZSB0aGUgZm9jdXNlZCBpbnB1dCAod2l0aCB0aGUgdmlzaWJsZSBjYXJldCkgaW52aXNpYmxlIGJ5IG1ha2luZyBpdCBzY2FsZSgwKSxcbiAgY29uc3QgcGFyZW50RWwgPSBpbnB1dEVsLnBhcmVudE5vZGU7XG4gIC8vIERPTSBXUklURVNcbiAgY29uc3QgY2xvbmVkRWwgPSBpbnB1dEVsLmNsb25lTm9kZShmYWxzZSk7XG4gIGNsb25lZEVsLmNsYXNzTGlzdC5hZGQoJ2Nsb25lZC1pbnB1dCcpO1xuICBjbG9uZWRFbC50YWJJbmRleCA9IC0xO1xuICBwYXJlbnRFbC5hcHBlbmRDaGlsZChjbG9uZWRFbCk7XG4gIGNsb25lTWFwLnNldChjb21wb25lbnRFbCwgY2xvbmVkRWwpO1xuICBjb25zdCBkb2MgPSBjb21wb25lbnRFbC5vd25lckRvY3VtZW50O1xuICBjb25zdCB0eCA9IGRvYy5kaXIgPT09ICdydGwnID8gOTk5OSA6IC05OTk5O1xuICBjb21wb25lbnRFbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICBpbnB1dEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3R4fXB4LCR7aW5wdXRSZWxhdGl2ZVl9cHgsMCkgc2NhbGUoMClgO1xufTtcbmNvbnN0IHJlbW92ZUNsb25lID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsKSA9PiB7XG4gIGNvbnN0IGNsb25lID0gY2xvbmVNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgaWYgKGNsb25lKSB7XG4gICAgY2xvbmVNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICBjbG9uZS5yZW1vdmUoKTtcbiAgfVxuICBjb21wb25lbnRFbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJyc7XG4gIGlucHV0RWwuc3R5bGUudHJhbnNmb3JtID0gJyc7XG59O1xuXG5jb25zdCBlbmFibGVIaWRlQ2FyZXRPblNjcm9sbCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2Nyb2xsRWwpID0+IHtcbiAgaWYgKCFzY3JvbGxFbCB8fCAhaW5wdXRFbCkge1xuICAgIHJldHVybiAoKSA9PiB7IHJldHVybjsgfTtcbiAgfVxuICBjb25zdCBzY3JvbGxIaWRlQ2FyZXQgPSAoc2hvdWxkSGlkZUNhcmV0KSA9PiB7XG4gICAgaWYgKGlzRm9jdXNlZChpbnB1dEVsKSkge1xuICAgICAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkSGlkZUNhcmV0KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG9uQmx1ciA9ICgpID0+IHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIGZhbHNlKTtcbiAgY29uc3QgaGlkZUNhcmV0ID0gKCkgPT4gc2Nyb2xsSGlkZUNhcmV0KHRydWUpO1xuICBjb25zdCBzaG93Q2FyZXQgPSAoKSA9PiBzY3JvbGxIaWRlQ2FyZXQoZmFsc2UpO1xuICBhZGRFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICBhZGRFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsRW5kJywgc2hvd0NhcmV0KTtcbiAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgb25CbHVyKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxFbmQnLCBzaG93Q2FyZXQpO1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignaW9uQmx1cicsIG9uQmx1cik7XG4gIH07XG59O1xuXG5jb25zdCBTS0lQX1NFTEVDVE9SID0gJ2lucHV0LCB0ZXh0YXJlYSwgW25vLWJsdXJdLCBbY29udGVudGVkaXRhYmxlXSc7XG5jb25zdCBlbmFibGVJbnB1dEJsdXJyaW5nID0gKCkgPT4ge1xuICBsZXQgZm9jdXNlZCA9IHRydWU7XG4gIGxldCBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIGNvbnN0IG9uU2Nyb2xsID0gKCkgPT4ge1xuICAgIGRpZFNjcm9sbCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IG9uRm9jdXNpbiA9ICgpID0+IHtcbiAgICBmb2N1c2VkID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3Qgb25Ub3VjaGVuZCA9IChldikgPT4ge1xuICAgIC8vIGlmIGFwcCBkaWQgc2Nyb2xsIHJldHVybiBlYXJseVxuICAgIGlmIChkaWRTY3JvbGwpIHtcbiAgICAgIGRpZFNjcm9sbCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhY3RpdmUgPSBkb2MuYWN0aXZlRWxlbWVudDtcbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBvbmx5IGJsdXIgaWYgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIGEgdGV4dC1pbnB1dCBvciBhIHRleHRhcmVhXG4gICAgaWYgKGFjdGl2ZS5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGlmIHRoZSBzZWxlY3RlZCB0YXJnZXQgaXMgdGhlIGFjdGl2ZSBlbGVtZW50LCBkbyBub3QgYmx1clxuICAgIGNvbnN0IHRhcHBlZCA9IGV2LnRhcmdldDtcbiAgICBpZiAodGFwcGVkID09PSBhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRhcHBlZC5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpIHx8IHRhcHBlZC5jbG9zZXN0KFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvY3VzZWQgPSBmYWxzZTtcbiAgICAvLyBUT0RPOiBmaW5kIGEgYmV0dGVyIHdheSwgd2h5IDUwbXM/XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIWZvY3VzZWQpIHtcbiAgICAgICAgYWN0aXZlLmJsdXIoKTtcbiAgICAgIH1cbiAgICB9LCA1MCk7XG4gIH07XG4gIGFkZEV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hlbmQsIGZhbHNlKTtcbiAgfTtcbn07XG5cbmNvbnN0IFNDUk9MTF9BU1NJU1RfU1BFRUQgPSAwLjM7XG5jb25zdCBnZXRTY3JvbGxEYXRhID0gKGNvbXBvbmVudEVsLCBjb250ZW50RWwsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGNvbnN0IGl0ZW1FbCA9IGNvbXBvbmVudEVsLmNsb3Nlc3QoJ2lvbi1pdGVtLFtpb24taXRlbV0nKSB8fCBjb21wb25lbnRFbDtcbiAgcmV0dXJuIGNhbGNTY3JvbGxEYXRhKGl0ZW1FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgY29udGVudEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBrZXlib2FyZEhlaWdodCwgY29tcG9uZW50RWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5pbm5lckhlaWdodCk7XG59O1xuY29uc3QgY2FsY1Njcm9sbERhdGEgPSAoaW5wdXRSZWN0LCBjb250ZW50UmVjdCwga2V5Ym9hcmRIZWlnaHQsIHBsYXRmb3JtSGVpZ2h0KSA9PiB7XG4gIC8vIGNvbXB1dGUgaW5wdXQncyBZIHZhbHVlcyByZWxhdGl2ZSB0byB0aGUgYm9keVxuICBjb25zdCBpbnB1dFRvcCA9IGlucHV0UmVjdC50b3A7XG4gIGNvbnN0IGlucHV0Qm90dG9tID0gaW5wdXRSZWN0LmJvdHRvbTtcbiAgLy8gY29tcHV0ZSB2aXNpYmxlIGFyZWFcbiAgY29uc3QgdmlzaWJsZUFyZWFUb3AgPSBjb250ZW50UmVjdC50b3A7XG4gIGNvbnN0IHZpc2libGVBcmVhQm90dG9tID0gTWF0aC5taW4oY29udGVudFJlY3QuYm90dG9tLCBwbGF0Zm9ybUhlaWdodCAtIGtleWJvYXJkSGVpZ2h0KTtcbiAgLy8gY29tcHV0ZSBzYWZlIGFyZWFcbiAgY29uc3Qgc2FmZUFyZWFUb3AgPSB2aXNpYmxlQXJlYVRvcCArIDE1O1xuICBjb25zdCBzYWZlQXJlYUJvdHRvbSA9IHZpc2libGVBcmVhQm90dG9tICogMC43NTtcbiAgLy8gZmlndXJlIG91dCBpZiBlYWNoIGVkZ2Ugb2YgdGhlIGlucHV0IGlzIHdpdGhpbiB0aGUgc2FmZSBhcmVhXG4gIGNvbnN0IGRpc3RhbmNlVG9Cb3R0b20gPSBzYWZlQXJlYUJvdHRvbSAtIGlucHV0Qm90dG9tO1xuICBjb25zdCBkaXN0YW5jZVRvVG9wID0gc2FmZUFyZWFUb3AgLSBpbnB1dFRvcDtcbiAgLy8gZGVzaXJlZFNjcm9sbEFtb3VudCBpcyB0aGUgbmVnYXRlZCBkaXN0YW5jZSB0byB0aGUgc2FmZSBhcmVhIGFjY29yZGluZyB0byBvdXIgY2FsY3VsYXRpb25zLlxuICBjb25zdCBkZXNpcmVkU2Nyb2xsQW1vdW50ID0gTWF0aC5yb3VuZCgoZGlzdGFuY2VUb0JvdHRvbSA8IDApXG4gICAgPyAtZGlzdGFuY2VUb0JvdHRvbVxuICAgIDogKGRpc3RhbmNlVG9Ub3AgPiAwKVxuICAgICAgPyAtZGlzdGFuY2VUb1RvcFxuICAgICAgOiAwKTtcbiAgLy8gb3VyIGNhbGN1bGF0aW9ucyBtYWtlIHNvbWUgYXNzdW1wdGlvbnMgdGhhdCBhcmVuJ3QgYWx3YXlzIHRydWUsIGxpa2UgdGhlIGtleWJvYXJkIGJlaW5nIGNsb3NlZCB3aGVuIGFuIGlucHV0XG4gIC8vIGdldHMgZm9jdXMsIHNvIG1ha2Ugc3VyZSB3ZSBkb24ndCBzY3JvbGwgdGhlIGlucHV0IGFib3ZlIHRoZSB2aXNpYmxlIGFyZWFcbiAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gTWF0aC5taW4oZGVzaXJlZFNjcm9sbEFtb3VudCwgaW5wdXRUb3AgLSB2aXNpYmxlQXJlYVRvcCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoc2Nyb2xsQW1vdW50KTtcbiAgY29uc3QgZHVyYXRpb24gPSBkaXN0YW5jZSAvIFNDUk9MTF9BU1NJU1RfU1BFRUQ7XG4gIGNvbnN0IHNjcm9sbER1cmF0aW9uID0gTWF0aC5taW4oNDAwLCBNYXRoLm1heCgxNTAsIGR1cmF0aW9uKSk7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsQW1vdW50LFxuICAgIHNjcm9sbER1cmF0aW9uLFxuICAgIHNjcm9sbFBhZGRpbmc6IGtleWJvYXJkSGVpZ2h0LFxuICAgIGlucHV0U2FmZVk6IC0oaW5wdXRUb3AgLSBzYWZlQXJlYVRvcCkgKyA0XG4gIH07XG59O1xuXG5jb25zdCBlbmFibGVTY3JvbGxBc3Npc3QgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGxldCBjb29yZDtcbiAgY29uc3QgdG91Y2hTdGFydCA9IChldikgPT4ge1xuICAgIGNvb3JkID0gcG9pbnRlckNvb3JkKGV2KTtcbiAgfTtcbiAgY29uc3QgdG91Y2hFbmQgPSAoZXYpID0+IHtcbiAgICAvLyBpbnB1dCBjb3ZlciB0b3VjaGVuZC9tb3VzZXVwXG4gICAgaWYgKCFjb29yZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBnZXQgd2hlcmUgdGhlIHRvdWNoZW5kL21vdXNldXAgZW5kZWRcbiAgICBjb25zdCBlbmRDb29yZCA9IHBvaW50ZXJDb29yZChldik7XG4gICAgLy8gZm9jdXMgdGhpcyBpbnB1dCBpZiB0aGUgcG9pbnRlciBoYXNuJ3QgbW92ZWQgWFggcGl4ZWxzXG4gICAgLy8gYW5kIHRoZSBpbnB1dCBkb2Vzbid0IGFscmVhZHkgaGF2ZSBmb2N1c1xuICAgIGlmICghaGFzUG9pbnRlck1vdmVkKDYsIGNvb3JkLCBlbmRDb29yZCkgJiYgIWlzRm9jdXNlZChpbnB1dEVsKSkge1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAvLyBiZWdpbiB0aGUgaW5wdXQgZm9jdXMgcHJvY2Vzc1xuICAgICAganNTZXRGb2N1cyhjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpO1xuICAgIH1cbiAgfTtcbiAgY29tcG9uZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRvdWNoU3RhcnQsIHRydWUpO1xuICBjb21wb25lbnRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRvdWNoRW5kLCB0cnVlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb21wb25lbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydCwgdHJ1ZSk7XG4gICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0b3VjaEVuZCwgdHJ1ZSk7XG4gIH07XG59O1xuY29uc3QganNTZXRGb2N1cyA9IGFzeW5jIChjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgaWYgKCFjb250ZW50RWwgJiYgIWZvb3RlckVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNjcm9sbERhdGEgPSBnZXRTY3JvbGxEYXRhKGNvbXBvbmVudEVsLCAoY29udGVudEVsIHx8IGZvb3RlckVsKSwga2V5Ym9hcmRIZWlnaHQpO1xuICBpZiAoY29udGVudEVsICYmIE1hdGguYWJzKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50KSA8IDQpIHtcbiAgICAvLyB0aGUgdGV4dCBpbnB1dCBpcyBpbiBhIHNhZmUgcG9zaXRpb24gdGhhdCBkb2Vzbid0XG4gICAgLy8gcmVxdWlyZSBpdCB0byBiZSBzY3JvbGxlZCBpbnRvIHZpZXcsIGp1c3Qgc2V0IGZvY3VzIG5vd1xuICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdGVtcG9yYXJpbHkgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvY3VzIGhvbGRlciBzbyB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IGZyZWFrIG91dCB3aGlsZSBpdCdzIHRyeWluZyB0byBnZXQgdGhlIGlucHV0IGluIHBsYWNlXG4gIC8vIGF0IHRoaXMgcG9pbnQgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IHN0aWxsIGRvZXMgbm90IGhhdmUgZm9jdXNcbiAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgdHJ1ZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgaW5wdXRFbC5mb2N1cygpO1xuICAvKipcbiAgICogUmVsb2NhdGluZy9Gb2N1c2luZyBpbnB1dCBjYXVzZXMgdGhlXG4gICAqIGNsaWNrIGV2ZW50IHRvIGJlIGNhbmNlbGxlZCwgc29cbiAgICogbWFudWFsbHkgZmlyZSBvbmUgaGVyZS5cbiAgICovXG4gIHJhZigoKSA9PiBjb21wb25lbnRFbC5jbGljaygpKTtcbiAgLyogdHNsaW50OmRpc2FibGUtbmV4dC1saW5lICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxldCBzY3JvbGxDb250ZW50VGltZW91dDtcbiAgICBjb25zdCBzY3JvbGxDb250ZW50ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gY2xlYW4gdXAgbGlzdGVuZXJzIGFuZCB0aW1lb3V0c1xuICAgICAgaWYgKHNjcm9sbENvbnRlbnRUaW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbENvbnRlbnRUaW1lb3V0KTtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgICAgLy8gc2Nyb2xsIHRoZSBpbnB1dCBpbnRvIHBsYWNlXG4gICAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICAgIGF3YWl0IGNvbnRlbnRFbC5zY3JvbGxCeVBvaW50KDAsIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50LCBzY3JvbGxEYXRhLnNjcm9sbER1cmF0aW9uKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZSBzY3JvbGwgdmlldyBpcyBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBub3dcbiAgICAgIC8vIGdpdmUgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IGZvY3VzXG4gICAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgICAgIC8vIGVuc3VyZSB0aGlzIGlzIHRoZSBmb2N1c2VkIGlucHV0XG4gICAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgfTtcbiAgICBjb25zdCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICB9O1xuICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgIGNvbnN0IHNjcm9sbEVsID0gYXdhaXQgY29udGVudEVsLmdldFNjcm9sbEVsZW1lbnQoKTtcbiAgICAgIC8qKlxuICAgICAgICogc2Nyb2xsRGF0YSB3aWxsIG9ubHkgY29uc2lkZXIgdGhlIGFtb3VudCB3ZSBuZWVkXG4gICAgICAgKiB0byBzY3JvbGwgaW4gb3JkZXIgdG8gcHJvcGVybHkgYnJpbmcgdGhlIGlucHV0XG4gICAgICAgKiBpbnRvIHZpZXcuIEl0IHdpbGwgbm90IGNvbnNpZGVyIHRoZSBhbW91bnRcbiAgICAgICAqIHdlIGNhbiBzY3JvbGwgaW4gdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgICAqIEFzIGEgcmVzdWx0LCBzY3JvbGxEYXRhIG1heSByZXF1ZXN0IGEgZ3JlYXRlclxuICAgICAgICogc2Nyb2xsIHBvc2l0aW9uIHRoYW4gaXMgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICogaW4gdGhlIERPTS4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZCB0b1xuICAgICAgICogd2FpdCBmb3IgdGhlIHdlYnZpZXcgdG8gcmVzaXplL3RoZSBrZXlib2FyZFxuICAgICAgICogdG8gc2hvdyBpbiBvcmRlciBmb3IgYWRkaXRpb25hbCBzY3JvbGxcbiAgICAgICAqIGJhbmR3aWR0aCB0byBiZWNvbWUgYXZhaWxhYmxlLlxuICAgICAgICovXG4gICAgICBjb25zdCB0b3RhbFNjcm9sbEFtb3VudCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodCAtIHNjcm9sbEVsLmNsaWVudEhlaWdodDtcbiAgICAgIGlmIChzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCA+ICh0b3RhbFNjcm9sbEFtb3VudCAtIHNjcm9sbEVsLnNjcm9sbFRvcCkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9uIGlPUyBkZXZpY2VzLCB0aGUgc3lzdGVtIHdpbGwgc2hvdyBhIFwiUGFzc3dvcmRzXCIgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgICAgICAgKiBhZnRlciB0aGUgaW5pdGlhbCBrZXlib2FyZCBpcyBzaG93bi4gVGhpcyBwcmV2ZW50cyB0aGUgd2VidmlldyBmcm9tIHJlc2l6aW5nXG4gICAgICAgICAqIHVudGlsIHRoZSBcIlBhc3N3b3Jkc1wiIGJhciBpcyBzaG93biwgc28gd2UgbmVlZCB0byB3YWl0IGZvciB0aGF0IHRvIGhhcHBlbiBmaXJzdC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpbnB1dEVsLnR5cGUgPT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICAvLyBBZGQgNTBweCB0byBhY2NvdW50IGZvciB0aGUgXCJQYXNzd29yZHNcIiBiYXJcbiAgICAgICAgICBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCArPSA1MDtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgZmlyZSBpbiAyIGluc3RhbmNlczpcbiAgICAgICAgICogMS4gVGhlIGFwcCBpcyB2ZXJ5IHNsb3cuXG4gICAgICAgICAqIDIuIFRoZSBhcHAgaXMgcnVubmluZyBpbiBhIGJyb3dzZXIgb24gYW4gb2xkIE9TXG4gICAgICAgICAqIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBJb25pYyBLZXlib2FyZCBFdmVudHNcbiAgICAgICAgICovXG4gICAgICAgIHNjcm9sbENvbnRlbnRUaW1lb3V0ID0gc2V0VGltZW91dChzY3JvbGxDb250ZW50LCAxMDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBzY3JvbGxDb250ZW50KCk7XG4gIH1cbn07XG5jb25zdCBoYXNQb2ludGVyTW92ZWQgPSAodGhyZXNob2xkLCBzdGFydENvb3JkLCBlbmRDb29yZCkgPT4ge1xuICBpZiAoc3RhcnRDb29yZCAmJiBlbmRDb29yZCkge1xuICAgIGNvbnN0IGRlbHRhWCA9IChzdGFydENvb3JkLnggLSBlbmRDb29yZC54KTtcbiAgICBjb25zdCBkZWx0YVkgPSAoc3RhcnRDb29yZC55IC0gZW5kQ29vcmQueSk7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVk7XG4gICAgcmV0dXJuIGRpc3RhbmNlID4gKHRocmVzaG9sZCAqIHRocmVzaG9sZCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgUEFERElOR19USU1FUl9LRVkgPSAnJGlvblBhZGRpbmdUaW1lcic7XG5jb25zdCBlbmFibGVTY3JvbGxQYWRkaW5nID0gKGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBvbkZvY3VzaW4gPSAoZXYpID0+IHtcbiAgICBzZXRTY3JvbGxQYWRkaW5nKGV2LnRhcmdldCwga2V5Ym9hcmRIZWlnaHQpO1xuICB9O1xuICBjb25zdCBvbkZvY3Vzb3V0ID0gKGV2KSA9PiB7XG4gICAgc2V0U2Nyb2xsUGFkZGluZyhldi50YXJnZXQsIDApO1xuICB9O1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbik7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uRm9jdXNvdXQpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkZvY3Vzb3V0KTtcbiAgfTtcbn07XG5jb25zdCBzZXRTY3JvbGxQYWRkaW5nID0gKGlucHV0LCBrZXlib2FyZEhlaWdodCkgPT4ge1xuICBpZiAoaW5wdXQudGFnTmFtZSAhPT0gJ0lOUFVUJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaW5wdXQucGFyZW50RWxlbWVudCAmJiBpbnB1dC5wYXJlbnRFbGVtZW50LnRhZ05hbWUgPT09ICdJT04tSU5QVVQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbnB1dC5wYXJlbnRFbGVtZW50ICYmXG4gICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50ICYmXG4gICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnRhZ05hbWUgPT09ICdJT04tU0VBUkNIQkFSJykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBlbCA9IGlucHV0LmNsb3Nlc3QoJ2lvbi1jb250ZW50Jyk7XG4gIGlmIChlbCA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB0aW1lciA9IGVsW1BBRERJTkdfVElNRVJfS0VZXTtcbiAgaWYgKHRpbWVyKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgfVxuICBpZiAoa2V5Ym9hcmRIZWlnaHQgPiAwKSB7XG4gICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgYCR7a2V5Ym9hcmRIZWlnaHR9cHhgKTtcbiAgfVxuICBlbHNlIHtcbiAgICBlbFtQQURESU5HX1RJTUVSX0tFWV0gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCctLWtleWJvYXJkLW9mZnNldCcsICcwcHgnKTtcbiAgICB9LCAxMjApO1xuICB9XG59O1xuXG5jb25zdCBJTlBVVF9CTFVSUklORyA9IHRydWU7XG5jb25zdCBTQ1JPTExfUEFERElORyA9IHRydWU7XG5jb25zdCBzdGFydElucHV0U2hpbXMgPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBrZXlib2FyZEhlaWdodCA9IGNvbmZpZy5nZXROdW1iZXIoJ2tleWJvYXJkSGVpZ2h0JywgMjkwKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0ID0gY29uZmlnLmdldEJvb2xlYW4oJ3Njcm9sbEFzc2lzdCcsIHRydWUpO1xuICBjb25zdCBoaWRlQ2FyZXQgPSBjb25maWcuZ2V0Qm9vbGVhbignaGlkZUNhcmV0T25TY3JvbGwnLCB0cnVlKTtcbiAgY29uc3QgaW5wdXRCbHVycmluZyA9IGNvbmZpZy5nZXRCb29sZWFuKCdpbnB1dEJsdXJyaW5nJywgdHJ1ZSk7XG4gIGNvbnN0IHNjcm9sbFBhZGRpbmcgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsUGFkZGluZycsIHRydWUpO1xuICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdpb24taW5wdXQsIGlvbi10ZXh0YXJlYScpKTtcbiAgY29uc3QgaGlkZUNhcmV0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgcmVnaXN0ZXJJbnB1dCA9IGFzeW5jIChjb21wb25lbnRFbCkgPT4ge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY29tcG9uZW50T25SZWFkeShjb21wb25lbnRFbCwgcmVzb2x2ZSkpO1xuICAgIGNvbnN0IGlucHV0Um9vdCA9IGNvbXBvbmVudEVsLnNoYWRvd1Jvb3QgfHwgY29tcG9uZW50RWw7XG4gICAgY29uc3QgaW5wdXRFbCA9IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIHx8IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xuICAgIGNvbnN0IHNjcm9sbEVsID0gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWNvbnRlbnQnKTtcbiAgICBjb25zdCBmb290ZXJFbCA9ICghc2Nyb2xsRWwpID8gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWZvb3RlcicpIDogbnVsbDtcbiAgICBpZiAoIWlucHV0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEhc2Nyb2xsRWwgJiYgaGlkZUNhcmV0ICYmICFoaWRlQ2FyZXRNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCk7XG4gICAgICBoaWRlQ2FyZXRNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gICAgaWYgKCghIXNjcm9sbEVsIHx8ICEhZm9vdGVyRWwpICYmIHNjcm9sbEFzc2lzdCAmJiAhc2Nyb2xsQXNzaXN0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVTY3JvbGxBc3Npc3QoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpO1xuICAgICAgc2Nyb2xsQXNzaXN0TWFwLnNldChjb21wb25lbnRFbCwgcm1Gbik7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bnJlZ2lzdGVySW5wdXQgPSAoY29tcG9uZW50RWwpID0+IHtcbiAgICBpZiAoaGlkZUNhcmV0KSB7XG4gICAgICBjb25zdCBmbiA9IGhpZGVDYXJldE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgICBoaWRlQ2FyZXRNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICB9XG4gICAgaWYgKHNjcm9sbEFzc2lzdCkge1xuICAgICAgY29uc3QgZm4gPSBzY3JvbGxBc3Npc3RNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgICAgIGlmIChmbikge1xuICAgICAgICBmbigpO1xuICAgICAgfVxuICAgICAgc2Nyb2xsQXNzaXN0TWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgfVxuICB9O1xuICBpZiAoaW5wdXRCbHVycmluZyAmJiBJTlBVVF9CTFVSUklORykge1xuICAgIGVuYWJsZUlucHV0Qmx1cnJpbmcoKTtcbiAgfVxuICBpZiAoc2Nyb2xsUGFkZGluZyAmJiBTQ1JPTExfUEFERElORykge1xuICAgIGVuYWJsZVNjcm9sbFBhZGRpbmcoa2V5Ym9hcmRIZWlnaHQpO1xuICB9XG4gIC8vIElucHV0IG1pZ2h0IGJlIGFscmVhZHkgbG9hZGVkIGluIHRoZSBET00gYmVmb3JlIGlvbi1kZXZpY2UtaGFja3MgZGlkLlxuICAvLyBBdCB0aGlzIHBvaW50IHdlIG5lZWQgdG8gbG9vayBmb3IgYWxsIG9mIHRoZSBpbnB1dHMgbm90IHJlZ2lzdGVyZWQgeWV0XG4gIC8vIGFuZCByZWdpc3RlciB0aGVtLlxuICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgIHJlZ2lzdGVySW5wdXQoaW5wdXQpO1xuICB9XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZExvYWQnLCAoKGV2KSA9PiB7XG4gICAgcmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZFVubG9hZCcsICgoZXYpID0+IHtcbiAgICB1bnJlZ2lzdGVySW5wdXQoZXYuZGV0YWlsKTtcbiAgfSkpO1xufTtcblxuZXhwb3J0IHsgc3RhcnRJbnB1dFNoaW1zIH07XG4iXX0=