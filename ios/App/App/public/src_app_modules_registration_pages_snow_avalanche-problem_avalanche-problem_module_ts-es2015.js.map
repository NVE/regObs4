{"version":3,"file":"src_app_modules_registration_pages_snow_avalanche-problem_avalanche-problem_module_ts-es2015.js","mappings":"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","sources":["./src/app/modules/registration/pages/base-page-service.ts","./src/app/modules/registration/pages/base.page.ts","./src/app/modules/registration/pages/snow/avalanche-problem/avalanche-problem-modal/avalanche-problem-modal.module.ts","./src/app/modules/registration/pages/snow/avalanche-problem/avalanche-problem-modal/avalanche-problem-modal.page.ts","./src/app/modules/registration/pages/snow/avalanche-problem/avalanche-problem-modal/avalanche-problem-modal.page.html","./src/app/modules/registration/pages/snow/avalanche-problem/avalanche-problem.module.ts","./src/app/modules/registration/pages/snow/avalanche-problem/avalanche-problem.page.ts","./src/app/modules/registration/pages/snow/avalanche-problem/avalanche-problem.page.html"],"sourcesContent":["import { Injectable, NgZone } from '@angular/core';\r\nimport { IRegistration, RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport { getPropertyName, isArrayType } from 'src/app/modules/common-registration/registration.helpers';\r\nimport { NewAttachmentService, RegistrationService as CommonRegistrationService } from 'src/app/modules/common-registration/registration.services';\r\nimport { RegistrationService } from '../services/registration.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { forkJoin } from 'rxjs';\r\nimport { LoggingService } from '../../shared/services/logging/logging.service';\r\n\r\nconst DEBUG_TAG = 'BasePageService';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BasePageService {\r\n  get Zone() {\r\n    return this.ngZone;\r\n  }\r\n\r\n  get RegistrationService() {\r\n    return this.registrationService;\r\n  }\r\n\r\n  get AlertController() {\r\n    return this.alertController;\r\n  }\r\n\r\n  get TranslateService() {\r\n    return this.translateService;\r\n  }\r\n\r\n  get CommonRegistrationService() {\r\n    return this.commonRegistrationService;\r\n  }\r\n\r\n  constructor(\r\n    private registrationService: RegistrationService,\r\n    private newAttachmentService: NewAttachmentService,\r\n    private commonRegistrationService: CommonRegistrationService,\r\n    private ngZone: NgZone,\r\n    private alertController: AlertController,\r\n    private translateService: TranslateService,\r\n    private loggingService: LoggingService\r\n  ) {}\r\n\r\n  async confirmLeave(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const leaveText = await this.translateService.get('REGISTRATION.REQUIRED_FIELDS_MISSING').toPromise();\r\n    return this.createResetDialog(leaveText, registration, registrationTid, onReset);\r\n  }\r\n\r\n  async confirmReset(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const leaveText = await this.translateService.get('REGISTRATION.CONFIRM_RESET').toPromise();\r\n    return this.createResetDialog(leaveText, registration, registrationTid, onReset);\r\n  }\r\n\r\n  private async createResetDialog(message: string, registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const translations = await this.translateService.get(['DIALOGS.CANCEL', 'DIALOGS.YES']).toPromise();\r\n    const alert = await this.alertController.create({\r\n      message,\r\n      buttons: [\r\n        {\r\n          text: translations['DIALOGS.CANCEL'],\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: translations['DIALOGS.YES']\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n    const result = await alert.onDidDismiss();\r\n    const reset: boolean = result.role !== 'cancel';\r\n    if (reset) {\r\n      await this.reset(registration, registrationTid, onReset);\r\n    }\r\n    return reset;\r\n  }\r\n\r\n  async reset(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    this.Zone.run(() => {\r\n      if (registrationTid) {\r\n        registration.request[getPropertyName(registrationTid)] = this.getDefaultValue(registrationTid);\r\n        this.resetImages(registration);\r\n      }\r\n      if (onReset) {\r\n        onReset();\r\n      }\r\n    });\r\n    await this.registrationService.saveRegistrationAsync(registration);\r\n  }\r\n\r\n  createDefaultProps(registration: IRegistration, registrationTid: RegistrationTid) {\r\n    const propName = getPropertyName(registrationTid);\r\n    if (!registration.request[propName]) {\r\n      // Init to new object if null\r\n      registration.request[propName] = this.getDefaultValue(registrationTid);\r\n    }\r\n  }\r\n\r\n  getDefaultValue(registrationTid: RegistrationTid) {\r\n    if (isArrayType(registrationTid)) {\r\n      return [];\r\n    } else {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  resetImages(registration: IRegistration) {\r\n    this.newAttachmentService\r\n      .getAttachments(registration.id)\r\n      .pipe(switchMap((attachments) => forkJoin(attachments.map((a) => this.newAttachmentService.removeAttachment(registration.id, a.id)))))\r\n      .subscribe(\r\n        () => {\r\n          this.loggingService.debug('Reset images complete', DEBUG_TAG);\r\n        },\r\n        (error) => {\r\n          this.loggingService.error(error, DEBUG_TAG, 'Could not reset images');\r\n        }\r\n      );\r\n  }\r\n}\r\n","import { Directive, OnInit } from '@angular/core';\r\nimport { from, of } from 'rxjs';\r\nimport { BasePageService } from './base-page-service';\r\nimport { IRegistration, RegistrationTid, SyncStatus } from 'src/app/modules/common-registration/registration.models';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { take, takeUntil, map, switchMap, tap } from 'rxjs/operators';\r\nimport { NgDestoryBase } from '../../../core/helpers/observable-helper';\r\n\r\n@Directive()\r\nexport abstract class BasePage extends NgDestoryBase implements OnInit {\r\n  registration: IRegistration;\r\n  basePageService: BasePageService;\r\n  registrationTid: RegistrationTid;\r\n  activatedRoute: ActivatedRoute;\r\n\r\n  constructor(registrationTid: RegistrationTid, basePageService: BasePageService, activatedRoute: ActivatedRoute) {\r\n    super();\r\n    this.basePageService = basePageService;\r\n    this.activatedRoute = activatedRoute;\r\n    this.registrationTid = registrationTid;\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewDidEnter() {\r\n    const id = this.activatedRoute.snapshot.params['id'];\r\n    this.basePageService.CommonRegistrationService.getRegistrationByIdShared$(id)\r\n      .pipe(\r\n        take(1),\r\n        map((reg) => {\r\n          this.basePageService.createDefaultProps(reg, this.registrationTid);\r\n          return reg;\r\n        }),\r\n        tap((reg) => {\r\n          this.registration = reg;\r\n        }),\r\n        switchMap(() => this.createInitObservable()),\r\n        takeUntil(this.ngDestroy$)\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  onInit?(): void | Promise<any>;\r\n\r\n  onBeforeLeave?(): void | Promise<any>;\r\n\r\n  onReset?(): void;\r\n\r\n  isValid?(): boolean | Promise<boolean>;\r\n\r\n  // NOTE: Remember to add canDeactivate: [CanDeactivateRouteGuard] in page module\r\n  async canLeave() {\r\n    // Check if implementation page has implemented custom isValid logic\r\n    const valid = await Promise.resolve(this.isValid ? this.isValid() : true);\r\n    // Only return alert if page is not empty and invalid\r\n    const isEmpty = await Promise.resolve(this.isEmpty());\r\n    if (!isEmpty && !valid) {\r\n      return this.basePageService.confirmLeave(this.registration, this.registrationTid, () => (this.onReset ? this.onReset() : null));\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private createInitObservable() {\r\n    if (this.onInit) {\r\n      return from(Promise.resolve(this.onInit()));\r\n    }\r\n    return of({});\r\n  }\r\n\r\n  async ionViewWillLeave() {\r\n    if (this.onBeforeLeave) {\r\n      await Promise.resolve(this.onBeforeLeave());\r\n    }\r\n    await this.save(true);\r\n  }\r\n\r\n  save(clean = false) {\r\n    this.registration.syncStatus = SyncStatus.Draft;\r\n    return this.basePageService.RegistrationService.saveRegistrationAsync(this.registration, clean);\r\n  }\r\n\r\n  getSaveFunc() {\r\n    return () => this.save();\r\n  }\r\n\r\n  async isEmpty(): Promise<boolean> {\r\n    return !(await this.basePageService.CommonRegistrationService.hasAnyDataToShowInRegistrationTypes(\r\n      this.registration,\r\n      this.registrationTid\r\n    )\r\n      .pipe(take(1))\r\n      .toPromise());\r\n  }\r\n\r\n  reset() {\r\n    return this.basePageService.confirmReset(this.registration, this.registrationTid, () => (this.onReset ? this.onReset() : null));\r\n  }\r\n\r\n  getResolvedUrl(): string {\r\n    return (\r\n      '/' +\r\n      this.activatedRoute.snapshot.pathFromRoot\r\n        .map((v) => v.url.map((segment) => segment.toString()).join('/'))\r\n        .filter((path) => !!path)\r\n        .join('/')\r\n    );\r\n  }\r\n\r\n  // getConfiguredUrl(): string {\r\n  //     return '/' + this.activatedRoute.snapshot.pathFromRoot\r\n  //         .filter(v => v.routeConfig)\r\n  //         .map(v => v.routeConfig.path)\r\n  //         .join('/');\r\n  // }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { AvalancheProblemModalPage } from './avalanche-problem-modal.page';\r\nimport { SharedComponentsModule } from '../../../../shared-components.module';\r\n\r\n@NgModule({\r\n  imports: [SharedComponentsModule],\r\n  declarations: [AvalancheProblemModalPage],\r\n  entryComponents: [AvalancheProblemModalPage]\r\n})\r\nexport class AvalancheProblemModalPageModule {}\r\n","import { Component, OnInit, Input, OnDestroy } from '@angular/core';\r\nimport {\r\n  AvalancheEvalProblem2EditModel,\r\n  KdvElement\r\n} from '@varsom-regobs-common/regobs-api';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { IsEmptyHelper } from '../../../../../../core/helpers/is-empty.helper';\r\nimport { KdvService } from '../../../../../../core/services/kdv/kdv.service';\r\nimport { Subscription, combineLatest } from 'rxjs';\r\n\r\nconst NO_WEAK_LAYER_KDV_VALUE = 24;\r\n\r\n@Component({\r\n  selector: 'app-avalanche-problem-modal',\r\n  templateUrl: './avalanche-problem-modal.page.html',\r\n  styleUrls: ['./avalanche-problem-modal.page.scss']\r\n})\r\nexport class AvalancheProblemModalPage implements OnInit, OnDestroy {\r\n  @Input() avalancheEvalProblem: AvalancheEvalProblem2EditModel;\r\n  avalancheEvalProblemCopy: AvalancheEvalProblem2EditModel;\r\n  isNew = false;\r\n  avalancheExtKdvFilter: Function;\r\n\r\n  get noWeakLayers() {\r\n    return (\r\n      this.avalancheEvalProblemCopy.AvalCauseTID === NO_WEAK_LAYER_KDV_VALUE\r\n    );\r\n  }\r\n\r\n  set noWeakLayers(val: boolean) {\r\n    this.avalancheEvalProblemCopy.AvalCauseTID = val\r\n      ? NO_WEAK_LAYER_KDV_VALUE\r\n      : undefined;\r\n  }\r\n\r\n  avalancheProblemView: { AvalancheExtTID: number; AvalCauseTID: number }[];\r\n  avalancheCauseAttributes: { kdvElement: KdvElement; selected: boolean }[];\r\n  exposition: number[];\r\n\r\n  private viewSubscription: Subscription;\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private kdvService: KdvService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.avalancheExtKdvFilter = this.internalAvalancheExtKdvFilter.bind(this);\r\n\r\n    if (this.avalancheEvalProblem) {\r\n      this.avalancheEvalProblemCopy = { ...this.avalancheEvalProblem };\r\n    } else {\r\n      this.avalancheEvalProblemCopy = {};\r\n      this.isNew = true;\r\n    }\r\n\r\n    this.viewSubscription = combineLatest(\r\n      this.kdvService.getKdvRepositoryByKeyObservable(\r\n        'Snow_AvalCauseAttributeFlags'\r\n      ),\r\n      this.kdvService.getViewRepositoryByKeyObservable('AvalancheProblemMenu3V')\r\n    ).subscribe(([snowCauseAttributesKdvElements, avalancheProblemView]) => {\r\n      this.avalancheProblemView = avalancheProblemView;\r\n      this.avalancheCauseAttributes = this.getAvalancheCauseAttributes(\r\n        snowCauseAttributesKdvElements\r\n      );\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.viewSubscription) {\r\n      this.viewSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  internalAvalancheExtKdvFilter(id: number) {\r\n    const avalCauseTid = this.avalancheEvalProblemCopy.AvalCauseTID || 0;\r\n    const views = this.avalancheProblemView\r\n      .filter((v) => v.AvalCauseTID === avalCauseTid)\r\n      .map((v) => v.AvalancheExtTID);\r\n    return views.indexOf(id) >= 0;\r\n  }\r\n\r\n  getAvalancheCauseAttributes(\r\n    kdvElements: KdvElement[]\r\n  ): {\r\n      kdvElement: KdvElement;\r\n      selected: boolean;\r\n    }[] {\r\n    return kdvElements.map((val) => ({\r\n          kdvElement: val,\r\n          selected: this.isAvalancheCauseSelected(val)\r\n        }));\r\n  }\r\n\r\n  isAvalancheCauseSelected(kdvElement: KdvElement): boolean {\r\n    switch (kdvElement.Id) {\r\n      case 1:\r\n        return this.avalancheEvalProblemCopy.AvalCauseAttributeLightTID === kdvElement.Id;\r\n      case 2:\r\n        return this.avalancheEvalProblemCopy.AvalCauseAttributeThinTID === kdvElement.Id;\r\n      case 4:\r\n        return this.avalancheEvalProblemCopy.AvalCauseAttributeSoftTID === kdvElement.Id;\r\n      case 8:\r\n        return this.avalancheEvalProblemCopy.AvalCauseAttributeCrystalTID === kdvElement.Id;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  cancel() {\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  // getAvalacheCauseAttributeValue(\r\n  //   avalancheCauseAttributes: { kdvElement: KdvElement; selected: boolean }[]\r\n  // ) {\r\n  //   return avalancheCauseAttributes.reduce(function (prevVal, curVal) {\r\n  //     return prevVal + (curVal.selected ? curVal.kdvElement.Id : 0);\r\n  //   }, 0);\r\n  // }\r\n\r\n  resetAvalancheCauseFields() {\r\n    this.avalancheEvalProblemCopy.AvalCauseAttributeLightTID = undefined;\r\n    this.avalancheEvalProblemCopy.AvalCauseAttributeThinTID = undefined;\r\n    this.avalancheEvalProblemCopy.AvalCauseAttributeSoftTID = undefined;\r\n    this.avalancheEvalProblemCopy.AvalCauseAttributeCrystalTID = undefined;\r\n    this.avalancheEvalProblemCopy.AvalCauseDepthTID = undefined;\r\n  }\r\n\r\n  ok() {\r\n    if (this.noWeakLayers) {\r\n      this.resetAvalancheCauseFields();\r\n    } else {\r\n      // const causeAttribute = this.getAvalacheCauseAttributeValue(\r\n      //   this.avalancheCauseAttributes\r\n      // );\r\n      // this.avalancheEvalProblemCopy.AvalCauseAttributes =\r\n      //   causeAttribute > 0 ? causeAttribute : undefined;\r\n      for (const val of this.avalancheCauseAttributes) {\r\n        switch (val.kdvElement.Id) {\r\n          case 1:\r\n            this.avalancheEvalProblemCopy.AvalCauseAttributeLightTID = val.selected\r\n              ? val.kdvElement.Id\r\n              : undefined;\r\n            break;\r\n          case 2:\r\n            this.avalancheEvalProblemCopy.AvalCauseAttributeThinTID = val.selected\r\n              ? val.kdvElement.Id\r\n              : undefined;\r\n            break;\r\n          case 4:\r\n            this.avalancheEvalProblemCopy.AvalCauseAttributeSoftTID = val.selected\r\n              ? val.kdvElement.Id\r\n              : undefined;\r\n            break;\r\n          case 8:\r\n            this.avalancheEvalProblemCopy.AvalCauseAttributeCrystalTID = val.selected\r\n              ? val.kdvElement.Id\r\n              : undefined;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    if (IsEmptyHelper.isEmpty(this.avalancheEvalProblemCopy)) {\r\n      this.modalController.dismiss({ delete: true });\r\n    } else {\r\n      this.modalController.dismiss(this.avalancheEvalProblemCopy);\r\n    }\r\n  }\r\n\r\n  delete() {\r\n    this.modalController.dismiss({ delete: true });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button (click)=\"cancel()\">{{ 'DIALOGS.CANCEL' | translate }}</ion-button>\r\n    </ion-buttons>\r\n    <ion-title>{{'REGISTRATION.SNOW.AVALANCHE_PROBLEM.TITLE' | translate}}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content *ngIf=\"avalancheEvalProblemCopy\">\r\n  <ion-list lines=\"full\">\r\n    <ion-list-header class=\"ion-text-uppercase\">\r\n      <ion-label>\r\n        {{ 'REGISTRATION.SNOW.AVALANCHE_PROBLEM.WEAK_LAYER' | translate}}\r\n      </ion-label>\r\n    </ion-list-header>\r\n    <ion-item>\r\n      <ion-label>{{'REGISTRATION.SNOW.AVALANCHE_PROBLEM.NO_WEAK_LAYERS' | translate}}</ion-label>\r\n      <ion-checkbox mode=\"md\" slot=\"start\" [(ngModel)]=\"noWeakLayers\"></ion-checkbox>\r\n    </ion-item>\r\n    <ng-container *ngIf=\"!noWeakLayers\">\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.WEAK_LAYER\" kdvKey=\"Snow_AvalCauseKDV\"\r\n        [(value)]=\"avalancheEvalProblemCopy.AvalCauseTID\"></app-kdv-select>\r\n      <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.WEAK_LAYER_DEPTH\" kdvKey=\"Snow_AvalCauseDepthKDV\"\r\n        [(value)]=\"avalancheEvalProblemCopy.AvalCauseDepthTID\"></app-kdv-select>\r\n      <ion-item *ngFor=\"let avalancheCauseAttribute of avalancheCauseAttributes\">\r\n        <ion-label class=\"ion-text-wrap\"> {{ avalancheCauseAttribute.kdvElement.Name }}</ion-label>\r\n        <ion-checkbox mode=\"md\" slot=\"start\" [(ngModel)]=\"avalancheCauseAttribute.selected\"></ion-checkbox>\r\n      </ion-item>\r\n    </ng-container>\r\n    <ion-list-header class=\"ion-text-uppercase\">\r\n      <ion-label>\r\n        {{ 'REGISTRATION.SNOW.AVALANCHE_PROBLEM.AVALANCHE_PROBABILITY' | translate}}\r\n      </ion-label>\r\n    </ion-list-header>\r\n    <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.AVALANCHE_TYPE\" kdvKey=\"Snow_AvalancheExtKDV\"\r\n      [(value)]=\"avalancheEvalProblemCopy.AvalancheExtTID\" [filter]=\"avalancheExtKdvFilter\"></app-kdv-select>\r\n    <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.AVALANCHE_TRIGGER_PROBABILITY\"\r\n      kdvKey=\"Snow_AvalTriggerSimpleKDV\" [(value)]=\"avalancheEvalProblemCopy.AvalTriggerSimpleTID\"></app-kdv-select>\r\n    <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.AVALANCHE_DESTRUCTIVE_SIZE\"\r\n      kdvKey=\"Snow_DestructiveSizeKDV\" [(value)]=\"avalancheEvalProblemCopy.DestructiveSizeTID\"></app-kdv-select>\r\n    <ion-list-header class=\"ion-text-uppercase\">\r\n      <ion-label>\r\n        {{ 'REGISTRATION.SNOW.AVALANCHE_PROBLEM.PROPAGATION' | translate}}\r\n      </ion-label>\r\n    </ion-list-header>\r\n    <app-kdv-select title=\"REGISTRATION.SNOW.AVALANCHE_PROBLEM.PROPAGATION\" kdvKey=\"Snow_AvalPropagationKDV\"\r\n      [(value)]=\"avalancheEvalProblemCopy.AvalPropagationTID\"></app-kdv-select>\r\n    <app-exposed-height [(exposedHeightComboTID)]=\"avalancheEvalProblemCopy.ExposedHeightComboTID\"\r\n      [(exposedHight1)]=\"avalancheEvalProblemCopy.ExposedHeight1\"\r\n      [(exposedHight2)]=\"avalancheEvalProblemCopy.ExposedHeight2\"></app-exposed-height>\r\n    <app-valid-exposition [(validExposition)]=\"avalancheEvalProblemCopy.ValidExposition\"></app-valid-exposition>\r\n    <app-text-comment title=\"REGISTRATION.DANGER_OBS.COMMENT\" [(value)]=\"avalancheEvalProblemCopy.Comment\">\r\n    </app-text-comment>\r\n  </ion-list>\r\n  <app-modal-save-or-delete-buttons (saveClicked)=\"ok()\" (deleteClicked)=\"delete()\" [showDelete]=\"!isNew\">\r\n  </app-modal-save-or-delete-buttons>\r\n</ion-content>","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AvalancheProblemPage } from './avalanche-problem.page';\r\nimport { SharedComponentsModule } from '../../../shared-components.module';\r\nimport { AvalancheProblemModalPageModule } from './avalanche-problem-modal/avalanche-problem-modal.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AvalancheProblemPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedComponentsModule,\r\n    AvalancheProblemModalPageModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [AvalancheProblemPage]\r\n})\r\nexport class AvalancheProblemPageModule {}\r\n","import { Component, NgZone } from '@angular/core';\r\nimport { BasePage } from '../../base.page';\r\nimport { BasePageService } from '../../base-page-service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport { ItemReorderEventDetail } from '@ionic/core';\r\nimport {\r\n  AvalancheEvalProblem2EditModel,\r\n  KdvElement\r\n} from '@varsom-regobs-common/regobs-api';\r\nimport { AvalancheProblemModalPage } from './avalanche-problem-modal/avalanche-problem-modal.page';\r\nimport { KdvService } from '../../../../../core/services/kdv/kdv.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { ArrayHelper } from 'src/app/core/helpers/array-helper';\r\n\r\n@Component({\r\n  selector: 'app-avalanche-problem',\r\n  templateUrl: './avalanche-problem.page.html',\r\n  styleUrls: ['./avalanche-problem.page.scss']\r\n})\r\nexport class AvalancheProblemPage extends BasePage {\r\n  private avalancheCause: KdvElement[];\r\n  private kdvSubscription: Subscription;\r\n\r\n  constructor(\r\n    basePageService: BasePageService,\r\n    activatedRoute: ActivatedRoute,\r\n    private modalController: ModalController,\r\n    private ngZone: NgZone,\r\n    private kdvService: KdvService\r\n  ) {\r\n    super(\r\n      RegistrationTid.AvalancheEvalProblem2,\r\n      basePageService,\r\n      activatedRoute\r\n    );\r\n    this.avalancheCause = [];\r\n  }\r\n\r\n  onInit() {\r\n    this.kdvSubscription = this.kdvService\r\n      .getKdvRepositoryByKeyObservable('Snow_AvalCauseKDV')\r\n      .subscribe((val) => {\r\n        this.avalancheCause = val;\r\n      });\r\n  }\r\n\r\n  onBeforeLeave() {\r\n    if (this.kdvSubscription) {\r\n      this.kdvSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  async addOrEditAvalancheProblem(index?: number) {\r\n    if (\r\n      this.registration &&\r\n      this.registration.request &&\r\n      this.registration.request.AvalancheEvalProblem2\r\n    ) {\r\n      const modal = await this.modalController.create({\r\n        component: AvalancheProblemModalPage,\r\n        componentProps: {\r\n          avalancheEvalProblem: this.registration.request.AvalancheEvalProblem2[\r\n            index\r\n          ]\r\n        }\r\n      });\r\n      modal.present();\r\n      const result = await modal.onDidDismiss();\r\n      this.ngZone.run(() => {\r\n        if (\r\n          this.registration &&\r\n          this.registration.request &&\r\n          this.registration.request.AvalancheEvalProblem2\r\n        ) {\r\n          if (result.data) {\r\n            if (result.data.delete) {\r\n              this.registration.request.AvalancheEvalProblem2.splice(index, 1);\r\n            } else {\r\n              const avalancheEvalProblem: AvalancheEvalProblem2EditModel =\r\n                result.data;\r\n              if (index !== undefined) {\r\n                this.registration.request.AvalancheEvalProblem2[\r\n                  index\r\n                ] = avalancheEvalProblem;\r\n              } else {\r\n                this.registration.request.AvalancheEvalProblem2.push(\r\n                  avalancheEvalProblem\r\n                );\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getDescription(avalancheEvalProblem: AvalancheEvalProblem2EditModel): string {\r\n    const cause = this.avalancheCause.find(\r\n      (c) => c.Id === avalancheEvalProblem.AvalCauseTID\r\n    );\r\n    if (cause) {\r\n      return cause.Name;\r\n    } else {\r\n      return 'REGISTRATION.SNOW.AVALANCHE_PROBLEM.UNKNOWN_TYPE';\r\n    }\r\n  }\r\n\r\n  onProblemReorder(event: CustomEvent<ItemReorderEventDetail>): void {\r\n    this.registration.request.AvalancheEvalProblem2 = ArrayHelper.reorderList(\r\n      this.registration.request.AvalancheEvalProblem2,\r\n      event.detail.from,\r\n      event.detail.to\r\n    );\r\n    event.detail.complete();\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\" defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{'REGISTRATION.SNOW.AVALANCHE_PROBLEM.TITLE' | translate}}\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <app-registration-content-wrapper *ngIf=\"registration && registration.request.AvalancheEvalProblem2\"\r\n    [registration]=\"registration\" [registrationTid]=\"registrationTid\" (reset)=\"reset()\">\r\n    <ion-list lines=\"full\">\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.SNOW.AVALANCHE_PROBLEM.TITLE' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <ion-reorder-group disabled=\"false\" (ionItemReorder)=\"onProblemReorder($event)\">\r\n        <ion-item detail=\"true\" (click)=\"addOrEditAvalancheProblem(i)\"\r\n          *ngFor=\"let avalancheEvalProblem of registration.request.AvalancheEvalProblem2; let i = index\">\r\n            <ion-label>{{ getDescription(avalancheEvalProblem) | translate }}</ion-label>\r\n            <ion-reorder slot=\"end\"></ion-reorder>\r\n        </ion-item>\r\n      </ion-reorder-group>\r\n      <ion-item (click)=\"addOrEditAvalancheProblem()\">\r\n        <ion-icon color=\"primary\" name=\"add-circle-outline\" slot=\"start\"></ion-icon>\r\n        <ion-label>{{'REGISTRATION.SNOW.AVALANCHE_PROBLEM.ADD_NEW' | translate}}</ion-label>\r\n      </ion-item>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.ADD_IMAGES' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-add-picture-item [geoHazard]=\"registration.geoHazard\" [registrationId]=\"registration.id\"\r\n        [registrationTid]=\"registrationTid\" [onBeforeAdd]=\"getSaveFunc()\"></app-add-picture-item>\r\n    </ion-list>\r\n  </app-registration-content-wrapper>\r\n</ion-content>"],"names":[],"sourceRoot":"webpack:///"}