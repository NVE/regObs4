{"version":3,"file":"src_app_modules_registration_pages_danger-obs_danger-obs_module_ts-es2015.js","mappings":"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","sources":["./src/app/modules/registration/pages/base-page-service.ts","./src/app/modules/registration/pages/base.page.ts","./src/app/modules/registration/pages/danger-obs/add-or-edit-danger-obs-modal/add-or-edit-danger-obs-modal.module.ts","./src/app/modules/registration/pages/danger-obs/add-or-edit-danger-obs-modal/add-or-edit-danger-obs-modal.page.ts","./src/app/modules/registration/pages/danger-obs/add-or-edit-danger-obs-modal/add-or-edit-danger-obs-modal.page.html","./src/app/modules/registration/pages/danger-obs/danger-obs.module.ts","./src/app/modules/registration/pages/danger-obs/danger-obs.page.ts","./src/app/modules/registration/pages/danger-obs/danger-obs.page.html"],"sourcesContent":["import { Injectable, NgZone } from '@angular/core';\r\nimport { IRegistration, RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport { getPropertyName, isArrayType } from 'src/app/modules/common-registration/registration.helpers';\r\nimport { NewAttachmentService, RegistrationService as CommonRegistrationService } from 'src/app/modules/common-registration/registration.services';\r\nimport { RegistrationService } from '../services/registration.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { forkJoin } from 'rxjs';\r\nimport { LoggingService } from '../../shared/services/logging/logging.service';\r\n\r\nconst DEBUG_TAG = 'BasePageService';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BasePageService {\r\n  get Zone() {\r\n    return this.ngZone;\r\n  }\r\n\r\n  get RegistrationService() {\r\n    return this.registrationService;\r\n  }\r\n\r\n  get AlertController() {\r\n    return this.alertController;\r\n  }\r\n\r\n  get TranslateService() {\r\n    return this.translateService;\r\n  }\r\n\r\n  get CommonRegistrationService() {\r\n    return this.commonRegistrationService;\r\n  }\r\n\r\n  constructor(\r\n    private registrationService: RegistrationService,\r\n    private newAttachmentService: NewAttachmentService,\r\n    private commonRegistrationService: CommonRegistrationService,\r\n    private ngZone: NgZone,\r\n    private alertController: AlertController,\r\n    private translateService: TranslateService,\r\n    private loggingService: LoggingService\r\n  ) {}\r\n\r\n  async confirmLeave(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const leaveText = await this.translateService.get('REGISTRATION.REQUIRED_FIELDS_MISSING').toPromise();\r\n    return this.createResetDialog(leaveText, registration, registrationTid, onReset);\r\n  }\r\n\r\n  async confirmReset(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const leaveText = await this.translateService.get('REGISTRATION.CONFIRM_RESET').toPromise();\r\n    return this.createResetDialog(leaveText, registration, registrationTid, onReset);\r\n  }\r\n\r\n  private async createResetDialog(message: string, registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    const translations = await this.translateService.get(['DIALOGS.CANCEL', 'DIALOGS.YES']).toPromise();\r\n    const alert = await this.alertController.create({\r\n      message,\r\n      buttons: [\r\n        {\r\n          text: translations['DIALOGS.CANCEL'],\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: translations['DIALOGS.YES']\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n    const result = await alert.onDidDismiss();\r\n    const reset: boolean = result.role !== 'cancel';\r\n    if (reset) {\r\n      await this.reset(registration, registrationTid, onReset);\r\n    }\r\n    return reset;\r\n  }\r\n\r\n  async reset(registration: IRegistration, registrationTid: RegistrationTid, onReset?: () => void) {\r\n    this.Zone.run(() => {\r\n      if (registrationTid) {\r\n        registration.request[getPropertyName(registrationTid)] = this.getDefaultValue(registrationTid);\r\n        this.resetImages(registration);\r\n      }\r\n      if (onReset) {\r\n        onReset();\r\n      }\r\n    });\r\n    await this.registrationService.saveRegistrationAsync(registration);\r\n  }\r\n\r\n  createDefaultProps(registration: IRegistration, registrationTid: RegistrationTid) {\r\n    const propName = getPropertyName(registrationTid);\r\n    if (!registration.request[propName]) {\r\n      // Init to new object if null\r\n      registration.request[propName] = this.getDefaultValue(registrationTid);\r\n    }\r\n  }\r\n\r\n  getDefaultValue(registrationTid: RegistrationTid) {\r\n    if (isArrayType(registrationTid)) {\r\n      return [];\r\n    } else {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  resetImages(registration: IRegistration) {\r\n    this.newAttachmentService\r\n      .getAttachments(registration.id)\r\n      .pipe(switchMap((attachments) => forkJoin(attachments.map((a) => this.newAttachmentService.removeAttachment(registration.id, a.id)))))\r\n      .subscribe(\r\n        () => {\r\n          this.loggingService.debug('Reset images complete', DEBUG_TAG);\r\n        },\r\n        (error) => {\r\n          this.loggingService.error(error, DEBUG_TAG, 'Could not reset images');\r\n        }\r\n      );\r\n  }\r\n}\r\n","import { Directive, OnInit } from '@angular/core';\r\nimport { from, of } from 'rxjs';\r\nimport { BasePageService } from './base-page-service';\r\nimport { IRegistration, RegistrationTid, SyncStatus } from 'src/app/modules/common-registration/registration.models';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { take, takeUntil, map, switchMap, tap } from 'rxjs/operators';\r\nimport { NgDestoryBase } from '../../../core/helpers/observable-helper';\r\n\r\n@Directive()\r\nexport abstract class BasePage extends NgDestoryBase implements OnInit {\r\n  registration: IRegistration;\r\n  basePageService: BasePageService;\r\n  registrationTid: RegistrationTid;\r\n  activatedRoute: ActivatedRoute;\r\n\r\n  constructor(registrationTid: RegistrationTid, basePageService: BasePageService, activatedRoute: ActivatedRoute) {\r\n    super();\r\n    this.basePageService = basePageService;\r\n    this.activatedRoute = activatedRoute;\r\n    this.registrationTid = registrationTid;\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewDidEnter() {\r\n    const id = this.activatedRoute.snapshot.params['id'];\r\n    this.basePageService.CommonRegistrationService.getRegistrationByIdShared$(id)\r\n      .pipe(\r\n        take(1),\r\n        map((reg) => {\r\n          this.basePageService.createDefaultProps(reg, this.registrationTid);\r\n          return reg;\r\n        }),\r\n        tap((reg) => {\r\n          this.registration = reg;\r\n        }),\r\n        switchMap(() => this.createInitObservable()),\r\n        takeUntil(this.ngDestroy$)\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  onInit?(): void | Promise<any>;\r\n\r\n  onBeforeLeave?(): void | Promise<any>;\r\n\r\n  onReset?(): void;\r\n\r\n  isValid?(): boolean | Promise<boolean>;\r\n\r\n  // NOTE: Remember to add canDeactivate: [CanDeactivateRouteGuard] in page module\r\n  async canLeave() {\r\n    // Check if implementation page has implemented custom isValid logic\r\n    const valid = await Promise.resolve(this.isValid ? this.isValid() : true);\r\n    // Only return alert if page is not empty and invalid\r\n    const isEmpty = await Promise.resolve(this.isEmpty());\r\n    if (!isEmpty && !valid) {\r\n      return this.basePageService.confirmLeave(this.registration, this.registrationTid, () => (this.onReset ? this.onReset() : null));\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private createInitObservable() {\r\n    if (this.onInit) {\r\n      return from(Promise.resolve(this.onInit()));\r\n    }\r\n    return of({});\r\n  }\r\n\r\n  async ionViewWillLeave() {\r\n    if (this.onBeforeLeave) {\r\n      await Promise.resolve(this.onBeforeLeave());\r\n    }\r\n    await this.save(true);\r\n  }\r\n\r\n  save(clean = false) {\r\n    this.registration.syncStatus = SyncStatus.Draft;\r\n    return this.basePageService.RegistrationService.saveRegistrationAsync(this.registration, clean);\r\n  }\r\n\r\n  getSaveFunc() {\r\n    return () => this.save();\r\n  }\r\n\r\n  async isEmpty(): Promise<boolean> {\r\n    return !(await this.basePageService.CommonRegistrationService.hasAnyDataToShowInRegistrationTypes(\r\n      this.registration,\r\n      this.registrationTid\r\n    )\r\n      .pipe(take(1))\r\n      .toPromise());\r\n  }\r\n\r\n  reset() {\r\n    return this.basePageService.confirmReset(this.registration, this.registrationTid, () => (this.onReset ? this.onReset() : null));\r\n  }\r\n\r\n  getResolvedUrl(): string {\r\n    return (\r\n      '/' +\r\n      this.activatedRoute.snapshot.pathFromRoot\r\n        .map((v) => v.url.map((segment) => segment.toString()).join('/'))\r\n        .filter((path) => !!path)\r\n        .join('/')\r\n    );\r\n  }\r\n\r\n  // getConfiguredUrl(): string {\r\n  //     return '/' + this.activatedRoute.snapshot.pathFromRoot\r\n  //         .filter(v => v.routeConfig)\r\n  //         .map(v => v.routeConfig.path)\r\n  //         .join('/');\r\n  // }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { AddOrEditDangerObsModalPage } from './add-or-edit-danger-obs-modal.page';\r\nimport { SharedComponentsModule } from '../../../shared-components.module';\r\n\r\n@NgModule({\r\n  imports: [SharedComponentsModule],\r\n  declarations: [AddOrEditDangerObsModalPage],\r\n  entryComponents: [AddOrEditDangerObsModalPage]\r\n})\r\nexport class AddOrEditDangerObsModalPageModule {}\r\n","import { Component, OnInit, Input, NgZone } from '@angular/core';\r\nimport { DangerObsEditModel } from '@varsom-regobs-common/regobs-api';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { GeoHazard } from '@varsom-regobs-common/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { SelectOption } from '../../../../shared/components/input/select/select-option.model';\r\n\r\nconst COMMENT_SEPARATOR = ': ';\r\n@Component({\r\n  selector: 'app-add-or-edit-danger-obs-modal',\r\n  templateUrl: './add-or-edit-danger-obs-modal.page.html',\r\n  styleUrls: ['./add-or-edit-danger-obs-modal.page.scss']\r\n})\r\nexport class AddOrEditDangerObsModalPage implements OnInit {\r\n  @Input() dangerObs: DangerObsEditModel;\r\n  @Input() geoHazard: GeoHazard;\r\n  noDangerObs = false;\r\n  areaArr: SelectOption[];\r\n  tmpArea = '';\r\n  dangerSignTid: number;\r\n  comment: string;\r\n  loaded = false;\r\n  commentTranslations: string[];\r\n  showDangerSignSelect = true;\r\n  showDangerSignCheckbox = false;\r\n\r\n  interfaceOptions = {};\r\n\r\n  get GeoHazardName() {\r\n    return GeoHazard[this.geoHazard];\r\n  }\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private translateService: TranslateService,\r\n    private ngZone: NgZone\r\n  ) {}\r\n\r\n  async ngOnInit() {\r\n    this.showDangerSignCheckbox = this.geoHazard != GeoHazard.Ice;\r\n\r\n    const tranlations = await this.translateService\r\n      .get(this.getAreaArray())\r\n      .toPromise();\r\n    this.commentTranslations = await this.translateService\r\n      .get([\r\n        'REGISTRATION.DANGER_OBS.AREA',\r\n        'REGISTRATION.DANGER_OBS.DESCRIPTION'\r\n      ])\r\n      .toPromise();\r\n    this.areaArr = this.getAreaArray()\r\n      .map((item) => tranlations[item] as string)\r\n      .map((item) => ({ id: item, text: item }));\r\n\r\n    if (this.dangerObs) {\r\n      if (this.dangerObs.Comment) {\r\n        const option = this.areaArr.find(\r\n          (x) => this.dangerObs.Comment.indexOf(x.id) >= 0\r\n        );\r\n        this.tmpArea = option ? option.id : '';\r\n        if (this.tmpArea) {\r\n          this.comment = this.dangerObs.Comment.substr(\r\n            this.dangerObs.Comment.indexOf(this.tmpArea) + this.tmpArea.length\r\n          );\r\n          const textToFind =\r\n            `${this.commentTranslations['REGISTRATION.DANGER_OBS.DESCRIPTION']}` +\r\n            `${COMMENT_SEPARATOR}`;\r\n          const additionalCommentIndex = this.dangerObs.Comment.indexOf(\r\n            textToFind\r\n          );\r\n          if (additionalCommentIndex >= 0) {\r\n            this.comment = this.dangerObs.Comment.substr(\r\n              additionalCommentIndex + textToFind.length\r\n            );\r\n          }\r\n        } else {\r\n          this.comment = this.dangerObs.Comment;\r\n        }\r\n      }\r\n      if (this.dangerObs.DangerSignTID === this.getNoDangerSignTid()) {\r\n        this.noDangerObs = true;\r\n      }\r\n      this.dangerSignTid = this.dangerObs.DangerSignTID;\r\n      this.updateDangerSignSelectVisibilty();\r\n    }\r\n    this.loaded = true;\r\n  }\r\n\r\n  updateDangerSignSelectVisibilty() {\r\n    if (this.geoHazard === GeoHazard.Ice) {\r\n      this.showDangerSignSelect = true;\r\n    } else {\r\n      this.showDangerSignSelect = !this.noDangerObs;\r\n    }\r\n  }\r\n\r\n  toggleDangerObs(): void {\r\n    this.noDangerObs = !this.noDangerObs;\r\n    if (this.noDangerObs) {\r\n      this.dangerSignTid = this.getDangerSignTidOrFallback();\r\n    }\r\n    this.updateDangerSignSelectVisibilty();\r\n  }\r\n\r\n  checkBoxChanged(): void {\r\n    this.updateDangerSignSelectVisibilty();\r\n  }\r\n\r\n  dropdownChanged(val: number) {\r\n    if (val === this.getNoDangerSignTid()) {\r\n      this.noDangerObs = true;\r\n      this.updateDangerSignSelectVisibilty();\r\n    } else {\r\n      this.noDangerObs = false;\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  getNoDangerSignTid() {\r\n    return (this.geoHazard !== GeoHazard.Snow ? this.geoHazard * 10 : 0) + 1;\r\n  }\r\n\r\n  getDangerSignTidOrFallback() {\r\n    return this.dangerSignTid !== undefined\r\n      ? this.dangerSignTid\r\n      : this.geoHazard !== GeoHazard.Snow\r\n        ? this.geoHazard * 10\r\n        : 0;\r\n  }\r\n\r\n  ok() {\r\n    const dangerObsToSave: DangerObsEditModel = {\r\n      GeoHazardTID: this.geoHazard,\r\n      DangerSignTID: this.noDangerObs\r\n        ? this.getNoDangerSignTid()\r\n        : this.getDangerSignTidOrFallback(),\r\n      Comment: this.getComment()\r\n    };\r\n    this.modalController.dismiss(dangerObsToSave);\r\n  }\r\n\r\n  private getComment() {\r\n    if (\r\n      this.tmpArea &&\r\n      this.tmpArea.length > 0 &&\r\n      this.comment &&\r\n      this.comment.length > 0\r\n    ) {\r\n      return (\r\n        `${this.commentTranslations['REGISTRATION.DANGER_OBS.AREA']}` +\r\n        `${COMMENT_SEPARATOR}${this.tmpArea}. ` +\r\n        `${this.commentTranslations['REGISTRATION.DANGER_OBS.DESCRIPTION']}` +\r\n        `${COMMENT_SEPARATOR}${this.comment || ''}`\r\n      );\r\n    }\r\n    if (this.tmpArea && this.tmpArea.length > 0) {\r\n      return (\r\n        `${this.commentTranslations['REGISTRATION.DANGER_OBS.AREA']}` +\r\n        `${COMMENT_SEPARATOR}${this.tmpArea}`\r\n      );\r\n    }\r\n\r\n    return this.comment;\r\n  }\r\n\r\n  delete() {\r\n    this.modalController.dismiss({ delete: true });\r\n  }\r\n\r\n  getAreaArray() {\r\n    switch (this.geoHazard) {\r\n    case GeoHazard.Ice: {\r\n      return [\r\n        'REGISTRATION.DANGER_OBS.RIGHT_HERE',\r\n        'REGISTRATION.DANGER_OBS.ON_THIS_SIDE_OF_THE_WATER',\r\n        'REGISTRATION.DANGER_OBS.ON_THIS_WATER',\r\n        'REGISTRATION.DANGER_OBS.MANY_WATER_NEARBY'\r\n      ];\r\n    }\r\n    default:\r\n      return [\r\n        'REGISTRATION.DANGER_OBS.ON_THIS_PLACE',\r\n        'REGISTRATION.DANGER_OBS.ON_THIS_MOUNTAIN_SIDE',\r\n        'REGISTRATION.DANGER_OBS.GENERAL_ON_MOUNTAIN',\r\n        'REGISTRATION.DANGER_OBS.IN_THE_VALLEY_OR_FJORD',\r\n        'REGISTRATION.DANGER_OBS.FOR_MUNICIPAL',\r\n        'REGISTRATION.DANGER_OBS.FOR_REGION'\r\n      ];\r\n    }\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button (click)=\"cancel()\">{{ 'DIALOGS.CANCEL' | translate }}</ion-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{ 'REGISTRATION.DANGER_OBS.TITLE' | translate }}\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content *ngIf=\"loaded\">\r\n  <ion-list lines=\"full\">\r\n    <ion-list-header class=\"ion-text-uppercase\">\r\n      <ion-label>\r\n        {{ 'REGISTRATION.DANGER_OBS.TITLE' | translate}}\r\n      </ion-label>\r\n    </ion-list-header>\r\n    <ion-item *ngIf=\"showDangerSignCheckbox\">\r\n      <ion-checkbox (ionChange)=\"checkBoxChanged()\" color=\"varsom-dark-blue\" mode=\"md\" slot=\"start\" [(ngModel)]=\"noDangerObs\"></ion-checkbox>\r\n      <ion-label>{{ 'REGISTRATION.DANGER_OBS.NO_DAMAGE_SIGN' | translate}}</ion-label>\r\n    </ion-item>\r\n    <app-kdv-select (valueChange)=\"dropdownChanged($event)\" title=\"REGISTRATION.DANGER_OBS.TITLE\" *ngIf=\"showDangerSignSelect\"\r\n      kdvKey=\"{{ GeoHazardName }}_DangerSignKDV\" [(value)]=\"dangerSignTid\">\r\n    </app-kdv-select>\r\n    <ion-item>\r\n      <ion-label color=\"medium\" position=\"stacked\" class=\"ion-text-uppercase\">{{'REGISTRATION.DANGER_OBS.AREA' | translate}}\r\n      </ion-label>\r\n      <app-select title=\"REGISTRATION.DANGER_OBS.AREA\" [(selectedValue)]=\"tmpArea\" [options]=\"areaArr\"></app-select>\r\n    </ion-item>\r\n    <app-text-comment [(value)]=\"comment\" title=\"REGISTRATION.DANGER_OBS.COMMENT\" rows=\"2\"\r\n      placeholder=\"REGISTRATION.DANGER_OBS.COMMENT_PLACEHOLDER\"></app-text-comment>\r\n  </ion-list>\r\n  <app-modal-save-or-delete-buttons (saveClicked)=\"ok()\" (deleteClicked)=\"delete()\" [showDelete]=\"dangerObs\">\r\n  </app-modal-save-or-delete-buttons>\r\n</ion-content>","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { DangerObsPage } from './danger-obs.page';\r\nimport { SharedComponentsModule } from '../../shared-components.module';\r\nimport { AddOrEditDangerObsModalPageModule } from './add-or-edit-danger-obs-modal/add-or-edit-danger-obs-modal.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DangerObsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedComponentsModule,\r\n    AddOrEditDangerObsModalPageModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [DangerObsPage]\r\n})\r\nexport class DangerObsPageModule {}\r\n","import { Component, NgZone } from '@angular/core';\r\nimport { RegistrationTid } from 'src/app/modules/common-registration/registration.models';\r\nimport { BasePage } from '../base.page';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { AddOrEditDangerObsModalPage } from './add-or-edit-danger-obs-modal/add-or-edit-danger-obs-modal.page';\r\nimport { DangerObsEditModel, KdvElement } from '@varsom-regobs-common/regobs-api';\r\nimport { KdvService } from '../../../../core/services/kdv/kdv.service';\r\nimport { GeoHazard } from '@varsom-regobs-common/core';\r\nimport { BasePageService } from '../base-page-service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-danger-obs',\r\n  templateUrl: './danger-obs.page.html',\r\n  styleUrls: ['./danger-obs.page.scss']\r\n})\r\nexport class DangerObsPage extends BasePage {\r\n  private dangerSignKdv: KdvElement[];\r\n  private dangerSignKdvSubscription: Subscription;\r\n\r\n  constructor(\r\n    basePageService: BasePageService,\r\n    activatedRoute: ActivatedRoute,\r\n    private modalController: ModalController,\r\n    private zone: NgZone,\r\n    private kdvService: KdvService\r\n  ) {\r\n    super(RegistrationTid.DangerObs, basePageService, activatedRoute);\r\n  }\r\n\r\n  onBeforeLeave() {\r\n    if (this.dangerSignKdvSubscription) {\r\n      this.dangerSignKdvSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  onInit() {\r\n    const kdvKey = `${GeoHazard[this.registration.geoHazard]}_DangerSignKDV`;\r\n    this.dangerSignKdvSubscription = this.kdvService\r\n      .getKdvRepositoryByKeyObservable(kdvKey)\r\n      .subscribe((val) => {\r\n        this.zone.run(() => {\r\n          this.dangerSignKdv = val;\r\n        });\r\n      });\r\n  }\r\n\r\n  async addOrEdit(index?: number) {\r\n    const dangerObs =\r\n      index !== undefined\r\n        ? this.registration.request.DangerObs[index]\r\n        : undefined;\r\n    const modal = await this.modalController.create({\r\n      component: AddOrEditDangerObsModalPage,\r\n      componentProps: { dangerObs, geoHazard: this.registration.geoHazard }\r\n    });\r\n    modal.present();\r\n    const result = await modal.onDidDismiss();\r\n    if (result.data) {\r\n      if (result.data.delete) {\r\n        this.removeAtIndex(index);\r\n      } else {\r\n        if (index !== undefined) {\r\n          this.setDangerObs(index, result.data);\r\n        } else {\r\n          this.addDangerObs(result.data);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setDangerObs(index: number, dangerObs: DangerObsEditModel) {\r\n    this.zone.run(() => {\r\n      if (!this.registration.request.DangerObs) {\r\n        this.registration.request.DangerObs = [];\r\n      }\r\n      this.registration.request.DangerObs[index] = dangerObs;\r\n    });\r\n  }\r\n\r\n  addDangerObs(dangerObs: DangerObsEditModel) {\r\n    this.zone.run(() => {\r\n      if (!this.registration.request.DangerObs) {\r\n        this.registration.request.DangerObs = [];\r\n      }\r\n      this.registration.request.DangerObs.push(dangerObs);\r\n    });\r\n  }\r\n\r\n  removeAtIndex(index: number) {\r\n    this.zone.run(() => {\r\n      if (!this.registration.request.DangerObs) {\r\n        this.registration.request.DangerObs = [];\r\n      }\r\n      if (this.registration.request.DangerObs.length > 0) {\r\n        this.registration.request.DangerObs.splice(index, 1);\r\n      }\r\n    });\r\n  }\r\n\r\n  getSummaryText(dangerObs: DangerObsEditModel) {\r\n    const text = [];\r\n    if (dangerObs.DangerSignTID % 100 !== 0 && this.dangerSignKdv) {\r\n      const kdvElement = this.dangerSignKdv.find(\r\n        (x) => x.Id === dangerObs.DangerSignTID\r\n      );\r\n      if (kdvElement) {\r\n        text.push(kdvElement.Name.trim());\r\n      }\r\n    }\r\n    if (dangerObs.Comment) {\r\n      text.push(dangerObs.Comment);\r\n    }\r\n    return text.join(', ');\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar appHeaderColor mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/\" text=\"\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{'REGISTRATION.DANGER_OBS.TITLE' | translate}}\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <app-registration-content-wrapper *ngIf=\"registration\" [registration]=\"registration\"\r\n    [registrationTid]=\"registrationTid\" (reset)=\"reset()\">\r\n    <ion-list lines=\"full\">\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.DANGER_OBS.TITLE' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <ion-item (click)=\"addOrEdit(i)\" *ngFor=\"let dangerObs of registration.request.DangerObs; let i = index\">\r\n        <ion-label>{{ getSummaryText(dangerObs) }}</ion-label>\r\n      </ion-item>\r\n      <ion-item (click)=\"addOrEdit()\">\r\n        <ion-icon color=\"dark\" name=\"add-circle-outline\" slot=\"start\"></ion-icon>\r\n        <ion-label>{{ 'REGISTRATION.DANGER_OBS.NEW_DANGER_OBS' | translate }}</ion-label>\r\n      </ion-item>\r\n      <ion-list-header class=\"ion-text-uppercase\">\r\n        <ion-label>\r\n          {{ 'REGISTRATION.ADD_IMAGES' | translate}}\r\n        </ion-label>\r\n      </ion-list-header>\r\n      <app-add-picture-item\r\n        [registrationTid]=\"registrationTid\" [geoHazard]=\"registration.geoHazard\" [registrationId]=\"registration.id\"></app-add-picture-item>\r\n    </ion-list>\r\n  </app-registration-content-wrapper>\r\n</ion-content>"],"names":[],"sourceRoot":"webpack:///"}