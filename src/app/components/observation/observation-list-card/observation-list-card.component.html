<ion-card *ngIf="loaded">
  <ion-card-header *ngIf="header">
    <h3 color="medium">{{header}}</h3>
  </ion-card-header>
  <ion-card-content>
    <ion-grid no-padding>
      <ion-row class="row-padding-start" align-items-center>
        <ion-col size="5">
          <ion-icon [src]="icon"></ion-icon> {{ geoHazardName }}
        </ion-col>
        <ion-col size="7">
          <ion-icon src="/assets/icon/moh.svg"></ion-icon> {{ obs.ObsLocation.Height }}
          {{'MAP_CENTER_INFO.ABOVE_SEA_LEVEL' | translate}}
        </ion-col>
      </ion-row>
      <ion-row class="row-padding-start">
        <ion-col size="5">
          <ion-icon name="calendar"></ion-icon> {{ dtObsDate | formatDate | async }}
        </ion-col>
        <ion-col size="7">
          <ion-icon name="contact"></ion-icon> {{obs.Observer.NickName}}
          <ion-icon [name]="star.full ? 'star' : 'star-outline'" *ngFor="let star of stars"></ion-icon>
        </ion-col>
      </ion-row>
      <ng-container *ngIf="obs.Attachments.length > 0">
        <ion-row>
          <ion-col size="12" class="slides-container" no-padding>
            <ion-slides [options]="slideOptions" [pager]="false" (ionSlideDidChange)="setNextAndPrevVisibe()"
              (ionSlidesDidLoad)="setNextAndPrevVisibe()">
              <ion-slide *ngFor="let image of obs.Attachments">
                <ion-img [src]="getImageUrl(image.AttachmentFileName)" (click)="slideTap()"></ion-img>
              </ion-slide>
            </ion-slides>
            <div *ngIf="prevVisible" class="swiper-button-prev swiper-button-white" (click)="slidePrev()"></div>
            <div *ngIf="nextVisible" class="swiper-button-next swiper-button-white" (click)="slideNext()"></div>
          </ion-col>
        </ion-row>
        <ion-row class="row-padding-start">
          <ion-col size="12" text-wrap>
            {{'DIALOGS.OF' | translate}}: {{ imageHeader }}. {{'DIALOGS.COMMENT' | translate}}: {{ imageDecription }}
          </ion-col>
        </ion-row>
      </ng-container>
      <ion-row class="row-padding-start">
        <ion-col size="12">
          <h3>{{ 'OBSERVATION_LIST.FORMS' | translate }}</h3>
        </ion-col>
      </ion-row>
      <ion-row class="row-padding-start">
        <ion-col size="12">
          <ion-badge (click)="toggleAllSelected()" *ngIf="summaries.length > 1" [color]="allSelected ? 'medium' : 'light'"
            [ngClass]="{'outline': !allSelected}">
            {{'OBSERVATION_LIST.ALL_OBSERVATIONS' | translate}}
          </ion-badge>
          <ion-badge (click)="toggleRegistration(i)" text-wrap [color]="(s.open && (summaries.length <= 1 || !allSelected)) ? 'medium' : 'light'"
            *ngFor="let s of summaries; let i = index" [ngClass]="{'outline': !(s.open && (summaries.length <= 1 || !allSelected))}">
            {{ s.summary.RegistrationName }}
          </ion-badge>
        </ion-col>
      </ion-row>
      <ng-container *ngFor="let s of summaries; let i = index">
        <ng-container *ngIf="s.open">
          <ion-row class="row-padding-start">
            <ion-col size="12">
              <h3>{{ s.summary.RegistrationName }}</h3>
            </ion-col>
          </ion-row>
          <ion-row class="row-padding-start">
            <ion-col size="12" text-wrap>
              <ng-container *ngFor="let innerSummary of s.summary.Summaries; let i = index">
                <ng-container *ngIf="innerSummary.Kind === 0">
                  <span *ngIf="i>0">&nbsp;&bull;&nbsp;</span>{{ innerSummary.Value }}
                </ng-container>
              </ng-container>
            </ion-col>
          </ion-row>
        </ng-container>
      </ng-container>
    </ion-grid>
    <ion-item color="light" (click)="openWeb()">
      <ion-label color="medium" class="link-title">
        {{'OBSERVATION_LIST.GO_TO_OBSERVATION' | translate}}
      </ion-label>
      <ion-label color="medium" class="reg-id" slot="end" text-end>
        RegId: {{ obs.RegID }}
      </ion-label>
    </ion-item>
  </ion-card-content>
</ion-card>