<ion-header>
  <ion-toolbar color="dark" mode="ios">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>
      {{"REGISTRATION.OVERVIEW.TITLE" | translate}}
    </ion-title>
  </ion-toolbar>
</ion-header>
<ng-container *ngIf="registration">
  <ion-content>
    <ion-list *ngIf="registration.error && registration.status === RegistrationStatus.Sync" lines="full">
      <ion-list-header padding text-uppercase>
        <ion-label>
          <h3>Innsending feilet</h3>
        </ion-label>
      </ion-list-header>
      <ion-item>
        <ion-label text-wrap *ngIf="registration.error.status === 0">
          Mangler nettverk eller innsending tok for lang tid. Vi prøver igjen etter en stund og håper at nettet har
          bedret seg.
        </ion-label>
        <ion-label text-wrap *ngIf="registration.error.status === 400">
          Det har oppstått et problem med registreringen din: {{ registration.error.message }}
        </ion-label>
        <ion-label text-wrap *ngIf="registration.error.status > 400">
          Det har oppstått et problem med registreringen din. Vi har logget problemet.
          <!-- Ta skjermbilde og
          <app-external-link src="http://www.regobs.no/Home/About">kontakt oss</app-external-link>
          , så hjelper du oss med å finne en løsning.  -->
          Feilede observasjoner lagres i telefonen din, og når problemet er
          løst vil du kunne sende inn observasjoen på nytt.
        </ion-label>
      </ion-item>
      <ion-item *ngIf="registration.error.status >= 400">
        <ion-label text-wrap>
          Referanse ID: {{ registration.Id }}
        </ion-label>
      </ion-item>
      <ion-item (click)="sendEmail()">
        <ion-icon slot="start" name="mail"></ion-icon>
        <ion-label text-wrap>
          Send til oss på epost
        </ion-label>
      </ion-item>
      <ion-item (click)="openForEdit()">
        <ion-icon slot="start" name="create"></ion-icon>
        <ion-label text-wrap>
          Rediger observasjon
        </ion-label>
      </ion-item>
    </ion-list>
    <ion-list lines="full">
      <ion-list-header padding text-uppercase>
        <ion-label>
          <h3>{{"REGISTRATION.OVERVIEW.MY_OBSERVATION" | translate}}</h3>
        </ion-label>
      </ion-list-header>
      <app-summary-item [readonly]="registration.status === RegistrationStatus.Sync" *ngFor="let item of summaryItems"
        [item]="item"></app-summary-item>
    </ion-list>
  </ion-content>
  <app-send-button [registration]="registration"></app-send-button>
</ng-container>