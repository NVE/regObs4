<ion-list class="ion-no-margin">
  <ion-list-header color="varsom-blue" class="ion-no-margin">
    <ion-label>{{'OBSERVATION_FILTER.TITLE' | translate}}</ion-label>
  </ion-list-header>
  <app-observations-days-back></app-observations-days-back>
  <app-update-observations></app-update-observations>
  <div *ngIf="true">
    <!-- Dette er på prototypestadiet, så vi skjuler dette foreløpig -->
    <!-- TODO: Oversettelser på all tekst -->
    <ion-list-header color="varsom-blue" class="ion-no-margin">
      <ion-label>
        Observasjonstype
      </ion-label>
    </ion-list-header>
    <!-- TODO: Checkboxer må endre seg basert på hvilken naturfare som er valgt! Se på eksisterende funksjonalitet i side-menu.component -->
    <ion-item>
      <ion-checkbox checked="true" [(ngModel)]="masterCheck" [indeterminate]="isIndeterminate"
        (click)="checkMaster($event)" color="varsom-dark-blue" mode="md">
      </ion-checkbox>
      <ion-label class="ion-padding-start">Alle</ion-label>
      <ion-button class="toggleAllTypesButton" (click)="toggleAllObservationTypes()" fill="clear">
        <ion-icon [name]="showObservationTypes ? 'chevron-up-circle-outline' : 'chevron-down-circle-outline' ">
        </ion-icon>
      </ion-button>
    </ion-item>
    <ng-container *ngIf="this.showObservationTypes">
      <ion-item>
        <ion-list lines="none">
          <!-- TODO: Hente ut riktige observasjonstyper i checkboxer -->
          <ion-item *ngFor="let type of filteredObservationTypes">
            <ion-checkbox [(ngModel)]="type.isChecked" (ionChange)="checkEvent()" color="varsom-dark-blue" mode="md">
            </ion-checkbox>
            <ion-label class="ion-padding-start">{{type.value}}</ion-label>
          </ion-item>
        </ion-list>
      </ion-item>
    </ng-container>

    <ion-list-header color="varsom-blue" class="ion-no-margin">
      <ion-label>
        {{'OBSERVATION_FILTER.COMPETANCE_FILTER.TITLE' | translate}}
      </ion-label>
    </ion-list-header>
<!--<ng-container *ngIf="this.showCompetances">
  <ion-item *ngIf="competanceOptions$ | async as competanceOptions">
    <ion-list lines="none">
      <ion-item *ngFor="let competance of competanceOptions.entries()">
        <ion-checkbox [checked]="competance[1].isChecked" (ionChange)="onSelectChange(competance[1])"
          color="varsom-dark-blue" mode="md">
        </ion-checkbox>
        <ion-label class="ion-padding-start">{{competance[0]}}</ion-label>
      </ion-item>
    </ion-list>
  </ion-item>
</ng-container> -->
    <!-- TODO: Legg til eller hente kompetanser i menyen. Husk at på snø er det en spesiell kompetanse A -->
    <ion-item *ngIf="competenceOptions">
      <ion-label class="no-margin-bottom" color="dark" position="stacked">{{'OBSERVATION_FILTER.COMPETANCE_FILTER.LABEL' |
        translate}}</ion-label>
      <ion-select [interface]="popupType" [value]="chosenValue" (ionChange)="onSelectCompetenceChange($event)">
        <ion-select-option value="all">{{'OBSERVATION_FILTER.COMPETANCE_FILTER.ALL' | translate}}</ion-select-option>
        <ion-select-option *ngFor="let co of competenceOptions" [value]="co">
          {{co.name}}
        </ion-select-option>
      </ion-select>
  </ion-item>
  <ion-item *ngIf="isShowAutomaticStation">
    <ion-checkbox [checked]="isAutomaticStationChecked" color="varsom-dark-blue" mode="md" [value]="automaticStation"
      (ionChange)="onCheckAutomaticStations($event)">
    </ion-checkbox>
    <ion-label class="ion-padding-start">{{'OBSERVATION_FILTER.COMPETANCE_FILTER.AUTOMATIC_STATIONS' | translate}}
    </ion-label>
  </ion-item>
    <!-- TODO: Finne ut hvordan vi implementerer navnesøk - aynskront eller med søkeknapp? -->
    <ion-item>
      <ion-label class="no-margin-bottom" color="dark" position="stacked">Søk</ion-label>
      <ion-searchbar [value]="nickName" [debounce]="1000" mode="ios" class="ion-no-padding"
        placeholder="Søk på observatørnavn" (ionChange)="setNickName($event)">
      </ion-searchbar>
    </ion-item>

    <!-- TODO: Implementere reset filter funksjonalitet -->
    <ion-item>
      <ion-button class="resetFiltersButton" type="button" fill="clear">
        <ion-icon src="./assets/icon/reset-button.svg">
        </ion-icon>Tilbakestill filtere
      </ion-button>
    </ion-item>
  </div>
</ion-list>