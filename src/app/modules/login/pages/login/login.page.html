<ion-header *ngIf="loggedInUser$ | async as loggedInUser">
  <ion-toolbar appHeaderColor mode="ios">
    <ion-buttons slot="start">
      <ion-back-button text="" defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>
      {{ loggedInUser.isLoggedIn ? ('MY_PROFILE.USER' | translate) : ('LOGIN.TITLE' | translate) }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" *ngIf="loggedInUser$ | async as loggedInUser">
  <ion-grid class="grid-container" *ngIf="loggedInUser.isLoggedIn else login">
    <ion-row>
      <ion-col>
        <h1 class="profile-title">{{'MY_PROFILE.USER' | translate}}</h1>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" size-sm="6" class="ion-align-self-center">
        <div class="flexContainer ion-padding-bottom">
          <ion-icon class="profile-icon" src="./assets/icon/portrait.svg"></ion-icon>
          <ion-label class="ion-text-wrap ion-align-self-center ion-padding-start"><ion-text color="primary">{{ loggedInUser.email }}</ion-text>
          </ion-label>
        </div>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="6" size-sm="6" size-md="4" size-lg="3">
        <ion-button class="button ion-text-uppercase" type="button" fill="outline" expand="block" (click)="openMyPage()">
          <ion-icon slot="end" src="./assets/icon/newTab.svg"></ion-icon>
            {{'LOGIN.MY_PROFILE' | translate }}
        </ion-button>
      </ion-col>
      <ion-col size="6" size-sm="5" size-md="4" size-lg="3">
        <ion-button class="button ion-text-uppercase logout" type="submit" fill="clear" (click)="logout()">
          {{ 'LOGIN.LOGOUT' | translate }}</ion-button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h2>{{'MY_PROFILE.NICKNAME' | translate}}</h2>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" size-sm="6" size-lg="4">
        <div class="flexContainer">
          <p class="ion-align-self-center">{{ loggedInUser.email }}</p>
          <!-- TODO: Lage click handler og funksjon for å redigere kallenavn-->
          <ion-button class="button ion-padding-start ion-text-uppercase" fill="clear" expand="block">{{'MY_PROFILE.EDIT' | translate}} <ion-icon class="padding-medium" src="./assets/icon/pencil.svg"></ion-icon></ion-button>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <p class="info-text">{{'MY_PROFILE.NICKNAME_TEXT' | translate}}</p>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h2>{{'MY_PROFILE.MY_PICTURES' | translate}}</h2>
      </ion-col>      
    </ion-row>
    <ion-row class="ion-padding-top">
      <ion-col>
        <div class="flexContainer max-div-height margin-mobile">
          <p class="ion-align-self-center no-margin"><strong>{{'MY_PROFILE.COPYRIGHT' | translate}}:</strong> {{loggedInUser.email}}</p>
          <ion-button class="button ion-padding-start ion-text-uppercase edit-button" fill="clear" expand="block">{{'MY_PROFILE.EDIT' | translate}} <ion-icon class="padding-medium" src="./assets/icon/pencil.svg"></ion-icon></ion-button>
        </div>
        <div class="flexContainer max-div-height">
          <p class="ion-align-self-center no-margin"><strong>{{'MY_PROFILE.PHOTOGRAPHER' | translate}}:</strong> {{loggedInUser.email}}</p>
          <ion-button class="button ion-padding-start ion-text-uppercase edit-button" fill="clear" expand="block">Rediger <ion-icon class="padding-medium" src="./assets/icon/pencil.svg"></ion-icon></ion-button>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <p class="info-text ion-padding-top" [innerHTML]="'MY_PROFILE.PUBLISH_PHOTOS' | translate"></p>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h2>
          {{'MY_PROFILE.MY_COMPETENCE' | translate}}
        </h2>
      </ion-col>
    </ion-row>
    <ion-row class="ion-padding-top">
      <!-- Generere GeoHazard listen ved å hente de ut -->
      <ion-col size="3" size-xs="5" size-sm="3" size-md="2">
        <p class="no-margin">Snø</p>
        <p class="no-margin">Is</p>
        <p class="no-margin">Vann</p>
        <p class="no-margin">Jord</p>
      </ion-col>
      <!-- Hente ut kompetansen riktig ved å koble opp mot API -->
      <ion-col class="star-container" size="auto" size-xs="7" size-sm="9" size-md="10" pullMd="1" pullSm="2" pullXs="1">
        <app-competence class="stars" [competenceLevel]="1"></app-competence>
        <app-competence class="stars" [competenceLevel]="4"></app-competence>
        <app-competence class="stars" [competenceLevel]="0"></app-competence>
        <app-competence class="stars" [competenceLevel]="3"></app-competence>
      </ion-col>
    </ion-row>
    <ion-row class="ion-padding-top">
      <ion-col>
        <p class="info-text" [innerHTML]="'MY_PROFILE.COMPETENCE' | translate"></p>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h2>
          {{'MY_PROFILE.MY_GROUPS' | translate}}
        </h2>
      </ion-col>  
    </ion-row>
    <ion-row class="ion-padding-top">
      <ion-col size="12" size-sm="5" size-md="4" size-lg="3">
        <!-- Generere gruppene med å hente de fra API også loope gjennom med ngFor -->
        <div class="flexContainer margin-mobile">
          <ion-icon class="ion-align-self-center" src="./assets/icon/group.svg"></ion-icon>
          <p class="padding-medium no-margin">Snøskredvarslingen</p>
        </div>
      </ion-col>
      <ion-col>
        <div class="flexContainer">
          <ion-icon class="ion-align-self-center" src="./assets/icon/group.svg"></ion-icon>
          <p class="padding-medium no-margin">Snøskredgerilja</p>
        </div>
      </ion-col>
    </ion-row>
    <ion-row class="ion-padding-top ion-padding-bottom">
      <ion-col>
        <p class="info-text" [innerHTML]="'MY_PROFILE.MY_GROUPS_TEXT' | translate"></p>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
<ng-template #login>
  <ion-button class="logout-button" expand="block" type="submit" color="varsom-orange" (click)="signIn()">
    {{ 'LOGIN.LOGIN' | translate }}
  </ion-button>
</ng-template>