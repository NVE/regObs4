<ion-header>
  <ion-toolbar appHeaderColor mode="ios">
    <ion-buttons slot="start">
      <ion-back-button text="" defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title> Offline-kart</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div class="desc">
    <div>
      <ion-text color="primary">
        <h1>Nedlastning av kartpakker</h1>
        <p>Nedlastning av kartpakker foregår i to trinn:</p>
        <ol>
          <li>Gå inn på nedlastningssiden og last ned kartpakke til telefonen.</li>
          <li>Trykk på "Velg fil"-knappen nedenfor og velg nedlastet zip-fil for å installere kartpakken.</li>
        </ol>
      </ion-text>
    </div>

    <div>
      <a href="https://testregobs.z1.web.core.windows.net/">Gå til nedlastningsside</a>
    </div>

    <div>
      <input
        type="file"
        (change)="loadFile($event.target.files)"
        id="file-input"
        accept="application/zip"
      >
    </div>
  </div> 
  
  <ion-item *ngIf="userSettings">
    <ion-label>Ventetid (s) på online-kart</ion-label>
    <ion-input [(ngModel)]="userSettings.onlineMapTileRequestTimeout" (ngModelChange)="saveUserSettings()" type="number" min="1" max="60" inputmode="number">
    </ion-input>
  </ion-item>
  
  <ion-list>
    <ion-list-header>
      <ion-label>Kartpakke</ion-label>
      <ion-label>Str</ion-label>
      <ion-label>Dato</ion-label>
      <ion-label></ion-label>
    </ion-list-header>
    <ion-item (click)="presentActionSheet(item)" *ngFor="let item of downloadedMaps$ | async">
      <ion-label>{{ item.name }}</ion-label>
      <ion-label *ngIf="isDownloading(item)">
        ({{getPercentage(item) +'%' }})</ion-label>
      <ion-label *ngIf="!isDownloading(item)">{{ humanReadableByteSize(item.size) }}</ion-label>
      <ion-label></ion-label>
      <ion-icon slot="end" *ngIf="!!item.downloadComplete" name="checkmark"></ion-icon>
    </ion-item>
  </ion-list>
</ion-content>